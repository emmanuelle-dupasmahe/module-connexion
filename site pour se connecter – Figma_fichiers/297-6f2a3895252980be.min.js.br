"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="85d6330c-fe1a-5d6a-8a86-b3264ada6944")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[297],{472207:(e,t,s)=>{s.d(t,{e:()=>n});let n="https://go/figmascope-docs"},787538:(e,t,s)=>{s.d(t,{rf:()=>i,tV:()=>a,zG:()=>l});var n=s(104076),r=s(659062);function l(){return(0,n.jsx)(a,{children:(0,n.jsx)("p",{children:"Reading file..."})})}function i({error:e}){let t="Oops! Something went wrong";return"string"==typeof e?t=e:e instanceof Error&&(t=e.message,console.error(e)),(0,n.jsx)(a,{children:(0,n.jsx)("p",{style:r.sx.colorTextOndanger.colorBgDanger.p16.font20.maxW400.$,children:t})})}function a({children:e}){return(0,n.jsx)("div",{style:r.sx.fillPositionedContainer.flex.itemsCenter.justifyCenter.flexColumn.lh1_5Lines.font16.$,children:e})}},123315:(e,t,s)=>{s.d(t,{J:()=>tm});var n=s(104076),r=s(716976),l=s(737121),i=s(795033),a=s(883765),o=s(222714),c=s(221586),d=s(514223),u=s(659062),h=s(569963),p=s(284068),f=s(383947),x=s(432099),m=s(657878),g=s(377399),j=s(800108),b=(e=>(e[e.Fetched=0]="Fetched",e[e.Fetching=1]="Fetching",e[e.NeverFetched=2]="NeverFetched",e))(b||{});let v=(0,i.eU)(e=>{let t=e(m.OC);return"fullscreen"===t.view?`/api/file/scenegraph_validations/${t.fileKey}`:(0,g.E)(t)&&t.urlParams?.type==="server_file"?`/api/admin/scenegraph_validations/${t.urlParams.key}`:null}),k=(0,i.eU)(e=>null!=e(v)),y=(()=>{let e=(0,i.eU)((0,f.Ok)());return(0,i.eU)(t=>t(e),async(t,s)=>{let n;if(t(e).status===d.r.LOADING)return;let r=t(v);if(r){s(e,(0,f.ux)());try{n=await C(r)}catch(t){s(e,(0,f.uW)(t));return}s(e,(0,f.NY)(n))}})})();async function C(e){let t=await (0,x.GD)(e),s=new j._;for(let e of t.data.meta.data.results.violations)if("always-fail-for-testing"!==e.name)for(let t of e.instances)s.add(t.guid,t.message);return s}var S=s(617748),w=s(707425),I=s(787538),N=s(255054),E=s(843717),A=s(999083),M=s(266808),_=s(824570),D=s(957501),F=s.n(D),T=s(236631),P=s(911990),$=s(585627);let O=(0,w.Sv)("bookmarkSettings",{bookmarks:{}}),z=(0,i.eU)(e=>{let t=e(O),s=e(p.Cc).id;return new Set((t.bookmarks[s]??[]).map(e=>e.id))});function B(){let[e,t]=(0,i.fp)(O),s=(0,i.md)(p.Cc).id,n=r.useCallback(n=>{t({...e,bookmarks:{...e.bookmarks,[s]:n(e.bookmarks[s]||[])}})},[e,s,t]),l=r.useCallback((e,t)=>{n(s=>[...s,{id:e,name:t}])},[n]),a=r.useCallback(e=>{n(t=>t.filter((t,s)=>s!==e))},[n]),o=r.useCallback((e,t)=>{n(s=>s.map((s,n)=>n===e?{...s,name:t}:s))},[n]),c=r.useCallback((e,t)=>{n(s=>s.map((s,n)=>n===e?{...s,id:$.SW.fromString(t)}:s))},[n]);return{addBookmark:l,deleteBookmark:a,moveBookmarkDown:r.useCallback(e=>{n(t=>{if(e>=t.length-1)return t;let s=t.slice(),[n]=s.splice(e,1);return s.splice(e+1,0,n),s})},[n]),moveBookmarkUp:r.useCallback(e=>{n(t=>{if(e<=0)return t;let s=t.slice(),[n]=s.splice(e,1);return s.splice(e-1,0,n),s})},[n]),renameBookmark:o,updateBookmarkId:c,bookmarks:r.useMemo(()=>e.bookmarks[s]||[],[e,s])}}var U=s(674473);function L(e,t,s){return[...e.getObject(s)?.mapDescendants(e=>e.id)??[],...t?.getObject(s)?.mapDescendants(e=>e.id)??[]]}let R=(0,i.FZ)((0,i.eU)({}),(e,t,s)=>{let n=s(p.Cc),r=s(p.lX);switch(t.type){case"toggleExpanded":return(0,U.X9)(e,t.objectId,t.toggleSubtree?L(n,r,t.objectId):[]);case"expandAncestors":return(0,U.nE)(e,function(e,t,s){return[...e.getObject(s)?.mapAncestors(e=>e.id)??[],...t?.getObject(s)?.mapAncestors(e=>e.id)??[]]}(n,r,t.objectId),!0);case"expandDescendants":return(0,U.nE)(e,[t.objectId,...L(n,r,t.objectId)],!0);case"collapseDescendants":return(0,U.IO)(e,[t.objectId,...L(n,r,t.objectId)])}});var H=s(99723),X=s(382629),G=s(115069);let Y=(0,i.eU)({status:"initial"}),K=(0,i.eU)(0),V=(0,i.eU)(!1),W=(0,i.eU)(e=>{if(e(V)){let t=e(K);return`Indexing search results (this may take a moment)... [${t}/???]`}return null}),J=(0,w.Sv)("searchMode",w.Y6.Search),q=(0,i.eU)(e=>{let t=e(Y),s=e(p.Cc),n=e(S.Sd);return"initial"===t.status?n.map(e=>s.getObject(e)).filter(X.Vq).map(e=>({object:e,matches:[]})).reverse():"results"in t&&t.results.length>0?t.results:null}),Q=(0,i.eU)(e=>{let t=e(Y);if("searching"===t.status&&0===t.results.length){let t=["Searching..."],s=e(W);return s&&t.push(s),t}if("success"===t.status&&0===t.results.length){let t=["No results found."],s=e(p.Cc);return s instanceof G.G2&&t.push("Some content may be unavailable because of incremental loading"),"hide"===s.sensitiveTextPolicy&&t.push("Searching text fields is limited beacuse text redaction has been applied."),t}return"error"===t.status?["Error searching:",String(t.error)]:null}),Z=(0,i.eU)(e=>{if(e(J)!==w.Y6.Filter)return null;let t=e(Y);return"results"in t?t.results.map(e=>e.object):null}),ee=(0,i.eU)(e=>{if(e(J)!==w.Y6.Filter)return null;let t=e(Q);return t?t.join(" "):null}),et=(0,w.Sv)("sortOrder",w.hX.Position),es=(0,i.eU)(e=>{let t=[w.hX.Position,w.hX.Name,w.hX.NodeId];return e(p.Cc).rootObjects[0]?.displayProperties.memoryFraction!=null&&t.push(w.hX.Memory),t.sort(),t}),en=(0,i.eU)(e=>{switch(e(et)){case w.hX.Position:return el;case w.hX.Name:return er;case w.hX.Memory:return ea;case w.hX.NodeId:return ei}});function er(e,t){return e.displayProperties.name.localeCompare(t.displayProperties.name)}function el(e,t){let[s,n]=eo(e,t);if(s&&n){let e=s.parentIndex?.position,t=n.parentIndex?.position;if(null==e&&null==t)return 0;if(null==t)return 1;if(null==e)return -1;if(e<t)return -1;else if(e>t)return 1}return er(e,t)}function ei(e,t){let[s,n]=eo(e,t);if(s&&n){let{sessionID:e,localID:t}=s.guid??{localID:-1,sessionID:-1},{sessionID:r,localID:l}=n.guid??{localID:-1,sessionID:-1};return e-r||t-l}return el(e,t)}function ea(e,t){return(t.displayProperties.memoryFraction??0)-(e.displayProperties.memoryFraction??0)||el(e,t)}function eo(e,t){return"nodeChange"in e&&"nodeChange"in t?[e.nodeChange,t.nodeChange]:[null,null]}var ec=s(727989),ed=s(403671),eu=s(110178),eh=s(665261),ep=s(192075),ef=s(770484),ex=s(66293);let em=eh.ms,eg=eh.c$,ej=eh.wv;function eb({contextMenuData:{objectId:e,position:t},onClose:s}){let[l,a]=r.useState(0),o=t.left,c=t.top+l>window.innerHeight?t.top-l:t.top,{canSelectInApp:d,selectInApp:f}=r.useContext(S.H$),x=r.useRef(null);(0,eu.ww)(x,s);let m=(0,i.md)(p.Cc).getObject(e),g=m instanceof ex.R?m:null,j=m instanceof ef.E?m:null,[b,v]=(0,i.fp)(h.Oz),k=(0,i.Xr)(R);if(null==m)return null;let y=e=>()=>{e(),s()},C=m.children.length>0,w=(()=>{if(d?.(m))return y(()=>f(m))})(),I=e=>y(()=>M.glU.triggerAction(e,{guid:m.id})),N=b?.object.id===m.id;return(0,n.jsx)(em,{style:{...u.sx.fixed.$,left:o,top:c},dropdownRef:e=>{e&&a(e.clientHeight)},children:(0,n.jsxs)("div",{ref:x,children:[w&&(0,n.jsx)(eg,{onClick:w,children:"Jump to node"}),C&&(0,n.jsx)(eg,{onClick:y(()=>k({type:"expandDescendants",objectId:e})),children:"Expand descendants"}),C&&(0,n.jsx)(eg,{onClick:y(()=>k({type:"collapseDescendants",objectId:e})),children:"Collapse descendants"}),(w||C)&&(0,n.jsx)(ej,{}),N&&(0,n.jsx)(eg,{onClick:y(()=>v({type:"clear"})),children:"Stop diffing against this node"}),(!N||b?.type!==h.Lp.Layer)&&(0,n.jsx)(eg,{onClick:y(()=>v({type:"start",diffType:h.Lp.Layer,id:e})),children:"Layer diff against this node"}),(!N||b?.type!==h.Lp.Tree)&&(0,n.jsx)(eg,{onClick:y(()=>v({type:"start",diffType:h.Lp.Tree,id:e})),children:"Tree diff against this node"}),g&&(0,n.jsx)(ej,{}),g&&(0,n.jsx)(eg,{onClick:y(()=>{let e=JSON.stringify(g.nodeChange,null,2);navigator.clipboard.writeText(e)}),children:"Copy NodeChange JSON"}),j&&"DOCUMENT"!==j.type&&"CANVAS"!==j.type&&(0,n.jsx)(eg,{onClick:I("debug-print-as-test-code"),children:(0,ep.tx)("fullscreen_actions.debug-print-as-test-code")}),j&&"VECTOR"===j.type&&(0,n.jsx)(eg,{onClick:I("debug-print-vector-network-as-test-code"),children:(0,ep.tx)("fullscreen_actions.debug-print-vector-network-as-test-code")})]})})}var ev=s(62084);let ek=r.memo(function({diffType:e,id:t,primaryId:s,secondaryId:l,leftBadges:i,indent:a,index:o,isExpanded:c,isLeaf:d,isSelected:u,isSelectedSecondary:h,memoryFraction:p,rightBadges:f,name:x,style:m,select:g,toggle:j,showContextMenu:b}){let v=r.useCallback(e=>{e.preventDefault(),b({objectId:t,position:{left:e.clientX,top:e.clientY}})},[t,b]);return(0,n.jsxs)(ev.Z,{changeType:e,indent:a,isExpanded:c,isLeaf:d,isSelected:u,isSelectedSecondary:h,keyboardNavigationPath:[o],onContextMenu:v,onMouseEnter:()=>{M.Ez5&&M.Ez5.editorState().figmaScopeHighlightedNode.set(t)},onMouseLeave:()=>{M.Ez5&&M.Ez5.editorState().figmaScopeHighlightedNode.set("")},select:()=>g(t),style:m,toggleExpanded:e=>j(t,e),children:[(0,n.jsx)(ec.IV,{badges:i}),(0,n.jsx)(ed.nK,{id:s}),l&&(0,n.jsx)(ed.nK,{id:l,secondary:!0}),(0,n.jsx)("div",{title:x,className:T.s.ellipsis.noWrap.overflowHidden.$,children:x}),(0,n.jsx)(P.M,{}),(0,n.jsx)(ec.IV,{badges:f}),null!=p&&(0,n.jsxs)("span",{className:T.s.colorTextSecondary.$,title:"Node memory usage",children:[(100*p).toFixed(3),"%"]})]})});function ey({style:e,data:{displayedObjects:t,selectedId:s,selectedIds:r,...l},index:i}){let a=t[i],o=(0,_.zN)(e);return(0,n.jsx)(ek,{...a,...l,isSelected:s===a.id,isSelectedSecondary:!!a&&r.includes(a.id),style:o,index:i})}let eC=[];function eS({appSelection:e}){let t=(0,i.md)(ew),[s,l]=(0,i.fp)(S.AJ),a=(0,_.k9)(()=>e?.guids??eC,[e?.guids]),[o,c]=r.useState(null),d=r.useRef(null);r.useEffect(()=>{let e=t.findIndex(e=>e.id===s);e>=0&&d.current?.scrollToItem(e,"smart")},[t,s]);let u=(0,i.Xr)(R);r.useEffect(()=>{u({type:"expandAncestors",objectId:s})},[u,s]);let h=r.useCallback((e,t)=>{u({type:"toggleExpanded",objectId:e,toggleSubtree:t})},[u]),p=(0,i.md)(ee);return 0===t.length?(0,n.jsx)("div",{children:p??"Empty Scene"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.A,{disableWidth:!0,children:({height:e})=>(0,n.jsx)(E.Y1,{itemSize:18,itemCount:t.length,height:e,ref:d,itemData:{displayedObjects:t,selectedId:s,selectedIds:a,select:l,toggle:h,showContextMenu:c},width:"100%",children:ey})}),o&&(0,n.jsx)(eb,{contextMenuData:o,onClose:()=>{c(null)}})]})}let ew=(0,i.eU)(e=>{let t=e(z),s=e(p.Cc);return(e(eI)??e(eN)).map(e=>({...e,rightBadges:[...e.rightBadges,...t.has(e.id)?[{type:"bookmark",value:"Bookmarked"}]:[],...s.getAdditionalBadges?.(e.id)||[]]}))}),eI=(0,i.eU)(e=>{let t=e(Z);return t?t.map(e=>({...e.displayProperties,diffType:void 0,id:e.id,indent:0,isExpanded:!1,isLeaf:!0})):null}),eN=(0,i.eU)(e=>{let t=e(p.Cc).rootObjects,s=e(h.sg),n=e(R),r=e(en),l=(()=>{switch(s.type){case h.Lp.Tree:return[s.object];case h.Lp.Full:return s.resource.rootObjects;default:return[]}})(),i={sortFn:r,expandedIds:n};return F()(t,e=>{if(!e)return[];if(0===l.length)return eE(e,0,i);let t=eM(e,l);return t?eA(e,t,0,i):function e(t,s,n,r){let l=t.id,i=t.children,a=0===i.length,o=!!r.expandedIds[l],c=!1,d=F()(i,t=>{let l=(()=>{let l=eM(t,s);if(l)return eA(t,l,n+1,r);let i=s.filter(e=>e.someAncestor(e=>e.id===t.id,{includeSelf:!0}));return i.length>0?e(t,i,n+1,r):eE(t,n+1,r)})();return c=c||l[0]?.diffType!=null,l}),u={...t.displayProperties,diffType:c?"CHILD_MODIFIED":void 0,id:l,indent:n,isExpanded:o,isLeaf:a};return o?[u,...d]:[u]}(e,l,0,i)})});function eE(e,t,s){let n=e.id,r=e.children,l=0===r.length,i=!!s.expandedIds[n],a={...e.displayProperties,diffType:void 0,id:n,indent:t,isExpanded:i,isLeaf:l};return i?[a,...F()(e_(r,s.sortFn),e=>eE(e,t+1,s))]:[a]}function eA(e,t,s,n){let r=e??t;if(!r)throw Error("Diffing two nothings");if(e&&t&&e.id!==t.id)throw Error("Diffing nodes with mismatched keys");let l=r.id,i=e_(e?.children??[],n.sortFn),a=e_(t?.children??[],n.sortFn),o=(0,A.TR)(i,a,e=>e.id),c=!1,d=F()(o,({left:e,right:t})=>{let r=eA(e,t,s+1,n);return c=c||r[0]?.diffType!=null,r}),u=(0,h.wc)(e,t,c),p=e?.displayProperties.name,f=t?.displayProperties.name,x=null!=p&&null!=f&&p!==f?`${p} <=> ${f}`:r.displayProperties.name,m=!!n.expandedIds[l],g={...r.displayProperties,diffType:u,id:l,indent:s,isExpanded:m,isLeaf:0===o.length,name:x};return m?[g,...d]:[g]}function eM(e,t){return t.find(t=>t.id===e.id)}function e_(e,t){return e.slice().sort(t)}var eD=s(307829),eF=s(420680),eT=s(119805);s(120440);var eP=s(878604),e$=s(268389),eO=s(162954),ez=s(208754),eB=s(760238),eU=s(216940),eL=s(927287),eR=s(25414),eH=s(261990),eX=s(602755);function eG(e){let{bookmarks:t,deleteBookmark:s,moveBookmarkDown:l,moveBookmarkUp:i,renameBookmark:a,updateBookmarkId:o}=B();return(0,n.jsx)(eP.bL,{defaultPosition:{x:window.innerWidth/2,y:window.innerHeight/2},onClose:e.onClose,width:400,children:(0,n.jsxs)(e$.vo,{children:[(0,n.jsx)(e$.Y9,{children:(0,n.jsx)(e$.hE,{children:"FigmaScope Bookmarks"})}),(0,n.jsx)(e$.nB,{children:(0,n.jsxs)(eO.bL,{className:"xrvj5dj x1nfngrj",children:[0===t.length&&(0,n.jsx)("div",{className:"x6s0dn4 x78zum5 xpyat2d xl56j7k",children:"No bookmarks"}),t.length>0&&(0,n.jsxs)(ez.fI,{className:"xrvj5dj xuhvigx xg2d0mh",children:[(0,n.jsx)(eB.fh,{children:"Name"}),(0,n.jsx)(eB.fh,{children:"ID"})]}),t.map((e,c)=>(0,r.createElement)(ez.fI,{className:"xrvj5dj xuhvigx xg2d0mh",key:c},(0,n.jsx)(eB.fh,{children:(0,n.jsx)(eU.p,{id:`edit-bookmark-name-${c}`,value:e.name,onChange:e=>a(c,e)})}),(0,n.jsx)(eB.fh,{children:(0,n.jsx)(eU.p,{id:`edit-bookmark-id-${c}`,value:e.id,onChange:e=>o(c,e)})}),(0,n.jsx)(eB.fh,{children:(0,n.jsxs)(eL.e,{"aria-label":`Bookmark actions for ${e.name}`,children:[(0,n.jsx)(eF.K,{"aria-label":"Delete bookmark",onClick:()=>s(c),children:(0,n.jsx)(eR.i,{})}),(0,n.jsx)(eF.K,{"aria-label":"Move bookmark up",disabled:0===c,onClick:()=>i(c),children:(0,n.jsx)(eH.t,{})}),(0,n.jsx)(eF.K,{"aria-label":"Move bookmark down",disabled:c===t.length-1,onClick:()=>l(c),children:(0,n.jsx)(eX.O,{})})]})})))]})})]})})}function eY(){let[e,t]=(0,i.fp)(S.AJ),s=(0,i.md)(S.gg),{getTriggerProps:l,manager:a}=eD.b(),{addBookmark:o,bookmarks:c}=B(),[d,u]=r.useState(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(eD.bL,{manager:a,children:[(0,n.jsx)("div",{className:"xrybvsa",children:(0,n.jsx)(eF.K,{...l(),"aria-label":"bookmarks",children:(0,n.jsx)(eT.j,{})})}),(0,n.jsxs)(eD.mc,{children:[(0,n.jsxs)(eD.YJ,{title:(0,n.jsx)(eD.r1,{children:"Bookmark settings"}),children:[(0,n.jsx)(eD.q7,{onClick:()=>{let t=s?.displayProperties.name??"Bookmark";o(e,`${t} - ${e}`)},children:"Add bookmark"}),(0,n.jsx)(eD.q7,{onClick:()=>{u(!0)},children:"Manage bookmarks"})]}),c.length?(0,n.jsx)(eD.YJ,{title:(0,n.jsx)(eD.r1,{children:"Bookmark list"}),children:c.map((e,s)=>(0,n.jsx)(eD.q7,{onClick:()=>{t(e.id)},children:e.name},s))}):null]})]}),d&&(0,n.jsx)(eG,{onClose:()=>u(!1)})]})}var eK=s(511570),eV=s.n(eK),eW=s(150062),eJ=s(848561);function eq({searchRef:e}){let t=(0,i.Xr)(S.AJ),s=(0,i.md)(q),l=(0,i.md)(Q),[a,o]=r.useState(!1),c=(0,i.md)(J)!==w.Y6.Filter&&a,d=r.useRef(null);(0,eu.ww)(d,()=>o(!1));let u=r.useCallback(e=>{o(!1),t(e.object.id)},[o,t]);return(0,n.jsxs)(eJ.dP,{className:T.s.flex1.$,ref:d,allowVim:!0,children:[(0,n.jsx)(eQ,{searchRef:e,setShowSearchResults:o}),c&&(s?(0,n.jsx)(e0,{searchResults:s,selectResult:u}):l?(0,n.jsx)(e1,{text:l}):null)]})}function eQ({searchRef:e,setShowSearchResults:t}){let s=(0,i.md)(J),l=function(){let e=(0,i.md)(p.Cc),t=(0,i.Xr)(Y),s=(0,i.Xr)(K),n=(0,i.Xr)(V),l=r.useRef(0),a=r.useMemo(()=>(0,H.s)(r=>{let i=++l.current;n(!0);let a=new TaskController({priority:"user-visible"});scheduler.postTask(()=>n(!0),{signal:a.signal,delay:300}).catch(()=>{});let o=e.getObject(r);o&&t({status:"searching",results:[{object:o,matches:[{value:r,property:"id",isExact:!0}]}]}),e.getSearch(s).then(e=>e.searchWithText(r)).then(e=>{a.abort(),i===l.current&&t({status:"success",results:e})}).catch(e=>{console.error(e),a.abort(),i===l.current&&t({status:"error",error:e})})},200),[e,s,t,n]);return r.useCallback(e=>0===e.length?t({status:"initial"}):a(e),[a,t])}(),{setKeyboardNavigationElement:a}=(0,eJ.M3)({path:[0,0],id:"input"});return(0,n.jsx)("input",{ref:t=>{a(t),e.current=t},type:"text",placeholder:s,className:"search_bar--searchBar--qnpUm",onChange:e=>l(e.target.value),onFocus:()=>t(!0)})}function eZ({children:e}){return(0,n.jsx)("div",{className:T.s.absolute.zIndexModal.colorBg.b1.colorBorder.mt2.overflowAuto.$,style:{maxHeight:450,minWidth:500,boxShadow:"0px 2px 14px var(--color-shadow, rgba(0, 0, 0, 0.15))"},children:e})}function e0({searchResults:e,selectResult:t}){return(0,n.jsx)(eZ,{children:e.map((e,s)=>(0,n.jsx)(e5,{result:e,index:s,onClick:()=>t(e)},e.object.id))})}function e1({text:e}){return(0,n.jsx)(eZ,{children:(Array.isArray(e)?e:[e]).map((e,t)=>(0,n.jsx)("div",{className:T.s.colorBg.colorTextSecondary.px8.py4.$,children:e},t))})}function e5({result:e,index:t,onClick:s}){let{object:l,matches:i}=e,{displayProperties:a}=l,{setKeyboardNavigationElement:o,keyboardNavigationItem:c,isFauxFocused:d}=(0,eJ.M3)({path:[1,t],id:l.id});return r.useEffect(()=>{c&&0===t&&c.fauxFocus()},[c,t]),(0,n.jsx)("button",{ref:o,className:eV()(T.s.block.wFull.px4.py8.colorText.flex.itemsCenter.alignLeft.$,"search_bar--searchResult--0iOvc",d&&"search_bar--fauxFocus--BYHwu"),onClick:s,children:(0,n.jsxs)(P.Y,{spacing:4,children:[(0,n.jsx)(ec.IV,{badges:a.leftBadges}),(0,n.jsx)(ed.nK,{id:l.displayProperties.primaryId}),(0,n.jsx)(eW.R,{className:T.s.overflowHidden.$,text:a.name}),(0,n.jsx)(P.M,{}),i.filter(({property:e})=>!["id","guid","name","type","phase"].includes(e)).map(({property:e,value:t},s)=>(0,n.jsxs)(P.Y,{spacing:4,width:"hug-contents",children:[(0,n.jsxs)("div",{children:[e,":"]}),(0,n.jsx)("div",{children:t})]},s))]})})}var e7=s(652539);function e2({children:e}){return(0,n.jsx)("div",{className:T.s.colorBorder.px8.py4.bb1.bSolid.$,children:(0,n.jsx)(P.Y,{children:e})})}function e6(e){let t={className:"toolbar_components--iconButton--1-XNe",children:(0,n.jsx)(e7.B,{svg:e.svg}),title:e.label,"aria-label":e.label};return"href"in e?(0,n.jsx)("a",{...t,href:e.href,target:"blank"}):(0,n.jsx)("button",{...t,onClick:e.onClick,disabled:e.disabled})}var e4=s(129503),e9=s(718668);function e8({searchRef:e}){let[t,s]=(0,i.fp)(S.jI),[l,o]=(0,i.fp)(S.JN),c=!!r.useContext(S.H$).selectInApp,[d,u]=(0,i.fp)(J),[h,p]=(0,i.fp)(S.bA),[f,x]=(0,i.fp)(et),m=(0,i.md)(es);return(0,n.jsxs)(e2,{children:[(0,n.jsx)(eq,{searchRef:e}),(0,n.jsxs)("select",{name:"filter-or-search",title:"Determines whether the text box searches or filters",onChange:e=>{u(e.target.value)},defaultValue:d,children:[(0,n.jsx)("option",{value:w.Y6.Search,children:"Search"}),(0,n.jsx)("option",{value:w.Y6.Filter,children:"Filter"})]}),(0,n.jsx)("select",{name:"sort",title:"Sets the left panel sort order",onChange:e=>{let t=e.target.value;a.az.trackDefinedEvent("figmascope.sort_order_change",{order:function(e){switch(e){case w.hX.Position:return"position";case w.hX.Name:return"name";case w.hX.Memory:return"memory";case w.hX.NodeId:return"node_id"}}(t)}),x(t)},defaultValue:f,children:m.map(e=>(0,n.jsxs)("option",{value:e,children:["Sort by ",e]},e))}),c&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{name:"follow-selection",type:"checkbox",checked:h,onChange:e=>p(e.target.checked)}),(0,n.jsx)("label",{htmlFor:"follow-selection",children:"Follow"})]}),(0,n.jsx)(e6,{label:"Select Previous",onClick:()=>{s(),a.az.trackDefinedEvent("figmascope.select_prev_next",{direction:"prev",source:"button"})},disabled:!t,svg:e4.A}),(0,n.jsx)(e6,{label:"Select Next",onClick:()=>{o(),a.az.trackDefinedEvent("figmascope.select_prev_next",{direction:"next",source:"button"})},disabled:!l,svg:e9.A}),(0,n.jsx)(eY,{})]})}var e3=s(815701),te=s(577693),tt=s(555013),ts=s(472207),tn=s(380980),tr=s(458609),tl=s(619883),ti=s(821527);function ta({selectedObject:e,diffObject:t,onClose:s}){let r=(0,i.md)(k),[l,a]=(0,i.fp)(h.Oz);return(0,n.jsxs)(e2,{children:[e?l&&t?(0,n.jsx)(td,{selectedObject:e,diffObject:t,diffState:l,setDiffState:a}):(0,n.jsx)(tc,{object:e}):t?(0,n.jsx)(tc,{object:t}):(0,n.jsx)(P.M,{}),r&&(0,n.jsx)(tu,{}),(0,n.jsx)(e6,{label:"Help",href:ts.e,svg:tn.A}),s&&(0,n.jsx)(e6,{label:"Close FigmaScope",onClick:s,svg:ti.A})]})}let to=T.s.flex1.ml10.my4.$;function tc({object:e}){return(0,n.jsx)("div",{className:to,children:(0,n.jsx)("span",{className:T.s.fontSemiBold.$,children:e.displayProperties.longName})})}function td({selectedObject:e,diffObject:t,diffState:s,setDiffState:r}){let l=(0,i.Xr)(S.AJ);return(0,n.jsxs)("div",{className:T.s.flex1.ml10.my4.$,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:T.s.colorTextSecondary.$,children:"Diffing "}),(0,n.jsx)("span",{className:T.s.fontSemiBold.$,children:e.displayProperties.longName}),(0,n.jsx)("span",{className:T.s.colorTextSecondary.$,children:" against "}),(0,n.jsx)("span",{className:T.s.fontSemiBold.$,children:t.displayProperties.longName})]}),s&&(0,n.jsx)("div",{className:T.s.colorTextSecondary.mt8.$,children:(0,n.jsxs)(P.Y,{spacing:8,width:"hug-contents",height:"hug-contents",verticalAlignItems:"start",children:[(0,n.jsxs)("span",{children:["Snapshot of"," ",(0,n.jsx)(tt.CY,{onClick:()=>l(s.object.id),className:T.s.colorTextFigjam.fontSemiBold.$,trusted:!0,children:s.object.displayProperties.name}),s.type===h.Lp.Tree&&" and full subtree"," was taken at"," ",s.time.toLocaleTimeString("en-US")]}),(0,n.jsx)(tt.CY,{onClick:()=>r({type:"refresh"}),className:T.s.colorTextDesign.$,trusted:!0,children:"Refresh"}),(0,n.jsx)(tt.CY,{onClick:()=>r({type:"clear"}),className:T.s.colorTextDanger.$,trusted:!0,children:"Finish"})]})})]})}function tu(){let[e,t]=(0,i.fp)(y),s=e.status===d.r.LOADING;return r.useEffect(()=>{t()},[t]),(0,n.jsx)(e6,{label:s?"Fetching scene graph validation failures":"Refetch scenegraph validation failures",onClick:t,svg:s?tr.A:tl.A})}var th=s(171660);function tp({children:e}){return(0,n.jsx)("div",{className:T.s.hFull.$,children:(0,n.jsxs)(P.Y,{direction:"vertical",width:"fill-parent",height:"fill-parent",padding:0,spacing:0,children:[(0,n.jsx)(tf,{}),e]})})}function tf(){let{name:e,metadata:t}=(0,i.md)(p.Cc);return(0,n.jsxs)(P.Y,{direction:"horizontal",width:"fill-parent",height:32,padding:8,spacing:32,backgroundColor:"toolbar",children:[e&&(0,n.jsx)(th.E,{fontWeight:"bold",color:"toolbar",children:e}),t&&Object.entries(t).map(([e,t])=>t&&(0,n.jsxs)("span",{children:[(0,n.jsxs)(th.E,{color:"toolbar-secondary",children:[e,": "]}),(0,n.jsx)(th.E,{color:"toolbar",fontFamily:"monospace",fontWeight:"bold",children:t})]},e))]})}var tx=s(753639);let tm=r.memo(function({embedded:e=!1,emptyStateContent:t,onClose:s,appSelection:r,setAppSelection:l}){let a=(0,i.md)(p.lu);switch(a.status){case d.r.INIT:return t??(0,n.jsx)(I.zG,{});case d.r.LOADING:return(0,n.jsx)(I.zG,{});case d.r.FAILURE:return(0,n.jsx)(I.rf,{error:a.error});case d.r.SUCCESS:}if(0===a.value.primaryResource.rootObjects.length)return(0,n.jsx)(I.rf,{error:"No root objects found. This is likely a bug - please report in #figmascope."});let o=(0,n.jsx)(tg,{appSelection:r,setAppSelection:l,onClose:s});return e?o:(0,n.jsx)(tp,{children:o})});function tg({onClose:e,appSelection:t,setAppSelection:s}){let f=r.useRef(null),x=r.useRef(null),{windowInnerWidth:m}=(0,o.l)(),[g,j]=(0,i.fp)(tj),[b,v]=(0,i.fp)(tb),[k,C]=(0,l.i)({onDrag(e){let t=e.clientX/m;j(`${(100*t).toFixed(2)}%`)}}),[w,I]=(0,l.i)({onDrag(e){let t=x.current;if(!t)return;let s=(e.clientX-t.getBoundingClientRect().left)/t.clientWidth;v(`${(100*s).toFixed(2)}%`)}}),N=(0,i.Xr)(S.jI),E=(0,i.Xr)(S.JN),A=r.useCallback(e=>{let t=f.current;document.activeElement!==t&&(e.keyCode===c.Uz.FORWARD_SLASH&&t?(t.focus(),e.preventDefault()):e.keyCode===c.Uz.BRACKET_LEFT?(a.az.trackDefinedEvent("figmascope.select_prev_next",{direction:"prev",source:"keyboard"}),N()):e.keyCode===c.Uz.BRACKET_RIGHT&&(a.az.trackDefinedEvent("figmascope.select_prev_next",{direction:"next",source:"keyboard"}),E()))},[N,E]),M=(0,i.md)(p.Cc);window.figmaScope=M,window.figmaScopeScene=M,function(e){let[t,s]=(0,i.fp)(y);t.status===d.r.SUCCESS&&e?.setSceneGraphValidationInfo?.(t.value),(0,r.useEffect)(()=>{s()},[s])}(M);let _=(0,i.md)(S.AJ),D=(0,i.md)(S.gg),F=(0,i.md)(h.tH);return(0,n.jsx)(S.q,{appSelection:t,setAppSelection:s,children:(0,n.jsxs)("div",{className:tx.zr,style:u.sx.if(k||w,{cursor:"ew-resize"}).$,onKeyDown:A,children:[(0,n.jsxs)("div",{className:tx.Pd,style:{width:g},children:[(0,n.jsx)(e8,{searchRef:f}),(0,n.jsxs)(e3.o,{className:tx._H,children:[(0,n.jsx)("div",{...C({style:{position:"absolute",top:0,bottom:0,right:"-3px",width:"5px",gridArea:"center",cursor:"ew-resize",zIndex:9}})}),(0,n.jsx)(eS,{appSelection:t})]})]}),(0,n.jsxs)("div",{className:tx.io,children:[(0,n.jsx)(ta,{selectedObject:D,diffObject:F,onClose:e}),(D||F)&&(0,n.jsxs)("div",{className:tx._t,ref:x,children:[(0,n.jsxs)(e3.o,{className:tx.S3,style:{width:b},children:[(0,n.jsx)("div",{...I({style:{position:"absolute",top:0,bottom:0,right:"-3px",width:"5px",gridArea:"center",cursor:"ew-resize",zIndex:9}})}),(0,n.jsx)(te.P,{panel:"middle",items:D?.rawProperties,diffItems:F?.rawProperties,extraItems:void 0},_)]}),(0,n.jsx)(e3.o,{className:tx.xK,children:(0,n.jsx)(te.P,{panel:"right",items:D?.computedProperties,diffItems:F?.computedProperties,extraItems:M.getAdditionalProperties?.(_)},_)})]})]})]})})}let tj=(0,w.Sv)("leftPanelWidth","35%"),tb=(0,w.Sv)("rightPanelWidth","50%")},129575:(e,t,s)=>{s.d(t,{KF:()=>o,YP:()=>c,di:()=>u,qD:()=>d});var n=s(716976),r=s(901164),l=s(883765),i=s(219199);if(443==s.j)var a=s(410915);function o(e,t){let s=c(e===r.lV.FIGMAKE?t:null),n=d(e===r.lV.CODE_IN_SITES?t:null),l=u(e===r.lV.FIGMAKE_IN_DESIGN?t:null);switch(e){case r.lV.FIGMAKE:return s;case r.lV.CODE_IN_SITES:return n;case r.lV.FIGMAKE_IN_DESIGN:return l;default:throw Error(`Unsupported feature type: ${e}`)}}function c(e){e&&!i.Ay.location.pathname.startsWith("/make/")&&(0,l.sx)("chat_controller.wrong_file_type",{hookName:"useMakeChatController",expectedFileType:"make",expectedPath:"/make/",currentPath:i.Ay.location.pathname,nodeGuid:e.guid});let{chatMessages:t,setChatMessages:s}=(0,a.gO)(e),{chatMessages:o,setChatMessages:c}=(0,a.Wy)(e);return n.useMemo(()=>{let n={getMessages:()=>t,setMessages:s};return new r.F1({readingSource:n,writingSinks:[n],node:e})},[e,t,s])}function d(e){e&&!i.Ay.location.pathname.startsWith("/site/")&&(0,l.sx)("chat_controller.wrong_file_type",{hookName:"useSitesChatController",expectedFileType:"sites",expectedPath:"/site/",currentPath:i.Ay.location.pathname,nodeGuid:e.guid});let{chatMessages:t,setChatMessages:s}=(0,a.gO)(e);return n.useMemo(()=>{let n={getMessages:()=>t,setMessages:s};return new r.F1({readingSource:n,writingSinks:[n],node:e})},[e,t,s])}function u(e){e&&!i.Ay.location.pathname.startsWith("/design/")&&(0,l.sx)("chat_controller.wrong_file_type",{hookName:"useMakeInDesignChatController",expectedFileType:"design",expectedPath:"/design/",currentPath:i.Ay.location.pathname,nodeGuid:e.guid});let{chatMessages:t,setChatMessages:s}=(0,a.gO)(e);return n.useMemo(()=>{let n={getMessages:()=>t,setMessages:s};return new r.F1({readingSource:n,writingSinks:[n],node:e})},[e,t,s])}},410915:(e,t,s)=>{s.d(t,{HL:()=>f,Wy:()=>p,gO:()=>u});var n=s(716976),r=s(967325),l=s(795033),i=s(106170),a=s(835307),o=s(252285);let c="null-hash",d=(0,o.H)({hash:c,messages:[]});function u(e){let t=(0,a.Fk)((e,t)=>t?.chatMessagesHash??c,e),s=e?.guid||"",[r,o]=(0,l.fp)(d(s)),u=n.useMemo(()=>e&&r.hash!==c,[r.hash,e]);n.useEffect(()=>{e&&t&&t!==r.hash&&o({hash:t,messages:e.chatMessages_DEPRECATED||[]})},[e,t,r.hash,o]);let h=n.useCallback(t=>{u&&e&&(0,i.r)(()=>e.chatMessages_DEPRECATED=t)},[u,e]);return{chatMessages:r.messages,setChatMessages:h}}let h=(0,o.H)({threadId:null,messages:[]});function p(e,t){let[s,r]=(0,l.fp)(h(e?.guid||"")),i=n.useCallback(e=>{r({threadId:s.threadId,messages:e})},[r,s.threadId]);return{chatMessages:s.messages,setChatMessages:i}}function f(e){let t=e.getMessages();return n.useMemo(()=>(0,r.Qf)(t),[t])}},261990:(e,t,s)=>{s.d(t,{t:()=>r});var n=s(104076);let r=(0,s(716976).memo)(function(e){return(0,n.jsx)("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e,children:(0,n.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M7.646 6.404a.5.5 0 0 1 .707 0l2.122 2.121a.5.5 0 0 1-.708.707L8 7.465 6.232 9.232a.5.5 0 0 1-.707-.707z"})})})},25414:(e,t,s)=>{s.d(t,{i:()=>i});var n=s(104076),r=s(716976),l=s(933135);let i=(0,r.memo)(function(e){return(0,l.O)()?(0,n.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,n.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M6.5 7a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1h-.039l-.08 1H17a.5.5 0 0 1 0 1h-.7l-.455 5.62A1.5 1.5 0 0 1 14.35 18h-4.7a1.5 1.5 0 0 1-1.495-1.38L7.7 11H7a.5.5 0 0 1 0-1h.62l-.081-1H7.5a1 1 0 0 1-1-1zm9.494 1h.506V7h-9v1zm-.536 1H8.542l.61 7.54a.5.5 0 0 0 .498.46h4.7a.5.5 0 0 0 .499-.46zM11.5 11.5a.5.5 0 0 0-1 0v3a.5.5 0 0 0 1 0zm2 0a.5.5 0 0 0-1 0v3a.5.5 0 0 0 1 0z",clipRule:"evenodd"})}):(0,n.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,n.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M7 6a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1h.039l.08 1H6.5a.5.5 0 0 0 0 1h.7l.455 5.62A1.5 1.5 0 0 0 9.15 18h4.7a1.5 1.5 0 0 0 1.495-1.38L15.8 11h.7a.5.5 0 0 0 0-1h-.62l.081-1H16a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1zm8.505 2H7V7h9v1zM8.042 9h6.916l-.61 7.54a.5.5 0 0 1-.498.46h-4.7a.5.5 0 0 1-.499-.46zm2.458 2a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0v-3a.5.5 0 0 1 .5-.5m2 0a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0v-3a.5.5 0 0 1 .5-.5",clipRule:"evenodd"})})})},967325:(e,t,s)=>{s.d(t,{EY:()=>o,Qf:()=>i,gG:()=>a});var n=s(901164),r=s(266808),l=s(621592);function i(e){let t=e?.filter(e=>e.type!==r.K$p.TOOL_MESSAGE);return t?t.reduce((e,t)=>{let s=t.type===r.K$p.ASSISTANT_MESSAGE,i=t.toolCalls.length>0,a=0===(0,n.H5)(t.textContent||"").plainText.length;if(s&&i&&a){let s=e[e.length-1];return s?.type===r.K$p.ASSISTANT_MESSAGE&&(s.toolCalls=l([...s.toolCalls,...t.toolCalls],"toolCallId")),e}return[...e,t]},[]):[]}function a(e){let{hidden:t,errors:s}=e;return!!t&&!!s&&s.length>0}function o(e){let t=e.slice().reverse().find(e=>e.type===r.K$p.USER_MESSAGE);return t?t.id:null}}}]);

//# debugId=85d6330c-fe1a-5d6a-8a86-b3264ada6944

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/9b612e4ffabe54d2cee9549c3a639349786d6b3b/297-6f2a3895252980be.min.js.map