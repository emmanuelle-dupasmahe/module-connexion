"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="48ce5210-6698-5d2e-97b6-60b46fd1640b")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[2677],{180390:(e,t,a)=>{a.d(t,{A:()=>s});let s='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#000" fill-opacity=".8" fill-rule="evenodd" stroke="none" d="m17.122 11.64-.012-.003-6.666-1.9 4.91 4.91c.195-.095.414-.147.646-.147.828 0 1.5.672 1.5 1.5 0 .828-.672 1.5-1.5 1.5-.828 0-1.5-.672-1.5-1.5 0-.232.053-.45.146-.647L9.743 10.45l1.832 6.39.01.037.008.037C12.015 18.961 13.829 20.5 16 20.5c.494 0 .968-.08 1.411-.225l.585-.193.435.435 1.847 1.847 2.122-2.121-1.865-1.865-.43-.43.184-.58c.137-.43.211-.89.211-1.368 0-2.093-1.43-3.854-3.366-4.356l-.012-.003zm5.985 7.895.707.708-.707.707-2.122 2.121-.707.707-.707-.707-1.847-1.847c-.542.18-1.122.276-1.724.276-2.655 0-4.871-1.882-5.387-4.384L8.325 9.132 8 8l1.133.323 8.252 2.353C19.752 11.29 21.5 13.44 21.5 16c0 .582-.09 1.144-.258 1.67z"/></svg>'},302396:(e,t,a)=>{a.d(t,{A:()=>s});let s='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M2 3h5v2H2zM1 5V2h7v3h7v9H1zm7 1H2v7h12V6z"/></svg>'},731272:(e,t,a)=>{a.d(t,{A:()=>s});let s='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M13.5 9h1V7.5c0-.828.672-1.5 1.5-1.5.828 0 1.5.672 1.5 1.5V9H23v15H9V9zm5-1H24v17H8V8h5.5v-.5C13.5 6.12 14.62 5 16 5c1.38 0 2.5 1.12 2.5 2.5zM16 12.5c-1.105 0-2 .895-2 2 0 1.105.895 2 2 2 1.105 0 2-.895 2-2 0-1.105-.895-2-2-2m-3 2c0-1.657 1.343-3 3-3 1.657 0 3 1.343 3 3 0 1.212-.718 2.255-1.752 2.729 1.317.503 2.252 1.778 2.252 3.271v.5h-1v-.5c0-1.38-1.12-2.5-2.5-2.5-1.38 0-2.5 1.12-2.5 2.5v.5h-1v-.5c0-1.493.935-2.768 2.252-3.271C13.718 16.755 13 15.712 13 14.5"/></svg>'},858457:(e,t,a)=>{a.d(t,{A:()=>s});let s='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><path fill="#000" fill-opacity=".9" fill-rule="evenodd" stroke="none" d="M14 10.443c0-.35.349-.59.676-.468l2 .75c.195.073.324.26.324.468v3.614c0 .208-.13.395-.324.468l-2 .75c-.327.123-.676-.119-.676-.468zm4 3.057v1.307c0 .625-.388 1.185-.973 1.405l-2 .75c-.98.367-2.027-.358-2.027-1.405v-5.114c0-1.047 1.046-1.772 2.027-1.404l1.973.74V9c0-4.418-3.582-8-8-8-4.418 0-8 3.582-8 8v.778l1.973-.74C3.953 8.671 5 9.396 5 10.443v5.114c0 1.047-1.046 1.772-2.027 1.405l-2-.75c-.585-.22-.973-.78-.973-1.405V9c0-4.97 4.03-9 9-9 4.97 0 9 4.03 9 9zm-17 0v-2.307c0-.208.13-.395.324-.468l2-.75c.327-.123.676.119.676.468v5.114c0 .35-.349.59-.676.468l-2-.75c-.195-.073-.324-.26-.324-.468z"/></svg>'},690182:(e,t,a)=>{a.d(t,{A:()=>s});let s='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#000" fill-opacity=".8" fill-rule="evenodd" stroke="none" d="M15.373 22h1.258c.28-.32.616-.597.995-.819 1.479-.862 4.005-.909 5.386.109H24.5v-9.2c0 0-.797-2.25-4.42-2.25-1.875 0-2.902.602-3.456 1.184-.389.407-.545.804-.6.976h-.049c-.054-.172-.21-.57-.599-.976-.554-.582-1.581-1.184-3.456-1.184-3.623 0-4.42 2.25-4.42 2.25v9.19h1.488c1.382-1.019 3.91-.97 5.388-.105.38.223.717.502.997.825m1.127-9.711v8.457q.293-.236.622-.428c.927-.541 2.115-.796 3.241-.787 1.006.008 2.081.227 2.952.759h.185v-7.973l-.03-.05c-.086-.138-.236-.339-.474-.545-.461-.397-1.33-.882-2.916-.882-1.586 0-2.34.483-2.694.835-.189.186-.296.367-.354.49-.029.061-.045.108-.052.131l-.005.017.001-.006.002-.008v-.005l.001-.002v-.002l-.005-.001zm-1 0h-.475l-.005.001v.002l.001.002.001.005.002.008.001.006q.001.001-.005-.017c-.007-.023-.024-.07-.053-.131-.057-.123-.164-.303-.353-.49-.354-.352-1.108-.835-2.694-.835-1.585 0-2.455.485-2.916.882-.238.206-.388.407-.474.545l-.03.05v7.963h.185c.872-.533 1.948-.752 2.954-.759 1.128-.008 2.316.249 3.243.792q.326.191.618.426z"/></svg>'},1757:(e,t,a)=>{a.d(t,{A:()=>s});let s='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="m13 10.098.765.478 8 5 .678.424-.678.424-8 5-.765.478zm1 1.804v8.196L20.557 16z"/></svg>'},809027:(e,t,a)=>{a.d(t,{A:()=>s});let s='<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30"><path fill="#b3b3b3" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M8 14h15v1H8z"/></svg>'},97605:(e,t,a)=>{a.d(t,{A:()=>s});let s='<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30"><path fill="#b3b3b3" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M15 15v7h1v-7h7v-1h-7V7h-1v7H8v1z"/></svg>'},100203:(e,t,a)=>{a.d(t,{A:()=>s});let s='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M16.708 6.895c-1.39 0-2.518 1.127-2.518 2.518 0 1.391 1.127 2.52 2.518 2.52 1.391 0 2.52-1.129 2.52-2.52 0-1.39-1.129-2.518-2.52-2.518m-3.314 2.518c0-1.83 1.484-3.314 3.314-3.314 1.83 0 3.315 1.484 3.315 3.314 0 1.65-1.205 3.017-2.781 3.272 2.76.246 4.968 2.38 4.968 5.04v1.565H2.458v-1.565c0-2.66 2.207-4.794 4.968-5.04-1.577-.255-2.781-1.623-2.781-3.272 0-1.83 1.484-3.314 3.314-3.314 1.83 0 3.314 1.484 3.314 3.314 0 1.65-1.204 3.017-2.78 3.272 1.554.138 2.933.875 3.841 1.968.907-1.093 2.283-1.83 3.84-1.968-1.576-.255-2.78-1.623-2.78-3.272M3.253 17.725c0-2.325 2.073-4.268 4.706-4.268 2.633 0 4.706 1.943 4.706 4.268v.77H3.253zm10.207.77h7.954v-.77c0-2.325-2.072-4.268-4.706-4.268-1.63 0-3.055.75-3.897 1.876.414.71.65 1.523.65 2.392v.77zM5.44 9.412c0-1.39 1.128-2.518 2.52-2.518 1.39 0 2.518 1.127 2.518 2.518 0 1.391-1.128 2.52-2.519 2.52-1.391 0-2.519-1.129-2.519-2.52"/></svg>'},817229:(e,t,a)=>{a.d(t,{A:()=>s});let s='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><path fill="#000" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M.2 9h17.6l.2.4v.6H0v-.6zm0 0h17.6l.2.4v.6H0v-.6zM0 17h18v1H0zm0 0h18v1H0zM7 6h4v1H7zm0 0h4v1H7zm0-6h4v1H7zm0 0h4v1H7zm5 3h2.8l3 6h-1.105L14.2 4H12zM6 3H3.2l-3 6h1.105L3.8 4H6zm-6 7h1v7H0zm0 0h1v7H0zm17 0h1v7h-1zm0 0h1v7h-1zM6 0h1v7H6zm0 0h1v7H6zm5 0h1v7h-1zm0 0h1v7h-1z"/></svg>'},213788:(e,t,a)=>{a.d(t,{$P:()=>p,Dz:()=>i,E8:()=>x,G8:()=>j,Jh:()=>d,Mm:()=>c,Ms:()=>f,Q$:()=>T,QB:()=>v,VA:()=>y,Vf:()=>_,W2:()=>m,_R:()=>u,b:()=>n,gt:()=>E,hx:()=>l,jG:()=>g,o:()=>r,oE:()=>h,y3:()=>S,yH:()=>o,yl:()=>s});let s="org_upgrade_single_team_modal--modal--ksTCZ",r="org_upgrade_single_team_modal--planModalHeader--NF9Rm",i="org_upgrade_single_team_modal--planModalHeaderText--ooJle",l="org_upgrade_single_team_modal--planModalTitle--i2U18 text--fontPos24--YppUD text--_fontBase--QdLsd",n="org_upgrade_single_team_modal--closeButton--xlW3E",d="org_upgrade_single_team_modal--planModalHeaderDivider--h1IPt",o="org_upgrade_single_team_modal--planGrid--vjBAw",c="org_upgrade_single_team_modal--planGrid__vertDivided--GAHYl",m="org_upgrade_single_team_modal--seeAllFeatures--86diJ",_="org_upgrade_single_team_modal--teamPlan--K5SN-",u="org_upgrade_single_team_modal--itemList--pQSea",p="org_upgrade_single_team_modal--planItem--BQHfH",h="org_upgrade_single_team_modal--checkIcon--vhgrx",x="org_upgrade_single_team_modal--planSelectButton--CKoDi",g="org_upgrade_single_team_modal--scrollContainer--sufjZ",y="org_upgrade_single_team_modal--subtitle--nt2Dh",v="org_upgrade_single_team_modal--planNameBase--R8WKM text--fontPos16--oMC-G text--_fontBase--QdLsd",f="org_upgrade_single_team_modal--planPriceView--L7aSJ",S="org_upgrade_single_team_modal--priceRow--jzozY text--fontPos11--2LvXf text--_fontBase--QdLsd",j="org_upgrade_single_team_modal--priceFigureWithFigjam--0E8M8 text--fontPos16--oMC-G text--_fontBase--QdLsd",T="org_upgrade_single_team_modal--figmaPriceWithDevMode--k-2WW",E="org_upgrade_single_team_modal--devModeText--EKgJM"},723347:(e,t,a)=>{a.d(t,{$g:()=>c,DI:()=>o,Eh:()=>l,GK:()=>r,J1:()=>d,KV:()=>i,b:()=>s,cr:()=>h,jG:()=>m,kz:()=>_,nW:()=>p,o8:()=>u,u1:()=>n,wv:()=>x});let s="universal_upgrade_sequence--closeButton--Us7fC",r="universal_upgrade_sequence--modalTitle--j-zLx text--fontPos18--rYXJb text--_fontBase--QdLsd",i="universal_upgrade_sequence--modalSubtitle--ucPxW text--fontPos14--OL9Hp text--_fontBase--QdLsd",l="universal_upgrade_sequence--createTeamInput--kWzFx basic_form--labeledInputGroup--aeD6L text--fontPos14--OL9Hp text--_fontBase--QdLsd",n="universal_upgrade_sequence--spinner--CvsHJ",d="universal_upgrade_sequence--tileUpgradeButton--GxMSU",o="universal_upgrade_sequence--nextButtonSmall--tUSIb universal_upgrade_sequence--nextButton--F2XJ4",c="universal_upgrade_sequence--createTeamSection--XhWMJ",m="universal_upgrade_sequence--scrollContainer--BQFbB",_="universal_upgrade_sequence--scrollContainerTopBorder--yuAD-",u="universal_upgrade_sequence--scrollContainerBottomBorder--CwNTV",p="universal_upgrade_sequence--teamTileContainer--kS2oM org_self_serve--teamLargeTileContainer--3M0cY",h="universal_upgrade_sequence--teamTile--WZEIz org_self_serve--teamTileLarge--HawGF text--fontPos14--OL9Hp text--_fontBase--QdLsd",x="universal_upgrade_sequence--lastTeamTile--zfV5W universal_upgrade_sequence--teamTile--WZEIz org_self_serve--teamTileLarge--HawGF text--fontPos14--OL9Hp text--_fontBase--QdLsd"},468896:(e,t,a)=>{a.d(t,{$y:()=>m,Bb:()=>E,ER:()=>A,Ed:()=>g,Et:()=>r,I1:()=>x,Jo:()=>u,K6:()=>b,M7:()=>s,N5:()=>p,Nd:()=>l,O2:()=>j,Qv:()=>h,Uu:()=>o,W:()=>n,Xq:()=>y,aK:()=>d,cc:()=>f,i9:()=>c,iv:()=>v,jg:()=>T,kH:()=>N,li:()=>i,nm:()=>S,uD:()=>_});let s="org_self_serve_figjam--stepContent--PmiVT",r="org_self_serve_figjam--stepContentTeamCreation--aecM6",i="org_self_serve_figjam--menuContainer--2R9vL",l="org_self_serve_figjam--cancelMenuItem--xWgkC",n="org_self_serve_figjam--pageTitle--FnN-D",d="org_self_serve_figjam--summaryDivider--Mcrvf",o="org_self_serve_figjam--flex--zpEBd",c="org_self_serve_figjam--svgText--d64Nk org_self_serve_figjam--flex--zpEBd",m="org_self_serve_figjam--helpIcon--i-O5F",_="org_self_serve_figjam--textLink--oq58H org_self_serve_figjam--billingSubText--0-Z4w",u="org_self_serve_figjam--confirmationBox---MCFL org_self_serve_figjam--stepRect--eHVrW org_self_serve_figjam--boxBorder--AaC8L",p="org_self_serve_figjam--flexBox--wb7nK",h="org_self_serve_figjam--confirmationPageText--OPG5S text--fontPos13--xW8hS text--_fontBase--QdLsd",x="org_self_serve_figjam--confirmationCharge--V8Lpo org_self_serve_figjam--confirmationPageText--OPG5S text--fontPos13--xW8hS text--_fontBase--QdLsd",g="org_self_serve_figjam--confirmationRow--0-0Jf",y="org_self_serve_figjam--confirmationHomeButton--bokpb text--fontNeg13--7Ebf5 text--_fontBase--QdLsd text--_negText--j9g-L",v="org_self_serve_figjam--confirmationAmountDue--LoEoe",f="org_self_serve_figjam--confirmationHeading--3108k",S="org_self_serve_figjam--confirmationLoadingText--uJKaf org_self_serve_figjam--msaLabelText--HQg1L",j="org_self_serve_figjam--greenCheck--wvkO-",T="org_self_serve_figjam--confirmationPage---8XoA",E="org_self_serve_figjam--createTeamContainer--o7rw4",N="org_self_serve_figjam--teamsContainer--oOa2W",b="org_self_serve_figjam--teamCheckboxContainer--Mznj-",A="org_self_serve_figjam--selectTeamsIcon--V-xyE"},233790:(e,t,a)=>{a.r(t),a.d(t,{EduReviewPage:()=>N});var s=a(104076),r=a(716976),i=a(903927),l=a(514223),n=a(555013),d=a(614735),o=a(13543),c=a(640718),m=a(101880),_=a(186180),u=a(652539),p=a(236631),h=a(192075),x=a(239904),g=a(218662),y=a(147046),v=a(483200),f=a(935167),S=a(111297),j=a(412469),T=a(821527);let E=e=>{let t=(0,i.d4)(t=>{let a=f.Xw.loadingKeyForPayload({teamId:e});return t.loadingState[a]}),a=(0,i.d4)(t=>t.teamUserByTeamId[e]||{}),s=(0,i.wA)();r.useEffect(()=>{s(f.Xw({teamId:e}))},[s,e]);let n=t!==l.r.SUCCESS;return r.useEffect(()=>{if(!n){let e=Object.keys(a).length;s(v.Az({numWhiteboardEditors:e})),s(v.js({numDesignEditors:e}))}},[s,n,a]),n};function N({selectedView:e}){let{teamId:t}=e,a=E(t),r=(0,i.wA)(),l=()=>{r(v.Nj({teamId:t,onCloseOrComplete:e.onCloseOrComplete}))};return(0,s.jsx)(S.fu,{name:"Edu Review",properties:{teamId:t},children:(0,s.jsx)("div",{children:(0,s.jsxs)(o.O,{menu:(0,s.jsx)(d.X,{onClick:()=>{r(y.sf({view:"team",teamId:t})),e.onCloseOrComplete?.()},children:(0,s.jsx)(u.B,{svg:T.A,className:"edu_review--modalCloseX--PeJlf",dataTestId:"close-button"})}),children:[(0,s.jsx)("span",{className:e.showBreadcrumbs?void 0:"edu_review--hidden--p1Flp",children:(0,s.jsx)(g.J,{index:3})}),(0,s.jsxs)("div",{className:p.s.flex.flexColumn.itemsCenter.alignCenter.$,children:[(0,s.jsx)(_.JR,{children:(0,h.tx)("edu.almost_done_everything_look_good")}),(0,s.jsx)(n.Kz,{multiple:4}),(0,s.jsx)(m.x,{isLoading:a,children:()=>(0,s.jsx)(c.o,{children:(0,s.jsx)(x.d,{selectedView:e,onClickConfirm:l,currency:(0,j.LN)(),canSeeBillingAddressExp:!1})})})]})]})})})}},963566:(e,t,a)=>{a.d(t,{f:()=>r});var s=a(716976);function r({tableContainerRef:e}){let[t,a]=s.useState(window.innerHeight),r=()=>{a(window.innerHeight)};s.useEffect(()=>(window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}),[]);let i=e.current?.getBoundingClientRect();return Math.max(t-(i?.top||0)-49-8-56,150)}},138105:(e,t,a)=>{a.d(t,{W:()=>i});var s=a(649693),r=a(599448);function i(e,t,a){if(0===e.length&&a)return{eligibleTeamsByTeamId:{},selectedTeamIds:new Set,eligibleUsersByUserId:{[a.user.id]:{...l(a.user),recommendedSeatTypeByTeamId:{},teamIds:[]}},selectedUserSeatTypes:{[a.user.id]:a.recommended_seat_type?.key??s.ud.EXPERT}};let i=e.reduce((e,t)=>(e[t.id]={...t,eligibleUsers:new Set},e),{}),n=new Set(Object.keys(i)),d={};t.forEach(e=>{let t=e.user,a=t.id;d[a]||(d[a]={...l(t),recommendedSeatTypeByTeamId:{},teamIds:[]}),d[a].recommendedSeatTypeByTeamId[e.team_id]=e.recommended_seat_type?.key??s.Gu.VIEW,d[a].teamIds.push(e.team_id),i[e.team_id]&&i[e.team_id].eligibleUsers.add(a)});let o=(0,r.h)({eligibleTeamsByTeamId:i,selectedTeamIds:n,eligibleUsersByUserId:d,selectedUserSeatTypes:{},currentUpgradingUserId:a?.user.id});return{eligibleTeamsByTeamId:i,selectedTeamIds:n,eligibleUsersByUserId:d,selectedUserSeatTypes:o}}function l(e){return{id:e.id,email:e.email,handle:e.handle,img_url:e.img_url}}},560806:(e,t,a)=>{a.d(t,{s:()=>r});var s=a(192075);function r({eligibleUsersByUserId:e,eligibleTeamsByTeamId:t,selectedTeamIds:a,currentUpgradingUserId:r}){let i=[];return 0===a.length&&r?i.push({id:r,handle:e[r].handle,email:e[r].email,img_url:e[r].img_url,teams:"\u2014"}):Object.values(e).filter(e=>e.teamIds.some(e=>a.includes(e))).forEach(e=>{let r=e.teamIds,l=a.filter(e=>r.includes(e)).map(e=>t[e]),n=1===l.length?l[0].name:(0,s.t)("checkout.multiple_teams_label");i.push({id:e.id,handle:e.handle,email:e.email,img_url:e.img_url,teams:n})}),i}},599448:(e,t,a)=>{a.d(t,{h:()=>r});var s=a(236753);function r({eligibleTeamsByTeamId:e,selectedTeamIds:t,eligibleUsersByUserId:a,selectedUserSeatTypes:r,currentUpgradingUserId:i}){if(0===t.size&&i)return{[i]:r[i]};let l={},n={};return t.forEach(t=>{e[t].eligibleUsers.forEach(e=>{if(!l[e]){if(r[e])l[e]=r[e];else{let s=a[e];n[e]||(n[e]=[]),n[e].push(s.recommendedSeatTypeByTeamId[t])}}})}),{...l,...Object.keys(n).reduce((e,t)=>(e[t]=(0,s.Up)(n[t]),e),{})}}},975687:(e,t,a)=>{a.r(t),a.d(t,{OrgUpgradeMultiTeamModal:()=>er});var s=a(104076),r=a(716976),i=a(903927),l=a(638004),n=a(207321),d=a(755444),o=a(833805),c=a(114339),m=a(769109),_=a(1188),u=a(555013),p=a(72138),h=a(652539),x=a(236631),g=a(192075),y=a(659062),v=a(525980),f=a(147046),S=a(366535),j=a(244205),T=a(111297),E=a(205729),N=a(649693),b=a(418149),A=a(449250),w=a(412469),C=a(104836),I=a(608175),R=a(826160),k=a(434225),P=a(354174),M=a(951002),O=a(382629),D=a(423128),L=a(517796),B=a(352630),U=a(906356),V=a(454967),G=a(624258),z=a(232362),$=a(781611),F=a(944350),H=a(295253);function q({currency:e,hideModal:t,choosePlan:a,TeamIllustration:r,upsellSource:l}){let n=(0,i.wA)();return(0,s.jsxs)("div",{className:x.s.flex.flexColumn.gap8.$,style:y.sx.add({padding:"48px 56px",maxWidth:"650px"}).$,children:[(0,s.jsx)("p",{className:x.s.textHeadingLarge.$,children:(0,g.tx)("org_upgrade.multi_team.bring_your_teams_together")}),(0,s.jsx)("p",{className:x.s.textHeadingMedium.$,style:y.sx.add({fontWeight:400}).$,children:(0,g.tx)("plan_comparison.campfire.org.description")}),(0,s.jsx)(B.e6,{className:"campfire_org_upgrade_multi_team_modal--closeButton--THg83",onClick:t,children:(0,s.jsx)(D.A,{})}),(0,s.jsxs)("div",{className:x.s.flex.gap16.$,children:[(0,s.jsxs)("div",{className:x.s.flex.flexColumn.gap16.flex1.mt16.$,children:[(0,s.jsx)(K,{currency:e}),(0,s.jsxs)("div",{children:[(0,s.jsx)(B.Ih,{onClick:a,children:(0,g.tx)("plan_comparison.campfire.choose_plan")}),(0,s.jsx)("div",{className:x.s.font11.lh16.alignCenter.mt4.$,children:(0,g.tx)("plan_comparison.campfire.or_contact_sales",{contactSalesLink:(0,s.jsx)("button",{className:x.s.colorTextBrand.cursorPointer.$,onClick:()=>n(S.to({type:U.lk,data:{source:V.B.ORG_SELF_SERVE_UPGRADE_MODAL}})),children:(0,g.tx)("plan_comparison.campfire.contact_sales")})})})]}),(0,s.jsx)("div",{className:x.s.bt1.bSolid.colorBorder.$}),(0,s.jsx)(W,{upsellSource:l})]}),(0,s.jsx)("div",{className:x.s.flex.flex1.itemsCenter.justifyCenter.$,children:r})]})]})}function K({currency:e}){let t={currency:e,tier:I.Ju.ORG,renewalTerm:I.IX.YEAR,unit:I.IX.MONTH},a=(0,E.jv)({billableProductKeys:b.N_,baseQuery:t}),[r]=(0,o.Ad)(a);if(null===r.data)throw Error("Price data is null");let i=new w.vr(e);return(0,s.jsx)("div",{className:x.s.flex.flexColumn.$,children:b.N_.sort($.AG).map(e=>(0,O.uy)(r.data[e])?null:(0,s.jsxs)("div",{className:x.s.flex.justifyBetween.$,children:[(0,s.jsxs)("div",{className:x.s.flex.gap4.itemsCenter.$,children:[(0,G.BC)({type:e,size:"24",removeBackgroundColor:!0}),(0,s.jsx)("p",{className:x.s.textBodyLarge.$,children:function(e){switch(e){case N.ud.EXPERT:return(0,g.t)("nux.campfire.full_seat");case N.ud.DEVELOPER:return(0,g.t)("nux.campfire.dev_seat");case N.ud.COLLABORATOR:return(0,g.t)("nux.campfire.collab_seat");case N.ud.CONTENT:return(0,g.t)("nux.campfire.content_seat");default:(0,M.xb)(e)}}(e)})]}),(0,s.jsx)("p",{className:x.s.textBodyMedium.$,children:(0,g.tx)("nux.price_per_month",{price:(0,s.jsx)("span",{className:x.s.textBodyLargeStrong.$,children:i.formatMoney(r.data[e].amount)})})})]},e))})}function W(e){let t=e.upsellSource===H.b.CONNECTED_PROJECTS_MAXIMUM_CONNECTIONS,a=[t?(0,g.tx)("plan_comparison.campfire.org.feature.org_connected_projects",{orgConnectionsLimit:z.b[F.Ag.ORG]}):null,(0,g.tx)("plan_comparison.campfire.org.feature.unlimited_teams"),(0,g.tx)("plan_comparison.campfire.org.feature.branching"),(0,g.tx)("plan_comparison.campfire.org.feature.security"),(0,g.tx)("plan_comparison.campfire.org.feature.scim"),(0,g.tx)("plan_comparison.campfire.org.feature.customizations")].filter(Boolean);return(0,s.jsx)("div",{children:a.map((e,a)=>{let r=t&&0===a?(0,s.jsx)("span",{className:x.s.textBodyLargeStrong.$,children:e}):(0,s.jsx)("span",{children:e});return(0,s.jsxs)("div",{className:x.s.flex.$,children:[(0,s.jsx)(L.g,{className:x.s.minW24.$,style:{"--color-icon":"var(--color-icon-secondary)"}}),(0,s.jsx)("p",{className:x.s.textBodyLarge.$,children:r})]},a)})})}let Y="org_upgrade_multi_team_modal--planModalDivider--Rnmy0";var J=a(213788),Z=a(7452);let X=(0,d.ck)("50ae1752a504eea59f2a3efac6b0f2d1ed74435a"),Q=(0,d.ck)("e2148969d5a469e76c053a23b6647d487e6d64ee"),ee=(0,d.ck)("fc0fcfadcfe50c96f4dcf859aabe1952c822ae2a");function et(e){return(0,s.jsxs)("div",{className:"org_upgrade_multi_team_modal--planItem--P4LRr",children:[(0,s.jsx)(h.B,{svg:Z.A,className:"org_upgrade_multi_team_modal--checkIcon--KnZJe"}),(0,s.jsx)("p",{children:e.text})]})}function ea(e){let t=(0,i.d4)(e=>e.teams),a=(0,i.d4)(e=>(0,C._L)(e.user,e.roles,e.teams)),l=(0,i.wA)(),d=()=>{l(S.Ce())},_=(0,v.s)(),T=r.useMemo(()=>[(0,g.t)("org_upgrade.multi_team.plan_items.shared_design_libraries"),(0,g.t)("org_upgrade.multi_team.plan_items.shared_fonts_and_styles"),(0,g.t)("org_upgrade.multi_team.plan_items.centralized_billing_and_admin_controls"),(0,g.t)("org_upgrade.multi_team.plan_items.single_sign_on_sso_integrations")],[]),A=()=>{d(),l(f.sf({view:"orgSelfServe",upsellSource:e.upsellSource}))},k=e=>(0,s.jsxs)("div",{className:"org_upgrade_multi_team_modal--teamListEntry---bU9i",children:[(0,s.jsx)(R.Ro,{size:10,hideFallbackInitial:!0,entity:e,shape:"SQUARE"}),(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--teamListEntryName--aJZdJ ellipsis--ellipsis--Tjyfa",children:e.name})]},e.id),M=r.useMemo(()=>{switch(Object.keys(t).length){case 2:return 184;case 3:return 192;default:return 221}},[t]),O=J.G8,D=(0,w.wU)(),L=b.Oq.dict(e=>({currency:D.currency,billableProductKey:e,billableProductVariantKey:null,tier:I.Ju.ORG,renewalTerm:I.IX.YEAR,unit:I.IX.MONTH})),B=(0,E.SK)(L,E.Fq.UPSELL_MODALS),[U]=(0,o.Ad)(B);if(null===U.data)throw Error("Price data is null");let V=U.data,G=(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--teamIllustrationLeftSection--MLN4f",style:y.sx.if(_,y.sx.add({width:"200px"})).$,children:(0,s.jsxs)("div",{className:"org_upgrade_multi_team_modal--dynamicTeamListSection--KE5ZD",children:[(0,s.jsxs)("div",{className:"org_upgrade_multi_team_modal--teamListHeader--Eyf-F",children:[(0,s.jsx)("img",{className:"org_upgrade_multi_team_modal--placeholderOrgLogo--vYLRQ",src:ee,draggable:!1,alt:""}),(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--teamListOrgName--EKk6-",children:(0,g.tx)("org_upgrade.multi_team.acme_inc")}),(0,s.jsx)(h.B,{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M12 16.05V9h1v7.05c1.141.232 2 1.24 2 2.45 0 1.21-.859 2.218-2 2.45V23h-1v-2.05c-1.141-.232-2-1.24-2-2.45 0-1.21.859-2.218 2-2.45m2 2.45c0 .828-.672 1.5-1.5 1.5-.828 0-1.5-.672-1.5-1.5 0-.828.672-1.5 1.5-1.5.828 0 1.5.672 1.5 1.5m5 4.5h1v-7.05c1.141-.232 2-1.24 2-2.45 0-1.21-.859-2.218-2-2.45V9h-1v2.05c-1.141.232-2 1.24-2 2.45 0 1.21.859 2.218 2 2.45zm2-9.5c0-.828-.672-1.5-1.5-1.5-.828 0-1.5.672-1.5 1.5 0 .828.672 1.5 1.5 1.5.828 0 1.5-.672 1.5-1.5"/></svg>',className:"org_upgrade_multi_team_modal--multiTeamOrgUpgradeAdjustSvg--V4dem"})]}),(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--teamListDivider--A9NYP"}),(()=>{let e=[];for(var r=0;r<Math.min(4,a.length);r++){let s=t[a[r]];e.push(k(s))}return(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--teamList--rzATA",children:e})})(),(0,s.jsxs)("div",{className:_?"org_upgrade_multi_team_modal--campfireTeamIllustrationRightSection--fHW0n":"org_upgrade_multi_team_modal--teamIllustrationRightSection--irt0w",children:[(0,s.jsx)("img",{className:"org_upgrade_multi_team_modal--filesIllustration--teK60",src:Q,draggable:!1,alt:""}),(0,s.jsx)("img",{src:X,draggable:!1,alt:""})]}),_&&(0,s.jsxs)("div",{className:x.s.flex.b1.bRadius3.itemsCenter.absolute.pr4.py4.ml36.$,style:y.sx.add({top:"100%",marginTop:"15px",maxWidth:"100px"}).$,children:[(0,s.jsx)(n.s,{className:x.s.minW16.$}),(0,s.jsx)("p",{className:x.s.textBodySmallStrong.$,children:(0,g.tx)("org_upgrade.illustration.sign_in_with_sso")}),(0,s.jsx)("div",{className:x.s.absolute.mt32.$,style:y.sx.add({right:"-8px"}).$,children:(0,s.jsx)(es,{})})]})]})});return(0,s.jsx)(P.ey,{className:"org_upgrade_multi_team_modal--modal--fVO2l",hide:d,size:"fitContent",useModalViewScroll:!1,children:_?(0,s.jsx)(q,{currency:D.currency,hideModal:d,choosePlan:A,TeamIllustration:G,upsellSource:e.upsellSource}):(0,s.jsxs)(p.P,{className:"org_upgrade_multi_team_modal--scrollContainer--ZL-IQ",children:[(0,s.jsxs)("div",{className:"org_upgrade_multi_team_modal--planModalHeader--drD3M",style:{height:64,marginBottom:32},children:[(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--planModalTitle--YP3RJ text--fontPos24--YppUD text--_fontBase--QdLsd",style:{fontWeight:600},children:(0,g.tx)("org_upgrade.multi_team.bring_your_teams_together_with_the_figma_organization_plan")}),(0,s.jsx)(m.Jn,{className:"org_upgrade_multi_team_modal--closeButton--x3l-2",onClick:d,innerText:"close"})]}),(0,s.jsx)("div",{className:Y}),(0,s.jsxs)("div",{className:"org_upgrade_multi_team_modal--planDetails--Fu8GW",children:[(0,s.jsxs)("div",{className:"org_upgrade_multi_team_modal--planDetailsLeft--mBwlh",children:[(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--billingCadence--WBrj-",children:(0,g.tx)("org_upgrade.multi_team.annual_billing_only")}),(0,s.jsxs)("div",{className:J.y3,children:[(0,s.jsxs)("p",{className:J.Q$,children:[(0,g.tx)("org_upgrade.multi_team.figma"),(0,s.jsx)("div",{className:J.gt,children:(0,s.jsx)(c.G,{})})]}),(0,s.jsx)("div",{children:(0,g.tx)("org_upgrade.multi_team.billing_cost_per_month.seat_rename",{monthlyCostInDollars:(0,s.jsx)("span",{className:J.G8,children:D.formatMoney(V[N.ud.DESIGN].amount)})})})]}),(0,s.jsxs)("div",{className:J.y3,children:[(0,g.tx)("org_upgrade.multi_team.dev_mode"),(0,s.jsx)("div",{children:(0,g.tx)("org_upgrade.multi_team.billing_cost_per_month.seat_rename",{monthlyCostInDollars:(0,s.jsx)("span",{className:J.G8,children:D.formatMoney(V[N.ud.DEV_MODE].amount)})})})]}),(0,s.jsxs)("div",{className:J.y3,children:[(0,g.tx)("org_upgrade.multi_team.fig_jam"),(0,s.jsx)("div",{children:(0,g.tx)("org_upgrade.multi_team.billing_cost_per_month.seat_rename",{monthlyCostInDollars:(0,s.jsx)("span",{className:O,children:D.formatMoney(V[N.ud.FIGJAM].amount)})})})]}),(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--planText--MQX-G",children:(0,s.jsxs)("div",{className:"org_upgrade_multi_team_modal--itemList--SC-iA",children:[T.map((e,t)=>(0,s.jsx)("div",{children:(0,s.jsx)(et,{text:e})},t)),(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--seeAll--8WNIM",children:(0,s.jsx)(u.Us,{href:"https://www.figma.com/pricing/#cid-57mfNh6t0Xo7z8Q95Ww9ZV",target:"_blank",trusted:!0,children:(0,g.tx)("org_upgrade.multi_team.see_all_features")})})]})})]}),(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--teamIllustrationSection--xl3pT",style:{height:M},children:G})]}),(0,s.jsx)("div",{className:Y}),(0,s.jsx)(u.vd,{onClick:A,className:"org_upgrade_multi_team_modal--continueButton--Zo9V7",trackingProperties:{trackingDescriptor:j.c.UPGRADE_TO_ORGANIZATION,upsellSource:e.upsellSource},children:(0,g.tx)("org_upgrade.multi_team.continue")}),(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--spaceFiller--f9bwU"})]})})}function es(){return(0,s.jsxs)("svg",{width:"15",height:"17",viewBox:"0 0 15 17",fill:"none",children:[(0,s.jsxs)("mask",{id:"path-1-outside-1_15_11117",maskUnits:"userSpaceOnUse",x:"-0.5",y:"0.5",width:"16",height:"16",fill:"black",children:[(0,s.jsx)("rect",{fill:"white",x:"-0.5",y:"0.5",width:"16",height:"16"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.7753 2.25C4.7753 1.83579 5.11109 1.5 5.5253 1.5C5.93951 1.5 6.2753 1.83579 6.2753 2.25V7C6.2753 7.27614 6.49916 7.5 6.7753 7.5C7.05144 7.5 7.2753 7.27614 7.2753 7V6.25C7.2753 5.83579 7.61109 5.5 8.0253 5.5C8.43951 5.5 8.7753 5.83579 8.7753 6.25V7C8.7753 7.27614 8.99916 7.5 9.2753 7.5C9.55144 7.5 9.7753 7.27614 9.7753 7V6.75C9.7753 6.33579 10.1111 6 10.5253 6C10.9395 6 11.2753 6.33579 11.2753 6.75V6.99997C11.2753 7.27613 11.4992 7.5 11.7753 7.5H12.0254C12.1634 7.5 12.2754 7.38807 12.2754 7.25C12.2754 6.83579 12.6111 6.5 13.0254 6.5C13.4396 6.5 13.7754 6.83579 13.7754 7.25V9.75C13.7754 9.75099 13.7754 9.75197 13.7754 9.75296V11C13.7754 13.4853 11.7606 15.5 9.27535 15.5C7.72857 15.5 6.36406 14.7196 5.55409 13.531C4.83873 12.7173 3.72389 11.8364 2.76078 11.0754L2.76074 11.0754L2.76055 11.0753C2.45467 10.8336 2.16409 10.604 1.90649 10.3925C1.42761 9.99926 1.3593 9.26798 1.7686 8.80273C2.47277 8.00228 3.67449 9.08737 4.40263 9.86608C4.41077 9.87478 4.41894 9.88354 4.42715 9.89237C4.54973 10.0242 4.77535 9.93924 4.77535 9.75922L4.7753 9.75V2.25Z"})]}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.7753 2.25C4.7753 1.83579 5.11109 1.5 5.5253 1.5C5.93951 1.5 6.2753 1.83579 6.2753 2.25V7C6.2753 7.27614 6.49916 7.5 6.7753 7.5C7.05144 7.5 7.2753 7.27614 7.2753 7V6.25C7.2753 5.83579 7.61109 5.5 8.0253 5.5C8.43951 5.5 8.7753 5.83579 8.7753 6.25V7C8.7753 7.27614 8.99916 7.5 9.2753 7.5C9.55144 7.5 9.7753 7.27614 9.7753 7V6.75C9.7753 6.33579 10.1111 6 10.5253 6C10.9395 6 11.2753 6.33579 11.2753 6.75V6.99997C11.2753 7.27613 11.4992 7.5 11.7753 7.5H12.0254C12.1634 7.5 12.2754 7.38807 12.2754 7.25C12.2754 6.83579 12.6111 6.5 13.0254 6.5C13.4396 6.5 13.7754 6.83579 13.7754 7.25V9.75C13.7754 9.75099 13.7754 9.75197 13.7754 9.75296V11C13.7754 13.4853 11.7606 15.5 9.27535 15.5C7.72857 15.5 6.36406 14.7196 5.55409 13.531C4.83873 12.7173 3.72389 11.8364 2.76078 11.0754L2.76074 11.0754L2.76055 11.0753C2.45467 10.8336 2.16409 10.604 1.90649 10.3925C1.42761 9.99926 1.3593 9.26798 1.7686 8.80273C2.47277 8.00228 3.67449 9.08737 4.40263 9.86608C4.41077 9.87478 4.41894 9.88354 4.42715 9.89237C4.54973 10.0242 4.77535 9.93924 4.77535 9.75922L4.7753 9.75V2.25Z",fill:"white"}),(0,s.jsx)("path",{d:"M13.7754 9.75296L12.7754 9.7491V9.75296H13.7754ZM5.55409 13.531L6.38045 12.9679L6.34578 12.917L6.30513 12.8708L5.55409 13.531ZM2.76078 11.0754L3.38075 10.2908L3.37466 10.286L3.36849 10.2813L2.76078 11.0754ZM2.76074 11.0754L2.13996 11.8594L2.14646 11.8645L2.15303 11.8696L2.76074 11.0754ZM2.76055 11.0753L3.38133 10.2913L3.38052 10.2906L2.76055 11.0753ZM1.90649 10.3925L1.27191 11.1653L1.27191 11.1653L1.90649 10.3925ZM1.7686 8.80273L1.01778 8.14221H1.01778L1.7686 8.80273ZM4.40263 9.86608L5.13306 9.18309L5.13306 9.18309L4.40263 9.86608ZM4.7753 9.75H3.77528L3.77532 9.75602L4.7753 9.75ZM4.42715 9.89237L3.69482 10.5733L4.42715 9.89237ZM5.5253 0.5C4.5588 0.5 3.7753 1.2835 3.7753 2.25H5.7753C5.7753 2.38807 5.66337 2.5 5.5253 2.5V0.5ZM7.2753 2.25C7.2753 1.2835 6.4918 0.5 5.5253 0.5V2.5C5.38723 2.5 5.2753 2.38807 5.2753 2.25H7.2753ZM7.2753 7V2.25H5.2753V7H7.2753ZM6.2753 6.25V7H8.2753V6.25H6.2753ZM8.0253 4.5C7.0588 4.5 6.2753 5.2835 6.2753 6.25H8.2753C8.2753 6.38807 8.16337 6.5 8.0253 6.5V4.5ZM9.7753 6.25C9.7753 5.2835 8.9918 4.5 8.0253 4.5V6.5C7.88723 6.5 7.7753 6.38807 7.7753 6.25H9.7753ZM9.7753 7V6.25H7.7753V7H9.7753ZM8.7753 6.75V7H10.7753V6.75H8.7753ZM10.5253 5C9.5588 5 8.7753 5.7835 8.7753 6.75H10.7753C10.7753 6.88807 10.6634 7 10.5253 7V5ZM12.2753 6.75C12.2753 5.7835 11.4918 5 10.5253 5V7C10.3872 7 10.2753 6.88807 10.2753 6.75H12.2753ZM12.2753 6.99997V6.75H10.2753V6.99997H12.2753ZM12.0254 6.5H11.7753V8.5H12.0254V6.5ZM13.2754 7.25C13.2754 7.38807 13.1634 7.5 13.0254 7.5V5.5C12.0589 5.5 11.2754 6.2835 11.2754 7.25H13.2754ZM13.0254 7.5C12.8873 7.5 12.7754 7.38807 12.7754 7.25H14.7754C14.7754 6.2835 13.9919 5.5 13.0254 5.5V7.5ZM12.7754 7.25V9.75H14.7754V7.25H12.7754ZM12.7754 9.75L12.7754 9.7491L14.7753 9.75683C14.7754 9.75455 14.7754 9.75228 14.7754 9.75H12.7754ZM14.7754 11V9.75296H12.7754V11H14.7754ZM9.27535 16.5C12.3129 16.5 14.7754 14.0376 14.7754 11H12.7754C12.7754 12.933 11.2084 14.5 9.27535 14.5V16.5ZM4.72773 14.0942C5.716 15.5444 7.38393 16.5 9.27535 16.5V14.5C8.07321 14.5 7.01213 13.8948 6.38045 12.9679L4.72773 14.0942ZM2.14081 11.8601C3.12768 12.6398 4.1605 13.4604 4.80305 14.1913L6.30513 12.8708C5.51696 11.9742 4.32011 11.033 3.38075 10.2908L2.14081 11.8601ZM2.15303 11.8696L2.15308 11.8696L3.36849 10.2813L3.36845 10.2812L2.15303 11.8696ZM2.13977 11.8592L2.13996 11.8594L3.38152 10.2914L3.38133 10.2913L2.13977 11.8592ZM1.27191 11.1653C1.53818 11.3839 1.83659 11.6197 2.14058 11.8599L3.38052 10.2906C3.07274 10.0474 2.79 9.82399 2.54106 9.61959L1.27191 11.1653ZM1.01778 8.14221C0.225175 9.04318 0.36732 10.4226 1.27191 11.1653L2.54106 9.61959C2.52173 9.60372 2.50406 9.57558 2.50055 9.53613C2.49713 9.49765 2.50911 9.47495 2.51941 9.46324L1.01778 8.14221ZM5.13306 9.18309C4.76 8.78412 4.18894 8.21906 3.5653 7.86975C3.25213 7.69434 2.84133 7.52445 2.38081 7.5217C1.87057 7.51865 1.38659 7.72299 1.01778 8.14221L2.51941 9.46324C2.52177 9.46056 2.50353 9.48113 2.46192 9.49972C2.42048 9.51823 2.385 9.52176 2.36888 9.52166C2.35449 9.52158 2.42166 9.52154 2.58795 9.61468C2.92326 9.80249 3.31712 10.1693 3.6722 10.5491L5.13306 9.18309ZM5.15947 9.21142C5.15063 9.20191 5.14183 9.19247 5.13306 9.18309L3.6722 10.5491C3.6797 10.5571 3.68724 10.5652 3.69482 10.5733L5.15947 9.21142ZM3.77532 9.75602L3.77537 9.76525L5.77534 9.7532L5.77528 9.74398L3.77532 9.75602ZM3.7753 2.25V9.75H5.7753V2.25H3.7753ZM3.69482 10.5733C4.40798 11.3403 5.77535 10.8889 5.77535 9.75922H3.77535C3.77535 8.98963 4.69149 8.70813 5.15947 9.21142L3.69482 10.5733ZM9.2753 8.5C10.1037 8.5 10.7753 7.82843 10.7753 7H8.7753C8.7753 6.72386 8.99916 6.5 9.2753 6.5V8.5ZM6.7753 8.5C7.60373 8.5 8.2753 7.82843 8.2753 7H6.2753C6.2753 6.72386 6.49916 6.5 6.7753 6.5V8.5ZM10.2753 6.99997C10.2753 7.82841 10.9469 8.5 11.7753 8.5V6.5C12.0515 6.5 12.2753 6.72384 12.2753 6.99997H10.2753ZM7.7753 7C7.7753 7.82843 8.44687 8.5 9.2753 8.5V6.5C9.55144 6.5 9.7753 6.72386 9.7753 7H7.7753ZM12.0254 8.5C12.7157 8.5 13.2754 7.94036 13.2754 7.25H11.2754C11.2754 6.83579 11.6111 6.5 12.0254 6.5V8.5ZM5.2753 7C5.2753 7.82843 5.94687 8.5 6.7753 8.5V6.5C7.05144 6.5 7.2753 6.72386 7.2753 7H5.2753Z",fill:"black",fillOpacity:"0.8",mask:"url(#path-1-outside-1_15_11117)"})]})}let er=(0,T.kp)(function(e){return(0,s.jsx)(_.tH,{boundaryKey:"OrgUpgradeMultiTeamModal",team:l.e.BILLING_EXPERIENCE,fallback:(0,s.jsx)(A.K,{}),children:(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)(k.N,{hiddenTitle:(0,g.tx)("org_upgrade.multi_team.bring_your_teams_together_with_the_figma_organization_plan"),estimatedWidth:500,estimatedHeight:500}),children:(0,s.jsx)(ea,{...e})})})},"Multi-Team Org Upgrade Modal")},571184:(e,t,a)=>{a.r(t),a.d(t,{OrgUpgradeSingleTeamModal:()=>z,PlanWithFigjamPriceView:()=>V});var s=a(104076),r=a(716976),i=a(903927),l=a(638004),n=a(511570),d=a.n(n),o=a(833805),c=a(114339),m=a(769109),_=a(1188),u=a(555013),p=a(72138),h=a(652539),x=a(192075),g=a(525980),y=a(147046),v=a(366535),f=a(244205),S=a(111297),j=a(205729),T=a(649693),E=a(418149),N=a(449250),b=a(571430),A=a(944350),w=a(412469),C=a(904017),I=a(104836),R=a(608175),k=a(498726),P=a(434225),M=a(354174),O=a(103345),D=a(213788),L=a(871993);function B(e){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.B,{svg:e.isArrow?'<svg xmlns="http://www.w3.org/2000/svg" width="9" height="7" viewBox="0 0 9 7"><path fill="#000" fill-opacity=".8" fill-rule="nonzero" stroke="none" d="m3.586 7 .602-.602L1.71 3.93h6.414v-.86H1.711L4.187.594 3.587 0l-3.5 3.5 3.5 3.5z"/></svg>':L.A,className:D.oE}),(0,s.jsx)("p",{children:e.text})]})}function U(e){return(0,s.jsx)("div",{className:D.Vf,children:(0,s.jsxs)("div",{className:D._R,children:[e.features.map((e,t)=>(0,s.jsx)("div",{className:D.$P,children:(0,s.jsx)(B,{text:e.text,isArrow:e.isArrow})},t)),e.plan===A.Ag.ORG&&(0,s.jsx)("div",{className:D.W2,children:(0,s.jsx)(u.Us,{href:"https://www.figma.com/pricing/#cid-57mfNh6t0Xo7z8Q95Ww9ZV",target:"_blank",trusted:!0,children:(0,x.tx)("org_upgrade.single_team.see_all_features")})}),e.plan===A.Ag.ORG&&(0,s.jsx)(u.vd,{onClick:e.onUpgrade,className:D.E8,trackingProperties:{trackingDescriptor:f.c.UPGRADE_TO_ORGANIZATION,upsellSource:e.upsellSource},children:(0,x.tx)("org_upgrade.single_team.upgrade_to_an_organization")})]})})}function V(e){return(0,s.jsxs)("div",{className:D.Ms,style:{padding:e.padding},"data-testid":e.dataTestId,children:[(0,s.jsx)("h2",{className:D.QB,children:e.name}),(0,s.jsx)("p",{className:D.VA,children:e.subtitle}),(0,s.jsxs)("div",{className:D.y3,children:[(0,s.jsxs)("p",{className:D.Q$,children:[(0,x.tx)("plan_details.figma"),(0,s.jsx)("div",{className:D.gt,children:(0,s.jsx)(c.G,{})})]}),(0,s.jsx)("div",{children:(0,s.jsx)("p",{className:D.G8,children:e.prices[T.ud.DESIGN]})})]}),e.prices[T.ud.DEV_MODE]&&(0,s.jsxs)("div",{className:D.y3,children:[(0,s.jsx)("p",{children:(0,x.tx)("plan_details.dev_mode_only")}),(0,s.jsx)("div",{children:(0,s.jsx)("p",{className:D.G8,children:e.prices[T.ud.DEV_MODE]})})]}),(0,s.jsxs)("div",{className:D.y3,children:[(0,s.jsx)("p",{children:(0,x.tx)("plan_details.fig_jam")}),(0,s.jsx)("div",{children:(0,s.jsx)("p",{className:D.G8,children:e.prices[T.ud.FIGJAM]})})]})]})}function G(e){let t=(0,C.XP)({reportErrorsToTeam:l.e.BILLING_EXPERIENCE}),a={planParentId:t.key.parentId||"",planType:t.key.type},r=(0,j.vK)(a),[n]=(0,o.Ad)(r),c=(0,j.vu)(n);if(null===c.data)throw Error("Contract prices currency was null");let _=c.data,u=E.Oq.exclude([T.ud.DEV_MODE]),h=u.dict(e=>({currency:_,billableProductKey:e,billableProductVariantKey:null,tier:R.Ju.PRO,renewalTerm:R.IX.YEAR,unit:R.IX.MONTH})),g=(0,j.ic)(h,a,j.Fq.UPSELL_MODALS_CONTRACT),f=(0,j.jv)({billableProductKeys:E.Oq,baseQuery:{currency:_,tier:R.Ju.ORG,renewalTerm:R.IX.YEAR,unit:R.IX.MONTH}}),[S,N]=(0,o.Ad)(g,f),b=(0,j.vu)(S);if(null===b.data)throw Error("Contract price data was null");let I=(0,j.vu)(N);if(null===I.data)throw Error("Sticker price data was null");let k=b.data,P=I.data,O=(0,i.wA)(),L=()=>{O(v.Ce())},B=new w.vr(_);return(0,s.jsx)(M.ey,{className:D.yl,hide:L,size:586,useModalViewScroll:!1,children:(0,s.jsxs)(p.P,{className:D.jG,children:[(0,s.jsxs)("div",{className:D.o,children:[(0,s.jsx)("div",{className:D.Dz,children:(0,s.jsx)("div",{className:D.hx,children:(0,x.tx)("org_upgrade.single_team.get_more_out_of_figma_as_you_grow")})}),(0,s.jsx)(m.Jn,{className:D.b,onClick:L,innerText:"close"})]}),(0,s.jsxs)("div",{className:d()(D.yH,D.Mm),children:[(0,s.jsx)(V,{dataTestId:"pro-prices",name:(0,x.t)("org_upgrade.single_team.professional_plan"),subtitle:(0,x.t)("org_upgrade.single_team.price_when_billed_annually"),prices:u.dict(e=>`${B.formatMoney(k[e].amount)}`),padding:"16px 31px 16px 36px"}),(0,s.jsx)(V,{dataTestId:"org-prices",name:(0,x.t)("org_upgrade.single_team.organization_plan"),subtitle:(0,x.t)("org_upgrade.single_team.annual_billing_only"),prices:E.Oq.dict(e=>`${B.formatMoney(P[e]?.amount??0)}`),padding:"16px 32px 16px 33px"})]}),(0,s.jsx)("div",{className:D.Jh}),(0,s.jsxs)("div",{className:D.yH,children:[(0,s.jsx)(U,{plan:A.Ag.PRO,features:[{text:(0,x.t)("org_upgrade.single_team.unlimited_design_files_and_projects_in_one_team")},{text:(0,x.t)("org_upgrade.single_team.design_library_within_one_team")},{text:(0,x.t)("org_upgrade.single_team.audio_conversations_in_files")}]}),(0,s.jsx)(U,{plan:A.Ag.ORG,features:[{text:(0,x.t)("org_upgrade.single_team.everything_in_professional_plus"),isArrow:!0},{text:(0,x.t)("org_upgrade.single_team.unlimited_teams_and_unlimited_projects")},{text:(0,x.t)("org_upgrade.single_team.cross_team_design_libraries_and_fonts")},{text:(0,x.t)("org_upgrade.single_team.control_file_sharing_inside_and_outside_of_your_organization")},{text:(0,x.t)("org_upgrade.single_team.single_sign_on_sso_integration")},{text:(0,x.t)("org_upgrade.single_team.private_plugins_and_plugin_management")},{text:(0,x.t)("org_upgrade.single_team.full_content_ownership")}],onUpgrade:()=>{L(),O(y.sf({view:"orgSelfServe",upsellSource:e.upsellSource}))},upsellSource:e.upsellSource})]})]})})}let z=(0,S.kp)(function(e){let t=(0,g.s)(),a=(0,I.ol)();return(0,s.jsx)(_.tH,{boundaryKey:"OrgUpgradeSingleTeamModal",team:l.e.BILLING_EXPERIENCE,fallback:(0,s.jsx)(N.K,{}),children:(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)(P.N,{hiddenTitle:(0,x.tx)("org_upgrade.single_team.get_more_out_of_figma_as_you_grow"),estimatedWidth:586,estimatedHeight:586}),children:t?(0,s.jsx)(O.bP,{team:a,resource:k.Bi.ORG,currentPlan:b.F.Plan.PRO,upsellPlan:b.F.Plan.ORG,editorType:A._Y.DESIGN,upsellSource:e.upsellSource}):(0,s.jsx)(G,{...e})})})},"Single-Team Org Upgrade Modal")},532832:(e,t,a)=>{a.r(t),a.d(t,{ResubscribeModal:()=>T});var s=a(104076),r=a(716976),i=a(903927),l=a(293422),n=a(929302),d=a(91478),o=a(268389);a(120440);var c=a(653899),m=a(192075),_=a(373533),u=a(366535),p=a(174461),h=a(244205),x=a(111297),g=a(400136),y=a(657878),v=a(412469),f=a(469229);let S=(0,x.tf)(l.$n),j=(0,x.tf)(l.$n);function T(e){let{upsellSource:t,paymentMethod:a,nextBillDate:l,amount:T,team:E,monthlySub:N=null,annualSub:b=null,currency:A,canSeeBillingAddressExp:w}=e,C=(0,i.wA)(),I=(0,y._6)(),R=(0,i.d4)(e=>(0,f.Np)(e,I)),[k,P]=(0,r.useState)(!1),{saveWithPaymentMethod:M,createPaymentElement:O,unmountPaymentElement:D}=(0,g.lo)({setupIntentParams:{redirect_url:R,subtotal_estimate:T,success_message:(0,m.t)("resubscribe_modal.success_message"),currency:A,teamId:E.id},paymentFlowSource:g.wn.PRO_REACTIVATE,customerInfo:{teamId:E.id,orgId:void 0},defaultCountry:(0,v.ub)(),currency:A,canSeeBillingAddressExp:w,isCheckout:!1});(0,c.h)(()=>(O({ready:()=>{P(!0)}}),()=>{D()}));let L=n.wQ({defaultOpen:!0}),B=a?.object.last4,U=(0,_.up)(T,A??"usd",{showCents:!0});return(0,s.jsxs)(x.fu,{name:"Resubscribe Modal",properties:{upsellSource:t},children:[(0,s.jsx)(d.bL,{manager:L,width:"fit-content",children:(0,s.jsxs)(o.vo,{children:[(0,s.jsx)(o.Y9,{children:(0,s.jsx)(o.hE,{children:(0,m.tx)("resubscribe_modal.title")})}),(0,s.jsx)(o.nB,{className:"x1dc814f",children:(0,s.jsx)("p",{children:(0,m.tx)("resubscribe_modal.body",{last4:B,formattedAmount:U,nextBillDate:l})})}),(0,s.jsx)(o.wi,{children:(0,s.jsxs)(o.jk,{children:[(0,s.jsx)(j,{variant:"secondary",disabled:!k,onClick:()=>{C((0,u.Ce)()),(0,p.C8)({team:E,dispatch:C,cancelling:!0,monthlySub:N,annualSub:b,currency:A,canSeeBillingAddressExp:w,estimatedChargeCents:T})},trackingProperties:{trackingDescriptor:h.c.UPDATE_PAYMENT},children:(0,m.tx)("resubscribe_modal.different_payment_method")}),(0,s.jsx)(S,{variant:"primary",disabled:!k,onClick:e=>{let t=async()=>{e.preventDefault(),await M(a),P(!0)};P(!1),t()},trackingProperties:{trackingDescriptor:h.c.REACTIVATE_YOUR_PROFESSIONAL_PLAN},children:(0,m.tx)("resubscribe_modal.reactivate_plan")})]})})]})}),(0,s.jsx)("div",{id:g.Ix,className:"x1s85apg"})]})}},410555:(e,t,a)=>{a.r(t),a.d(t,{UniversalUpgradeSequence:()=>z});var s=a(104076),r=a(716976),i=a(903927),l=a(633065),n=a(653899),d=a(769109),o=a(555013),c=a(192075),m=a(454307),_=a(111679),u=a(147046),p=a(366535),h=a(483200),x=a(111297),g=a(937505),y=a(657878),v=a(412469),f=a(853039),S=a(984887),j=a(377026),T=a(354174),E=a(99723),N=a(432099),b=a(99725),A=a(697157),w=a(679359),C=a(381640),I=a(25112),R=a(952385),k=a(459494),P=a(249586),M=a(592726),O=a(336971),D=a(953050),L=a(723347);let B=(0,C.nF)((e,{teamName:t,selectedView:a,currency:s,onSuccess:r,onError:i,onBillingCompleteRedirectInfo:l})=>{let n;N.Ay.post("/api/teams/create",{team_name:t}).then(({data:t})=>(n="team"in t.meta?t.meta.team:t.meta,e.dispatch(R.bE({team:n})),(0,P._J)("Team Created",n.id,e.getState()),D.G.getTeam({teamId:n.id}))).then(({data:t})=>{for(let a of t.meta)e.dispatch(I.bE({role:a}));r(),e.dispatch(h.WX({teamId:n.id,selectedView:a,newTeam:!0,currency:s,...l?{onBillingCompleteRedirectInfo:l}:{}}))}).catch(()=>{i()})});function U(e){let t=(0,i.wA)(),a=(0,M.TA)(),l=(0,i.d4)(O.P),n=(0,i.d4)(e=>e.roles.byTeamId),[d,m]=r.useState(!1),[_,u]=r.useState(!1),[h,x]=r.useState(""),g=(0,v.LN)(),y=()=>{t(p.Ce())},f=(0,E.s)(()=>{m(!0),h?t(B({teamName:h,selectedView:e.selectedView,currency:g,onSuccess:y,onError:()=>{m(!1),u(!0)},onBillingCompleteRedirectInfo:e.onBillingCompleteRedirectInfo})):(m(!1),u(!0))});return a&&!(0,k.e5)({userId:a,teams:Object.values(l),rolesByTeamId:n})?(0,s.jsxs)("div",{"data-testid":"createTeamToUpgradeView",children:[(0,s.jsx)("p",{className:L.KV,children:(0,c.tx)("universal_upgrade_sequence.subtitle")}),_&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b.I,{message:(0,c.t)("universal_upgrade_sequence.error"),marginTop:16}),(0,s.jsx)(o.Kz,{multiple:1})]}),(0,s.jsx)(o.Kz,{multiple:2}),(0,s.jsxs)("div",{className:L.$g,children:[(0,s.jsx)("div",{className:L.Eh,children:(0,s.jsx)(A.L,{dataTestId:"createTeamInput",placeholder:(0,c.t)("universal_upgrade_sequence.team_name.placeholder"),value:h||"",onChange:e=>{x(e.target.value)},required:!0,maxLength:255})}),(0,s.jsx)(o.vd,{dataTestId:"nextButton",className:L.DI,disabled:!h||d,onClick:f,children:d?(0,s.jsx)(w.kt,{className:L.u1}):(0,c.tx)("universal_upgrade_sequence.next")})]})]}):null}var V=a(312156),G=a(555590);function z(e){let[t,a]=r.useState("selectTeam"),E=(0,i.wA)(),N=(0,y._6)(),b=(0,g.FC)(),A=(0,i.d4)(e=>e.payment.promo),w=(0,i.d4)(e=>e.payment.billingPeriod),C=()=>{E(p.Lo())},I=()=>{E(p.Ce()),e.onDone?.()},R=t=>{"teamUpgrade"===N.view?E(u.sf({...N,teamFlowType:j.SC.UPGRADE_EXISTING_TEAM,teamId:t.id,paymentStep:(0,m.kR)(N.paymentStep,j.SC.UPGRADE_EXISTING_TEAM,N.billingPeriod||null,A,N.planType||j.Sc.UNDETERMINED,A?S.Vv.CONFIRM_PAY:S.Vv.CHOOSE_PLAN),billingPeriod:e.billingPeriod||w,entryPoint:e.entryPoint})):E(h.WX({teamId:t.id,selectedView:N,newTeam:!1,currency:(0,v.LN)(),billingPeriod:e.billingPeriod,onBillingCompleteRedirectInfo:e.onBillingCompleteRedirectInfo,entryPoint:e.entryPoint,openInNewTab:e.openInNewTab})),I()},k=()=>{0===(0,f.PS)(b).length?(E(_.Dw({openInNewTab:!l.eD})),a("createTeam")):a("selectTeam")};return((0,n.h)(()=>{e.plan===V.I.PRO&&k()}),"selectTeam"===t)?(()=>{let t=(0,f.PS)(b);return(0,s.jsx)(x.fu,{name:"Upgrade Select Team Modal",children:(0,s.jsxs)(T.ey,{hide:C,size:436,children:[(0,s.jsx)("h1",{"data-testid":"modalTitle",className:L.GK,children:(0,c.tx)("universal_upgrade_sequence.title")}),(0,s.jsx)(d.Jn,{dataTestId:"closeButton",className:L.b,onClick:C,innerText:(0,c.t)("universal_upgrade_sequence.close_modal")}),(0,s.jsx)(o.Kz,{multiple:2}),(0,s.jsx)(G.I,{eligibleTeams:t,selectTeam:R}),(0,s.jsx)(o.Kz,{multiple:2}),(0,s.jsx)(U,{selectedView:N,onBillingCompleteRedirectInfo:e.onBillingCompleteRedirectInfo})]})})})():(0,s.jsx)(s.Fragment,{})}},555590:(e,t,a)=>{a.d(t,{I:()=>u});var s=a(104076),r=a(716976),i=a(555013),l=a(72138),n=a(192075),d=a(244205),o=a(111297),c=a(853039),m=a(826160),_=a(723347);function u({customUpgradeText:e,eligibleTeams:t,selectTeam:a,numDesignFilesPerTeam:u,showEditorCount:p=!0}){let[h,x]=(0,r.useState)(!1),[g,y]=(0,r.useState)(!1);r.useEffect(()=>{x(t.length>=5)},[t]);let v=`${_.jG}`;h&&(v+=` ${_.o8}`),g&&(v+=` ${_.kz}`);let f=t[t.length-1],S=u&&u.length===t.length;return(0,s.jsx)(l.P,{onScroll:(e,a)=>{let s=t.length>=5,r=s&&0!==e,i=s&&e+a.trackHeight!==a.scrollHeight;i!==h&&x(i),r!==g&&y(r)},className:v,scrollingDisabled:!1,children:(0,s.jsx)("div",{className:_.nW,children:t.map((t,r)=>(0,s.jsxs)(o.jm,{className:t===f?_.wv:_.cr,onClick:()=>a(t),trackingProperties:{teamId:t.id,trackingDescriptor:d.c.UPGRADE},innerText:"Upgrade",children:[(0,s.jsxs)("div",{className:"org_self_serve--teamInfo--7YTKY",children:[(0,s.jsx)(m.Ro,{className:"org_self_serve--teamIcon--DqZPm",entity:t,size:40,shape:"SQUARE"}),(0,s.jsxs)("div",{className:"org_self_serve--teamText--Uh2zO",children:[(0,s.jsx)("p",{className:"org_self_serve--teamName--a1LGY text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",children:t.name}),(0,s.jsxs)("p",{className:"org_self_serve--teamEditors--2hBWh text--fontPos11--2LvXf text--_fontBase--QdLsd",children:[!S&&p&&(0,n.tx)("universal_upgrade.select_team.editor_count.seat_rename",{editors:t.editors}),S&&u&&(0,n.tx)("universal_upgrade.select_team.files_per_team_figma_files_used",{numFilesUsed:u[r],numFreeFilesAllowed:c.WW})]})]})]}),(0,s.jsx)(i.nR,{className:_.J1,dataTestId:"select_team.upgrade",children:e??(0,n.tx)("universal_upgrade.select_team.upgrade")})]},t.id))})})}},843735:(e,t,a)=>{a.r(t),a.d(t,{UpgradeContactSalesModal:()=>w});var s=a(104076),r=a(716976),i=a(903927),l=a(99723),n=a(310725),d=a(432099),o=a(769109),c=a(99725),m=a(555013),_=a(652539),u=a(192075),p=a(366535),h=a(111297),x=a(959834),g=a(757381),y=a(354174),v=a(147107);let f="upgrade_contact_sales_modal--closeButton--715WY";var S=a(364616),j=a(933949);let T=()=>[{name:(0,u.t)("contact_sales.topic.request_a_sales_demo_or_talk_to_sales"),value:"request_a_sales_demo_or_talk_to_sales"},{name:(0,u.t)("contact_sales.topic.billing_and_invoicing"),value:"billing_and_invoicing"},{name:(0,u.t)("contact_sales.topic.technical_and_product_support"),value:"technical_and_product_support"},{name:(0,u.t)("contact_sales.topic.educators_and_students"),value:"educators_and_students"}],E=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("option",{value:"",disabled:!0,children:(0,u.t)("contact_sales.which_topic_best_fits_your_needs")}),T().map(e=>(0,s.jsx)("option",{value:e.value,"data-testid":`select-option-${e.value}`,children:e.name},e.value))]}),N=()=>[{name:(0,u.t)("contact_sales.plan.starter"),value:"starter"},{name:(0,u.t)("contact_sales.plan.professional"),value:"professional"},{name:(0,u.t)("contact_sales.plan.organization"),value:"organization"},{name:(0,u.t)("contact_sales.plan.enterprise"),value:"enterprise"},{name:(0,u.t)("contact_sales.plan.figma_for_government"),value:"figma_for_government"},{name:(0,u.t)("contact_sales.plan.not_sure"),value:"not_sure"}],b=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("option",{value:"",disabled:!0,children:(0,u.t)("contact_sales.what_figma_plan_are_you_inquiring_about")}),N().map(e=>(0,s.jsx)("option",{value:e.value,"data-testid":`select-option-${e.value}`,children:e.name},e.value))]}),A=(0,x.Ju)(function({hideModal:e}){return(0,s.jsx)(h.fu,{name:"Upgrade Contact Sales Success Modal",children:(0,s.jsxs)(y.ey,{hide:e,size:480,children:[(0,s.jsxs)("div",{className:"upgrade_contact_sales_modal--successModalWrapper--xA5Mp",children:[(0,s.jsxs)("div",{className:"upgrade_contact_sales_modal--successModalTitle--Xgt1f upgrade_contact_sales_modal--modalTitle--7k87R text--fontPos13--xW8hS text--_fontBase--QdLsd",children:[(0,s.jsx)(_.B,{className:"upgrade_contact_sales_modal--successIcon---zT4I",svg:j.A}),(0,u.tx)("universal_upgrade.contact_sales.thank_you")]}),(0,s.jsx)(o.Jn,{className:f,onClick:e,innerText:"close"})]}),(0,s.jsx)("div",{className:"upgrade_contact_sales_modal--successModalText--f1aRe text--fontPos13--xW8hS text--_fontBase--QdLsd",children:(0,u.tx)("universal_upgrade.contact_sales.sales_will_reach_out")})]})})},"ContactSalesSuccessModal");function w(e){let t=(0,i.wA)(),a=(0,i.d4)(e=>e.user),[x,j]=(0,r.useState)({email:a?.email??"",name:a?.handle??"",overridePlaceholderText:e.overridePlaceholderText,freeText:"",result:void 0,companyName:void 0,companySize:"",jobTitle:"",topic:"",plan:"",product:"",phone:"",formErrors:{}}),T=()=>{t(p.Lo())},N=()=>{t((0,p.to)({type:A,data:{hideModal:()=>t(p.Ce())}}))},w=()=>({email:x.email,name:x.name,company_name:x.companyName,topic:x.topic,plan:x.plan,phone:x.phone,message:x.freeText,source:e.source,form_name:"topic_v1"}),C=(0,l.s)(()=>{let e={},t=(0,u.t)("universal_upgrade.this_field_is_required");if(x.email?(0,n.xf)(x.email)||(e.email=(0,u.t)("universal_upgrade.please_provide_a_valid_email_address")):e.email=t,x.name||(e.name=t),x.companyName||(e.companyName=t),x.topic||(e.topic=t),x.plan||(e.plan=t),j(t=>({...t,formErrors:e,result:void 0})),0===Object.keys(e).length){let e=w();d.Ay.post("/api/form_post/org-lead-gen",e).then(()=>{j(e=>({...e,result:"success"})),N()}).catch(()=>j(e=>({...e,result:"error"})))}}),I=e=>x.formErrors[e]?"upgrade_contact_sales_modal--error--8vAcf basic_form--labeledInputGroup--aeD6L":void 0,R=e=>{let t=x.formErrors[e];return t?(0,s.jsx)("div",{"data-testid":"form-error",className:"upgrade_contact_sales_modal--errorMessage--FfxPx text--fontPos11--2LvXf text--_fontBase--QdLsd",children:t}):null},k=(e,t,a=!1)=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.Lf,{htmlName:t,label:e,value:x[t]||"",onChange:e=>{let a={[t]:e.target.value};j(e=>({...e,...a}))},disabled:a,className:I(t)}),R(t)]}),P=(e,t,a)=>{let r=I(t)||v.Os;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:r,children:(0,s.jsxs)("div",{className:"upgrade_contact_sales_modal--select--sFfZ- address_form--selectRowFull--8DtEB",children:[(0,s.jsx)(m.VE,{name:t,placeholder:e,defaultValue:"","data-testid":`${t}-select`,onChange:e=>{let a={[t]:e.target.value};j(e=>({...e,...a}))},required:!0,children:a}),(0,s.jsx)(_.B,{className:v.nO,svg:S.A})]})}),R(t)]})};return(0,s.jsx)(h.fu,{name:"Upgrade Contact Sales Modal",children:(0,s.jsxs)(y.ey,{className:"upgrade_contact_sales_modal--contactSalesModal--ExFaV",hide:T,size:480,children:[(0,s.jsxs)("div",{className:"upgrade_contact_sales_modal--titleWrapper--mKMG2",children:[(0,s.jsx)("h1",{className:"upgrade_contact_sales_modal--modalTitle--7k87R text--fontPos13--xW8hS text--_fontBase--QdLsd",children:(0,u.tx)("universal_upgrade.contact_sales_title")}),(0,s.jsx)(o.Jn,{className:f,onClick:T,innerText:"close"})]}),(0,s.jsxs)("div",{className:"upgrade_contact_sales_modal--modalBody--FTi91",children:["error"===x.result&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.I,{message:(0,u.t)("universal_upgrade.there_was_an_error_processing_your_information_please_try_again")}),(0,s.jsx)(m.Kz,{multiple:.5})]}),(0,s.jsxs)("fieldset",{children:[k((0,u.t)("universal_upgrade.email_address"),"email"),k((0,u.t)("universal_upgrade.full_name"),"name"),k((0,u.t)("universal_upgrade.company_name"),"companyName"),P((0,u.t)("contact_sales.which_topic_best_fits_your_needs"),"topic",E()),P((0,u.t)("contact_sales.what_figma_plan_are_you_inquiring_about"),"plan",b()),k((0,u.t)("contact_sales.phone_number_optional"),"phone")]}),(0,s.jsx)(m.Kz,{multiple:1}),(0,s.jsx)("p",{children:(0,u.tx)("universal_upgrade.how_can_we_help_optional")}),(0,s.jsx)(m.Kz,{multiple:1}),(0,s.jsx)(g.v,{className:"upgrade_contact_sales_modal--freeTextInput--fE033 text--fontPos13--xW8hS text--_fontBase--QdLsd",value:x.freeText,onChange:e=>j(t=>({...t,freeText:e.target.value})),placeholder:x.overridePlaceholderText??(0,u.t)("universal_upgrade.e_g_i_m_looking_to_set_up_a_demo_of_figma"),maxLength:500})]}),(0,s.jsxs)("div",{className:"upgrade_contact_sales_modal--modalFooter--WNk7P",children:[(0,s.jsx)(m.tM,{onClick:T,children:(0,u.tx)("general.cancel")}),(0,s.jsx)(m.vd,{onClick:C,children:(0,u.tx)("universal_upgrade.submit")})]})]})})}},486004:(e,t,a)=>{a.r(t),a.d(t,{OrgHeader:()=>eA,OrgSelfServeBillingRemodelPage:()=>eb,OrgSelfServeBillingRemodelPageInner:()=>eN});var s=a(104076),r=a(716976),i=a(903927),l=a(951002),n=a(638004),d=a(883765),o=a(310725),c=a(219199),m=a(653899),_=a(833805),u=a(550209),p=a(432099),h=a(1188),x=a(520741),g=a(652539),y=a(236631),v=a(256384),f=a(259161),S=a(192075),j=a(281684),T=a(659062),E=a(138105),N=a(373533),b=a(560806),A=a(236753),w=a(788499),C=a(599448),I=a(906356),R=a(454967),k=a(532292),P=a(917296),M=a(186180),O=a(111297),D=a(608175),L=a(647070),B=a(984887),U=a(377026),V=a(468896);let G=(0,O.tf)(function(e){return(0,s.jsx)("div",{className:V.Nd,onClick:e.onClick,children:(0,S.tx)("org_self_serve.headers.cancel")})});function z(e){if(e.currentStep===L.BK.Confirmation)return null;let t=[],a=null;if(e.newTeamProps){let s={step:L.BK.ChoosePlan,name:(0,S.t)("org_self_serve.headers.choose_plan")},r={step:L.BK.CreateTeam,name:(0,S.t)("org_self_serve.headers.create_team")};switch(e.newTeamProps?.teamFlowType){case U.SC.CREATE:t.push({step:L.BK.PseudoCreateTeam,name:(0,S.t)("org_self_serve.headers.create_team")}),t.push({step:L.BK.AddCollaborators,name:(0,S.t)("org_self_serve.headers.add_team_members")}),t.push(s);break;case U.SC.CREATE_AND_UPGRADE:t.push(s),t.push(r),a=L.BK.CreateTeam;break;case U.SC.UPGRADE_EXISTING_TEAM:t.push(s)}}e.canSeeTeamAndSeatSelectionSteps&&(t.push({step:L.BK.TeamSelect,name:(0,S.t)("org_self_serve.headers.teams_to_upgrade")}),e.isCampfireCart&&t.push({step:L.BK.SeatSelect,name:(0,S.t)("checkout.choose_seats")}),a=a??L.BK.TeamSelect),e.isCampfireCart?a=a??L.BK.Payment:(t.push({step:L.BK.Details,name:(0,S.t)("org_self_serve.headers.organization_details")}),a=a??L.BK.Details),t.push({step:L.BK.Payment,name:(0,S.t)("org_self_serve.headers.payment")}),t.push({step:L.BK.Review,name:(0,S.t)("org_self_serve.headers.review")}),t[t.findIndex(e=>e.step===a)].step=L.BK.Initial;let r=0;for(let a=0;a<t.length;a++)if(t[a].step===e.currentStep){r=a;break}return(0,s.jsxs)("div",{className:V.li,children:[(0,s.jsx)(G,{onClick:e.onFileBrowserClick}),(0,s.jsx)("div",{className:V.Uu,"data-testid":"stepBreadcrumbs",children:t.map((t,a)=>(0,s.jsx)(M.On,{selected:e.currentStep===t.step,number:a+1,text:t.name,onClick:()=>{d.az.trackDefinedEvent("monetization_upgrades.checkout_breadcrumb_navigation",{fromStep:e.currentStep,toStep:t.step,tier:D.Ju.ORG,isCampfireCart:!!e.isCampfireCart});let a=function(e){switch(e){case L.BK.ChoosePlan:return B.Vv.PLAN_COMPARISON;case L.BK.AddCollaborators:return B.Vv.ADD_COLLABORATORS;case L.BK.PseudoCreateTeam:return B.Vv.CREATE_TEAM;default:return null}}(t.step);a&&e.onSelectTeamUpgradeStep?e.onSelectTeamUpgradeStep(a):e.setStep(t.step)},canClick:a<r,lightText:!0},a+1))})]})}var $=a(784219),F=a(183058),H=a(473893),q=a(935835),K=a(785034),W=a(542663),Y=a(147046),J=a(366535),Z=a(483200),X=a(443192),Q=a(459494),ee=a(244205),et=a(205729),ea=a(400136),es=a(249586),er=a(418149),ei=a(449250),el=a(134391),en=a(537307),ed=a(944350),eo=a(412469),ec=a(644075),em=a(411224),e_=a(943325),eu=a(613936),ep=a(563554),eh=a(562552),ex=a(913610),eg=a(262181),ey=a(768399),ev=a(876299),ef=a(134798),eS=a(948058);let ej=({selectedTeamIds:e,selectedUserSeatTypes:t,additionalSeatsCount:a,onChangeSeat:s,onChangeAdditionalSeats:i})=>{let l=(0,ef.wh)(e,t,a),[n,d]=(0,r.useState)(l),o=(0,r.useCallback)(e=>{try{d(t=>(function(e,t){let a=(0,ef.n5)(e,t);switch(a.type){case"success":return a.value;case"validation":throw Error("failed validation");case"error":throw Error("sent error")}})(t,e))}catch(e){}},[]);return{changeUserSeatType:(0,r.useCallback)((e,t)=>{o({type:"changeSeatType",userId:e,seatType:t}),s(e,t)},[s,o]),setAdditionalSeats:(0,r.useCallback)(e=>{o({type:"setAdditionalSeats",additionalSeatCounts:e}),i(e)},[i,o]),selectSeatsState:n}};function eT({users:e,selectedUserSeatTypes:t,selectedTeamIds:a,additionalSeatsCount:r,onChangeSeat:i,onChangeAdditionalSeats:l,currency:n}){let d=(0,ev.G)({currency:n,tier:D.Ju.ORG,renewalTerm:D.IX.YEAR,showCents:!1}),[o]=(0,_.Ad)(d);if(null===o.data)throw Error("No seat types data");let c=o.data,{changeUserSeatType:m,selectSeatsState:u,setAdditionalSeats:p}=ej({selectedTeamIds:a,selectedUserSeatTypes:t,additionalSeatsCount:r,onChangeSeat:i,onChangeAdditionalSeats:l});return(0,s.jsx)("div",{"data-testid":"select-seats-step-org",children:(0,s.jsx)(eS.T,{users:e,seatTypes:c,changeUserSeatType:m,selectSeatsState:u,setAdditionalSeats:p,tier:D.Ju.ORG})})}var eE=a(388041);class eN extends r.Component{constructor(e){super(e),this.canSeeTeamAndSeatSelectionSteps=()=>Object.keys(this.state.eligibleTeamsByTeamId).length>0||this.state.loading||!!this.props.newTeamProps,this.effectiveStep=()=>this.props.step===L.BK.Initial||this.props.step===L.BK.ChoosePlan?this.props.newTeamProps?.teamFlowType===U.SC.CREATE_AND_UPGRADE?L.BK.CreateTeam:this.canSeeTeamAndSeatSelectionSteps()?L.BK.TeamSelect:L.BK.Payment:this.props.step,this.setStep=e=>{this.props.dispatch(Y.sf({view:"orgSelfServe",step:e,orgMigrated:!1,newTeamProps:this.props.newTeamProps,upsellSource:this.props.upsellSource})),this.setState(e=>({payment:{...e.payment,card:null}}))},this.trackError=e=>{d.az.trackDefinedEvent("monetization_upgrades.checkout_payment_error",{message:e,paymentFlow:ea.wn.ORG_UPGRADE,paymentMethodType:e_.lB.CARD,isCampfireCart:!0})},this.onSubmit=()=>{let e=this.effectiveStep();switch(e){case L.BK.CreateTeam:this.state.newTeamName?.trim()&&this.setStep(L.BK.TeamSelect);break;case L.BK.AddCollaborators:this.setStep(L.BK.Payment);break;case L.BK.PseudoCreateTeam:this.setStep(L.BK.TeamSelect);break;case L.BK.TeamSelect:let t=(0,C.h)({eligibleTeamsByTeamId:this.state.eligibleTeamsByTeamId,selectedTeamIds:this.state.selectedTeamIds,eligibleUsersByUserId:this.state.eligibleUsersByUserId,selectedUserSeatTypes:this.state.selectedUserSeatTypes});this.setState({selectedUserSeatTypes:t}),this.setStep(L.BK.SeatSelect);break;case L.BK.SeatSelect:this.setStep(L.BK.Payment);break;case L.BK.Payment:this.onSubmitPaymentAndAddress();break;case L.BK.Review:this.onSubmitPurchaseOrder();break;case L.BK.Confirmation:break;default:(0,l.wc)(e)}},this.getNextButtonText=()=>{let e=this.effectiveStep();switch(e){case L.BK.CreateTeam:case L.BK.PseudoCreateTeam:case L.BK.AddCollaborators:return(0,S.t)("org_self_serve.create_team_step.next_select_team");case L.BK.TeamSelect:return(0,S.t)("checkout.org_self_serve.next_select_seats");case L.BK.SeatSelect:return(0,S.t)("org_self_serve.payment_step.next_payment");case L.BK.Payment:return(0,S.t)("org_self_serve.review_step.next_review");case L.BK.Review:case L.BK.Confirmation:return"";default:(0,l.wc)(e)}},this.getIsNextButtonDisabled=()=>{let e=this.effectiveStep();switch(e){case L.BK.CreateTeam:case L.BK.PseudoCreateTeam:return!this.state.newTeamName;case L.BK.TeamSelect:return this.state.loading;case L.BK.Payment:return this.state.apiPending||!this.state.orgDetails.legalOrgName;case L.BK.Review:case L.BK.Confirmation:case L.BK.AddCollaborators:case L.BK.SeatSelect:return!1;default:(0,l.wc)(e)}},this.getIsNextButtonLoading=()=>this.state.loading||this.state.apiPending,this.onTeamToggle=e=>{let t=!this.state.selectedTeamIds.has(e);d.az.trackDefinedEvent("monetization_upgrades.checkout_change_team_selection",{teamId:e,selectedTeam:t}),t?this.setState(t=>({selectedTeamIds:t.selectedTeamIds.add(e)})):this.setState(t=>(t.selectedTeamIds.delete(e),{selectedTeamIds:t.selectedTeamIds}))},this.onCardReady=e=>{let t={...this.state.payment,card:e};this.setState({payment:t})},this.onAddressChange=e=>{let t={...this.state.payment,address:e};this.setState({payment:t})},this.onShippingAddressChange=e=>{this.setState({shippingAddress:e})},this.onNameOnPaymentMethodChange=e=>{this.setState({nameOnPaymentMethod:e.trim()})},this.onClearToken=()=>{let e={...this.state.payment,token:null};this.setState({payment:e})},this.onVatIdChange=e=>{this.setState({vatId:e})},this.onRegionalVatIdChange=e=>{this.setState({regionalVatId:e})},this.onVatValidationFail=e=>{this.trackError(e),this.setState({apiPending:!1,paymentError:e})},this.onChangeNewTeamName=e=>{this.setState({newTeamName:e.trim()})},this.onChangeOrgDetails=e=>{let t=e.target.name,a=e.target.value;if(!t){e.preventDefault(),console.error("HTMLInputElement is missing name attribute:",e.target);return}let s=this.state.orgDetails;switch(t){case"actor_name":s.actorName=a.trim();break;case"legal_org_name":s.legalOrgName=a.trim();break;case"org_name":s.orgName=a.trim()}this.setState({orgDetails:s})},this.contactSales=()=>{this.props.dispatch((0,J.to)({type:I.lk,data:{source:R.B.ORG_SELF_SERVE_UPGRADE_MODAL}}))},this.onFileBrowserClick=()=>{this.props.newTeamProps&&(0,el.Al)(this.props.user.id),c.Ay.redirect("/files/recent")},this.updateAdditionalEmptySeats=e=>{this.setState({additionalSeatCounts:e})},this.renderPurchaseSummary=()=>{let e=this.effectiveStep()===L.BK.TeamSelect?null:(0,A.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts);return(0,s.jsx)(H.z,{billingInterval:B.NW.YEAR,buttonText:this.getNextButtonText(),canEnforcePaidSeatMinimum:this.effectiveStep()===L.BK.SeatSelect,countByBillableProductKey:e,currency:this.state.currency,footer:(0,s.jsxs)("div",{className:V.i9,children:[(0,s.jsx)(g.B,{svg:eE.A,className:V.$y}),(0,s.jsx)("p",{children:(0,S.tx)("org_self_serve.purchase_summary.have_questions",{contactSales:(0,s.jsx)("span",{className:V.uD,onClick:this.contactSales,children:(0,S.tx)("org_self_serve.purchase_summary.contact_our_sales_team")})})})]}),isButtonDisabled:this.getIsNextButtonDisabled(),isLoading:this.getIsNextButtonLoading(),onClickNext:this.onSubmit,onSwitchCurrency:e=>{this.props.dispatch(Z.MN({currency:e})),this.setState({currency:e})},tier:D.Ju.ORG,title:(0,S.t)("checkout.your_organization_plan"),trackingProperties:{selectedTeamIds:(0,w.gu)(Array.from(this.state.selectedTeamIds)),selectedUserSeatTypes:(0,w.Tj)(this.state.selectedUserSeatTypes),countBySeatType:(0,w.gS)(e)}})},this.state={loading:!0,eligibleTeamsByTeamId:{},selectedTeamIds:new Set,eligibleUsersByUserId:{},selectedUserSeatTypes:{},additionalSeatCounts:{collaborator:0,developer:0,expert:0},payment:{card:null,last4:null,address:(0,B.EB)((0,eo.aE)())},apiPending:!1,stripeCustomerId:null,taxRate:0,orgDetails:{actorName:"",actorEmail:this.props.user.email,legalOrgName:"",orgName:""},paymentError:null,currency:this.props.currency,shippingAddress:(0,B.EB)((0,eo.aE)()),nameOnPaymentMethod:"",vatId:null,regionalVatId:null,newTeamName:this.props.newTeamProps?.newTeamName||null,inviteEmails:this.props.newTeamProps?.inviteEmails||[]}}componentDidMount(){this.fetchTeamEligibleUpgrades()}fetchTeamEligibleUpgrades(){return eh.Eh.getEligibleUpgrades().catch(e=>{let t=e.data.message;return this.props.dispatch(Y.sf({view:"recentsAndSharing"})),this.props.dispatch(v.s.error(t||(0,S.t)("org_self_serve.confirmation_step.sorry_there_was_an_error_processing_your_request_refresh_and_try_again"))),this.setState({loading:!1}),Promise.reject()}).then(({data:e})=>{(0,w.R9)({eligibleTeamIds:e.meta.eligible_teams.map(e=>e.id),eligibleTeamUsers:e.meta.eligible_team_users,tier:D.Ju.ORG,step:this.effectiveStep()});let{eligibleTeamsByTeamId:t,selectedTeamIds:a,eligibleUsersByUserId:s,selectedUserSeatTypes:r}=(0,E.W)(e.meta.eligible_teams,e.meta.eligible_team_users);this.setState({loading:!1,eligibleTeamsByTeamId:t,selectedTeamIds:a,eligibleUsersByUserId:s,selectedUserSeatTypes:r})})}componentDidUpdate(e,t){(0,o.zN)(e.user.email)!==(0,o.zN)(this.props.user.email)&&c.Ay.redirect("/purchase-organization")}getSubtotal(){let e=(0,A.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts)||er.N_.dict(e=>0);return(0,N.Vh)(e,(0,A.s$)(this.props.productPriceBySeatType))}getTaxTotal(){let e=(0,A.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts)||er.N_.dict(e=>0);return(0,N.kV)(e,(0,A.s$)(this.props.productPriceBySeatType),this.state.taxRate)}getTotal(){let e=(0,A.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts)||er.N_.dict(e=>0);return(0,N.N9)(e,(0,A.s$)(this.props.productPriceBySeatType),this.state.taxRate)}getDisplayedCostBreakdown(){let e=this.getSubtotal(),t=this.getTaxTotal(),a=this.getTotal();return(0,A.GL)({subtotal:e,taxTotal:t,total:a})}async onSubmitPaymentAndAddress(){let e=this.state.payment.address,t=this.state.payment.card,a=this.state.vatId,s=this.state.regionalVatId;if(null===t){let e=(0,S.t)("org_self_serve.payment_step.sorry_please_wait");this.trackError(e),this.setState({paymentError:e});return}if(this.setState({apiPending:!0}),a&&!await (0,ex.V)(a,e.country,()=>{},this.onVatValidationFail))return;if(this.props.canSeeBillingAddressExp&&!this.state.nameOnPaymentMethod){let e=(0,S.t)("org_self_serve.payment_step.name_on_payment_method_is_required");this.trackError(e),this.setState({apiPending:!1,paymentError:e});return}if(s&&!await (0,ex.V)(s,e.country,()=>{},this.onVatValidationFail,e.region))return;let r=this.props.canSeeBillingAddressExp?{name:this.state.nameOnPaymentMethod,address_line1:e.line1,address_line2:e.line2,address_country:e.country,address_city:e.city,address_state:e.region,address_zip:e.postal_code}:void 0;(0,e_.Ey)(t,r).then(t=>{if(!t.error&&t.token)return(0,e_.To)(t.token.id,this.getSubtotal(),this.state.currency).then(t=>this.props.canSeeBillingAddressExp?p.Ay.post("/api/orgs/validate_payment",{payment_method:t.payment_method,billing_address:e,shipping_address:(0,B.$V)(this.state.shippingAddress)?null:this.state.shippingAddress,selected_currency:this.state.currency,vat_gst_id:this.state.vatId,regional_vat_gst_id:this.state.regionalVatId||null}):p.Ay.post("/api/orgs/validate_payment",{payment_method:t.payment_method,address:e,selected_currency:this.state.currency,vat_gst_id:this.state.vatId,regional_vat_gst_id:this.state.regionalVatId||null})).catch(e=>{let t=e.data?.message||e.message;return this.trackError(t),this.setState({apiPending:!1,paymentError:t}),Promise.reject()}).then(({data:e})=>{this.setState(a=>({payment:{...a.payment,last4:t.token?.card?.last4||null},stripeCustomerId:e.meta.stripe_customer_id,taxRate:e.meta.tax_percent,apiPending:!1}),()=>this.setStep(L.BK.Review))});{let e=t.error?.message||(0,S.t)("org_self_serve.payment_step.there_was_an_error_processing_your_payment_please_try_again");this.trackError(e),this.setState({apiPending:!1,paymentError:e})}})}onSubmitPurchaseOrder(){this.props.dispatch(X.b({completed_org_cart_flow:!0}));let e=(0,A.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts),t=this.getDisplayedCostBreakdown(),a=(0,A.vm)(this.props.productPriceBySeatType),s={legal_org_name:this.state.orgDetails.legalOrgName,org_name:this.state.orgDetails.orgName||this.state.orgDetails.legalOrgName,team_ids:Array.from(this.state.selectedTeamIds),requested_seats:e,selected_user_seat_types:(0,A.VB)(this.state.selectedUserSeatTypes),stripe_customer_id:this.state.stripeCustomerId,selected_currency:this.state.currency,vat_gst_id:this.state.vatId||null,regional_vat_gst_id:this.state.regionalVatId||null,displayed_cost_breakdown:t,displayed_price_keys:a};this.state.newTeamName&&(s.new_team_options={team_name:this.state.newTeamName,add_to_org:!0}),this.setState({apiPending:!0}),p.Ay.post("/api/orgs",s).catch(s=>(this.props.dispatch(v.s.error((0,j.J)(s,s.data?.message||(0,S.t)("org_self_serve.review_step.sorry_there_was_an_error_please_try_again")))),(0,u.$D)(n.e.BILLING_EXPERIENCE,Error(`[Billing] Org checkout API failed: ${s.data?.message}`),{extra:{eligibleTeamsByTeamId:this.state.eligibleTeamsByTeamId,eligibleUsersByUserId:this.state.eligibleUsersByUserId,selectedUserSeatTypes:this.state.selectedUserSeatTypes,selectedTeamIds:Array.from(this.state.selectedTeamIds),userId:this.props.user.id,countBySeatType:e,displayedCostBreakdown:t,displayedPriceKeys:a}}),this.setState({apiPending:!1}),Promise.reject())).then(e=>{this.setState({apiPending:!1},()=>this.setStep(L.BK.Confirmation)),this.state.inviteEmails.length&&e.data.meta.new_team&&this.props.dispatch((0,em.rq)({emails:this.state.inviteEmails,resourceType:ed.vt.TEAM,resourceIdOrKey:e.data.meta.new_team.id,level:eu.e6.EDITOR,teamId:e.data.meta.new_team.id})),this.state.newTeamName&&e.data.meta.new_team&&(0,el.Al)(this.props.user.id),(0,d.sx)("Self Serve Org Purchased (GTM)"),(0,es.uE)("Self Serve Org Purchased",{user:this.props.user},{org_name:s.org_name,upsellSource:this.props.upsellSource})})}render(){let e;let t=this.effectiveStep(),a=(0,A.Ds)(Object.values(this.state.eligibleTeamsByTeamId));if(t===L.BK.Review){let t=(0,A.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts)||{};e=(0,s.jsx)(F.j,{billingAddress:this.state.payment.address,billingInterval:B.NW.YEAR,countByBillableProductKey:t,currency:this.state.currency,displayName:this.state.orgDetails.orgName||this.state.orgDetails.legalOrgName,isRequestPending:this.state.apiPending,legalName:this.state.orgDetails.legalOrgName,navigateToEditDetails:()=>this.setStep(L.BK.Payment),onSubmit:this.onSubmit,onSubmitTrackingProperties:{selectedTeamIds:(0,w.gu)(Array.from(this.state.selectedTeamIds)),selectedUserSeatTypes:(0,w.Tj)(this.state.selectedUserSeatTypes),countBySeatType:(0,w.gS)((0,A.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts)),domain:(0,o.zN)(this.props.user.email),taxPercent:this.state.taxRate,subtotal:this.getSubtotal(),taxTotal:this.getTaxTotal(),total:this.getTotal()},shippingAddress:this.state.shippingAddress,taxPercent:this.state.taxRate,tier:D.Ju.ORG,title:(0,S.t)("checkout.upgrade_to_an_organization_plan"),userEmail:this.state.orgDetails.actorEmail})}else e=t===L.BK.Confirmation?(0,s.jsx)(P._,{totalCents:this.getTotal(),orgMigrated:this.props.orgMigrated,onFileBrowserClick:this.onFileBrowserClick,orgPayment:this.state.payment,currency:this.state.currency}):(0,s.jsxs)(s.Fragment,{children:[this.props.isOrgAdmin&&(0,s.jsx)(k.wW,{onContactSales:this.contactSales,onFileBrowserClick:this.onFileBrowserClick}),(0,o.qe)(this.props.user.email)&&(0,s.jsx)(k.VE,{onFileBrowserClick:this.onFileBrowserClick}),(0,s.jsxs)("div",{style:T.sx.if(t===L.BK.CreateTeam,T.sx.flex.justifyCenter,T.sx.grid.add({gridTemplateColumns:"1fr 280px",gap:"48px"})).$,children:[t===L.BK.CreateTeam&&(0,s.jsx)("div",{className:V.Bb,children:(0,s.jsx)(q.y,{type:q.I.ORG,teamName:this.state.newTeamName||"",setTeamName:this.onChangeNewTeamName,onNext:this.onSubmit})}),t===L.BK.TeamSelect&&(this.state.loading?(0,s.jsx)(K.f,{}):(0,s.jsx)(ey.t,{teams:a,selectedTeamIds:this.state.selectedTeamIds,onToggle:this.onTeamToggle,newTeamName:this.state.newTeamName})),t===L.BK.SeatSelect&&(this.state.loading?(0,s.jsx)(K.f,{}):(0,s.jsx)(eT,{users:(0,b.s)({eligibleUsersByUserId:this.state.eligibleUsersByUserId,eligibleTeamsByTeamId:this.state.eligibleTeamsByTeamId,selectedTeamIds:Array.from(this.state.selectedTeamIds)}),selectedTeamIds:Array.from(this.state.selectedTeamIds),selectedUserSeatTypes:this.state.selectedUserSeatTypes,additionalSeatsCount:this.state.additionalSeatCounts,currency:this.state.currency,onChangeSeat:(e,t)=>{this.setState({selectedUserSeatTypes:{...this.state.selectedUserSeatTypes,[e]:t}})},onChangeAdditionalSeats:this.updateAdditionalEmptySeats})),t===L.BK.Payment&&(0,s.jsxs)("form",{"data-testid":"org-payment-and-details-step",children:[(0,s.jsx)(ey.h,{orgDetails:this.state.orgDetails,onChangeFormInput:this.onChangeOrgDetails}),(0,s.jsx)("div",{className:y.s.pt24.$,children:(0,s.jsxs)($.x,{title:(0,S.t)("checkout.payment_details"),children:[this.state.paymentError&&(0,s.jsx)("div",{className:y.s.mb20.$,children:(0,s.jsx)(x._,{color:x.S.ERROR,text:this.state.paymentError})}),(0,s.jsx)(eg.n,{allowFullWidthForm:!0,billingAddress:this.state.payment.address,canSeeBillingAddressExp:this.props.canSeeBillingAddressExp,cardId:"team-upgrade-page-card",id:"team-upgrade-page-form",isCheckoutFlow:!0,isCommunityCheckout:!1,nameOnPaymentMethod:this.state.nameOnPaymentMethod,onBillingAddressChange:this.onAddressChange,onCardReady:this.onCardReady,onClearToken:this.onClearToken,onRegionalVatIdChange:this.onRegionalVatIdChange,onShippingAddressChange:this.onShippingAddressChange,onVatIdChange:this.onVatIdChange,regionalVatId:this.state.regionalVatId,setNameOnPaymentMethod:this.onNameOnPaymentMethodChange,shippingAddress:this.state.shippingAddress,vatId:this.state.vatId})]})})]}),t!==L.BK.CreateTeam&&this.renderPurchaseSummary()]})]});return(0,s.jsxs)(O.fu,{name:ep.e0.ORG_CHECKOUT_FLOW,properties:{step:t,currency:this.state.currency,upsellSource:this.props.upsellSource,entryPoint:this.props.entryPoint,eligibleTeamIds:(0,w.gu)(Object.keys(this.state.eligibleTeamsByTeamId)),prices:(0,w.Jh)(this.props.productPriceBySeatType)},enabled:!this.state.loading,trackingOptions:(0,W.L)(n.e.MONETIZATION_UPGRADES),children:[t!==L.BK.Confirmation&&(0,s.jsx)("div",{className:y.s.sticky.top0.zIndexTopBar.selectNone.$,children:(0,s.jsx)(z,{currentStep:this.props.step,setStep:this.setStep,canSeeTeamAndSeatSelectionSteps:this.canSeeTeamAndSeatSelectionSteps(),onFileBrowserClick:this.onFileBrowserClick,newTeamProps:this.props.newTeamProps,onSelectTeamUpgradeStep:e=>{this.props.dispatch(Y.sf({teamId:null,...this.props.newTeamProps?.previousView,view:"teamUpgrade",paymentStep:e,teamFlowType:this.props.newTeamProps?.teamFlowType||U.SC.CREATE_AND_UPGRADE}))},isCampfireCart:!0})}),(0,s.jsxs)("div",{className:y.s.selectNone.$,style:T.sx.mxAuto.add({padding:"48px",maxWidth:"1400px"}).$,children:[(0,s.jsx)(eA,{step:t}),e]})]})}}function eb(e){let t=(0,i.wA)(),a=(0,i.d4)(e=>e.user),r=(0,i.d4)(e=>(0,ec.x9)(e.orgUsersByOrgId,e.user.id).some(e=>e.permission===ed._D.ADMIN)),l=(0,Q.Mh)(),d=(0,i.d4)(e=>e.payment).currency||(0,eo.LN)();(0,m.h)(()=>{let e=document.createElement("div");return e.style.position="fixed",e.style.inset="0",e.style.background="var(--color-bg-secondary)",e.style.zIndex="-1",document.body.appendChild(e),()=>{document.body.removeChild(e)}});let o=(0,et.jv)({billableProductKeys:er.N_,baseQuery:{currency:d,tier:D.Ju.ORG,renewalTerm:D.IX.YEAR,unit:D.IX.YEAR}}),[c]=(0,_.Ad)(o);if("loaded"!==c.status)return(0,s.jsx)(ei.K,{});let u=c.data;return(0,s.jsx)(h.tH,{team:n.e.MONETIZATION_UPGRADES,boundaryKey:"OrgSelfServeBillingRemodelPage",fallback:h.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:en.y4,children:(0,s.jsx)(eN,{...e,dispatch:t,user:a,isOrgAdmin:r,canSeeBillingAddressExp:l,productPriceBySeatType:u,currency:d})})}function eA({step:e}){let t=function(e){switch(e){case L.BK.TeamSelect:return(0,S.t)("checkout.org_self_serve.select_teams_title");case L.BK.SeatSelect:return(0,S.t)("checkout.org_self_serve.select_seats_header");case L.BK.Payment:return(0,S.t)("checkout.enter_your_payment_details");case L.BK.Review:return(0,S.t)("checkout.everything_look_good");default:return null}}(e),a=function(e){let t=(0,s.jsx)(f.Ph,{href:"/pricing",trackingProperties:{trackingDescriptor:ee.c.LEARN_MORE_ABOUT_SEATS},newTab:!0,trusted:!0,children:(0,S.tx)("checkout.learn_more_about_seats")});switch(e){case L.BK.TeamSelect:return(0,S.t)("checkout.org_self_serve.select_teams_subtitle");case L.BK.SeatSelect:return(0,S.tx)("checkout.select_seats_table.seat_types_have_been_suggested",{learnMoreAboutSeatsLink:t});case L.BK.Review:return(0,S.t)("checkout.confirm_your_plan_seats_and_payment_details_then_you_re_all_set");default:return null}}(e);return t?(0,s.jsxs)("div",{className:y.s.mb32.$,"data-testid":"cart-org-header",children:[(0,s.jsx)("h2",{className:y.s.font15.lh24.fontMedium.$,children:t}),a&&(0,s.jsx)("p",{className:y.s.colorTextSecondary.font13.mt8.$,children:a})]}):null}eN.displayName="OrgSelfServePage"},768399:(e,t,a)=>{a.d(t,{h:()=>x,t:()=>p});var s=a(104076);if(443==a.j)var r=a(554875);if(443==a.j)var i=a(517796);var l=a(555013),n=a(236631),d=a(192075),o=a(659062),c=a(142914),m=a(784219),_=a(468896),u=a(691138);function p({teams:e,selectedTeamIds:t,onToggle:a,newTeamName:r,isCartFullSend:i}){return(0,s.jsx)("div",{"data-testid":"org-select-teams-step",children:(0,s.jsxs)("div",{className:_.kH,children:[r&&(0,s.jsx)(h,{team:{id:"new-team",name:r,numMembers:1},isSelected:!0,onToggle:a},"new-team"),e.map(e=>(0,s.jsx)(h,{team:e,isSelected:t.has(e.id),onToggle:a,isCartFullSend:i},e.id))]})})}function h({team:e,isSelected:t,onToggle:a,isCartFullSend:l}){return(0,s.jsxs)("div",{"data-testid":`select_team--${e.id}`,children:[(0,s.jsx)(r.F,{className:u.Q,checked:t,onChange:()=>a(e.id),id:`select-team-${e.id}`,disabled:"new-team"===e.id,"aria-disabled":"new-team"===e.id}),(0,s.jsxs)("label",{htmlFor:`select-team-${e.id}`,className:_.K6,style:o.sx.if(t,o.sx.colorBorderSelected.colorBgSelectedTertiary,o.sx.if(l,o.sx.colorBg.colorBorder,o.sx.colorBg.add({borderColor:"var(--color-bg)"}))).$,children:[(0,s.jsx)(c.nl,{team:e}),(0,s.jsxs)("span",{className:n.s.maxWFull.$,children:[(0,s.jsx)("span",{className:n.s.block.maxWFull.font14.fpl__textBodyLargeLineHeight.colorText.truncate.$,children:e.name}),(0,s.jsx)("span",{className:n.s.block.font11.colorTextSecondary.ellipsis.$,children:(0,d.tx)("checkout.org_select_teams_member_count",{count:e.numMembers})})]}),t&&(0,s.jsx)("div",{className:_.ER,children:(0,s.jsx)(i.g,{})})]})]},e.id)}function x({orgDetails:e,onChangeFormInput:t}){return(0,s.jsx)(m.x,{title:(0,d.t)("checkout.organization_details"),children:(0,s.jsxs)("div",{className:n.s.font13.$,children:[(0,s.jsx)(l.Lf,{htmlName:"legal_org_name",label:(0,d.t)("org_self_serve.details_step.legal_company_name"),value:e.legalOrgName,onChange:t}),(0,s.jsx)(l.Lf,{htmlName:"org_name",label:(0,d.t)("org_self_serve.details_step.company_display_name"),placeholder:(0,d.t)("org_self_serve.details_step.company_display_name__different_from_company_name_sub_text"),value:e.orgName,onChange:t})]})})}},532292:(e,t,a)=>{a.d(t,{wW:()=>$,VE:()=>z});var s=a(104076),r=a(716976),i=a(903927),l=a(812714),n=a(114339),d=a(6817),o=a(903853),c=a(769109),m=a(555013),_=a(72138),u=a(652539),p=a(236631),h=a(192075),x=a(659062),g=a(911990),y=a(151538),v=a(171660),f=a(104034),S=a(366535),j=a(675477),T=a(111297),E=a(249586),N=a(649693),b=a(418149),A=a(781611),w=a(412469),C=a(894210),I=a(959834),R=a(826160),k=a(25080),P=a(432786),M=a(354174);let O=(0,a(560201).ex)("org_upgrade_user_info_extended",function({teamIds:e,teamNames:t}){return(0,s.jsx)("div",{children:e.map((e,a)=>{let r=(0,k.$L)(e,k.us);return(0,s.jsxs)("div",{className:"org_self_serve_modal_tooltip_content--tooltipRow--CyDdQ",children:[(0,s.jsx)("div",{style:x.sx.add({backgroundColor:r,minWidth:"10px",height:"10px",margin:"8px",borderRadius:"2px"}).$}),(0,s.jsx)("div",{children:t[a]})]},e)})})},e=>{let t=e.getAttribute("data-tooltip-team-names"),a=e.getAttribute("data-tooltip-team-ids");return{teamNames:t.split(","),teamIds:a.split(",")}}),D="org_self_serve_modals--modalContainer--dX-kq",L="org_self_serve_modals--modalWrapperSmall--A6JUB org_self_serve_modals--modalWrapper--swqMp",B="org_self_serve_modals--modalHeader--nTa0e",U="org_self_serve_modals--modalText--VYdf5";var V=a(433566);function G(e){return(0,s.jsx)("div",{style:{height:e.height||12}})}function z(e){return(0,s.jsx)(P.OJ,{containerClassName:D,headerSize:"hidden",isCloseHidden:!0,title:"",minWidth:349,maxWidth:349,children:(0,s.jsxs)("div",{className:L,children:[(0,s.jsx)("div",{className:B,children:(0,h.tx)("org_self_serve.modals.invalid_email.figma_organization_only_allows_work_emails")}),(0,s.jsx)("div",{className:U,children:(0,h.tx)("org_self_serve.modals.invalid_email.change_email_address_to_proceed")}),(0,s.jsx)(G,{height:12}),(0,s.jsx)("a",{onClick:e.onFileBrowserClick,children:(0,h.tx)("org_self_serve.modals.invalid_email.go_to_the_file_browser")})]})})}function $(e){return(0,s.jsx)(P.OJ,{containerClassName:D,headerSize:"hidden",isCloseHidden:!0,title:"",minWidth:349,maxWidth:349,children:(0,s.jsxs)("div",{className:L,children:[(0,s.jsx)("div",{className:B,children:(0,h.tx)("org_self_serve.modals.existing_org_admin.figma_organization_already_purchased")}),(0,s.jsx)("div",{className:U,children:(0,h.tx)("org_self_serve.modals.existing_org_admin.if_you_need_another_organization",{contactSales:(0,s.jsx)("a",{onClick:e.onContactSales,children:(0,h.tx)("org_self_serve.modals.existing_org_admin.contact_sales")})})}),(0,s.jsx)(G,{height:4}),(0,s.jsx)(G,{height:12}),(0,s.jsx)("a",{onClick:e.onFileBrowserClick,children:(0,h.tx)("org_self_serve.modals.existing_org_admin.go_to_the_file_browser")})]})})}(0,I.Ju)(function(e){let t=e.isProTeam?b.Oq.exclude([N.ud.DEV_MODE]):b.Oq,[a,i]=(0,r.useState)(t.dict(t=>e.seatDataByLicenseType[t]?.currentSeats||0)),[o,c]=(0,r.useState)(null),m=e=>{let t=a[e];void 0!==t&&t<99&&i({...a,[e]:t+1})},_=t=>{let s=e.seatDataByLicenseType[t],r=a[t];null!=s&&null!=r&&r>s.minSeats&&i({...a,[t]:r-1})},p=(e,t)=>{if(""===e.target.value){t(0);return}let a=parseInt(e.target.value);isNaN(a)||t(a)},x=new w.vr(e.currency),g=a[N.ud.FIGJAM],y={[N.ud.DESIGN]:{headerString:(0,h.t)("all_carts.figma_design_editors.seat_rename"),totalSeatCount:a[N.ud.DESIGN],shouldShowDevModeIncludedText:!0},[N.ud.FIGJAM]:{headerString:(0,h.t)("all_carts.figjam_editors.seat_rename"),totalSeatCount:g,shouldShowDevModeIncludedText:!1},[N.ud.DEV_MODE]:{headerString:(0,h.t)("all_carts.dev_mode_only_seats"),totalSeatCount:a[N.ud.DEV_MODE]??0,shouldShowDevModeIncludedText:!1}};return(0,s.jsxs)(P.Dd,{onSubmit:()=>{let s=!1;if(t.forEach(t=>{let r=a[t],i=e.seatDataByLicenseType[t]?.minSeats||0;void 0!==r&&!1===s&&(r<i||r>99)&&(c(t),s=!0)}),s)return;let r=t.reduce((e,t)=>e+(a[t]||0),0);e.minTotalSeats&&r<e.minTotalSeats?c("total"):(e.dispatch(S.Ce()),e.updateAdditionalSeats(a))},confirmText:(0,h.t)("all_carts.save"),cancelText:(0,h.t)("all_carts.cancel"),title:(0,h.t)("all_carts.add_additional_editors.seat_rename"),children:[(0,s.jsx)("div",{className:"org_self_serve_modals--bannerContainer--ly-u-",children:o&&(0,s.jsxs)("div",{className:"org_self_serve_modals--errorBanner--EeUdZ",children:[(0,s.jsx)(u.B,{className:"org_self_serve_modals--errorSvg--h8gsO",svg:V.A}),(0,s.jsxs)("div",{className:"org_self_serve_modals--errorBannerText--srvT- org_self_serve_modals--headerModalText--h0Go9",children:[o===N.ud.DESIGN&&(0,h.tx)("all_carts.you_need_a_minimum_n_design_editors.seat_rename",{minSeatsCount:e.seatDataByLicenseType[N.ud.DESIGN].minSeats}),o===N.ud.FIGJAM&&(0,h.tx)("all_carts.you_need_a_minimum_n_whiteboard_editors.seat_rename",{minSeatsCount:e.seatDataByLicenseType[N.ud.FIGJAM].minSeats}),o===N.ud.DEV_MODE&&(0,h.tx)("all_carts.you_need_a_minimum_n_dev_mode_seats",{minSeatsCount:e.seatDataByLicenseType[N.ud.DEV_MODE]?.minSeats||0}),"total"===o&&!!e.minTotalSeats&&((0,l.kc)().org_checkout_min_seat_info_copy?(0,h.tx)("all_carts.minimum_seats",{minTotalSeats:e.minTotalSeats,minDesignSeats:e.seatDataByLicenseType[N.ud.DESIGN].minSeats,seatsText:(0,h.tx)("checkout.seats_text",{numOfSeats:e.minTotalSeats}),designSeatsText:(0,h.tx)("checkout.seats_text",{numOfSeats:e.seatDataByLicenseType[N.ud.DESIGN].minSeats})}):(0,h.tx)("all_carts.you_need_a_minimum_n_editors.seat_rename",{minSeatsCount:e.minTotalSeats}))]})]})}),t.sort(A.AG).map(t=>{let r=y[t],l=e.seatDataByLicenseType[t],o=a[t];return void 0===r||void 0===l||void 0===o?(0,s.jsx)(s.Fragment,{}):(0,s.jsxs)("div",{children:[(0,s.jsx)(G,{height:16}),(0,s.jsx)("div",{className:"org_self_serve_modals--headerModalBoldText--uhAfp org_self_serve_modals--headerModalText--h0Go9",children:r.headerString}),r.shouldShowDevModeIncludedText&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(G,{height:4}),(0,s.jsx)(n.G,{})]}),(0,s.jsx)(G,{height:12}),(0,s.jsx)(d.s,{"data-testid":t+"-seat_counter",billableProductKey:(0,A.Zx)(t),incrementSeats:()=>m(t),decrementSeats:()=>_(t),numSeats:o,minSeatsCount:l.minSeats,headerText:x.formatMoney(r.totalSeatCount*l.seatUnitCostInCents*(e.showAnnualPrice?12:1)),headerSubText:(0,f.mx)(e.showAnnualPrice,r.totalSeatCount,!0,l.seatUnitCostInCents,e.currency),updateAdditionalSeatsText:e=>p(e,e=>{i({...a,[t]:e})})})]},t)}),(0,s.jsx)(G,{height:18}),(0,s.jsx)("div",{className:"org_self_serve_modals--divider--cY9-m"})]})},"AdditionalEditorsModal");var F=(e=>(e[e.NONE=0]="NONE",e[e.DESIGN=1]="DESIGN",e[e.WHITEBOARD=2]="WHITEBOARD",e[e.TOTAL=3]="TOTAL",e))(F||{});function H({userData:e,checkboxHandler:t}){let[a,l]=(0,r.useState)(0),n=(0,i.wA)(),d=({rect:e,designChecked:s,...r})=>{if(t(r),r.newVal&&a<3){l(e=>e+1);let t=s?(0,h.t)("checkout.switch_seat_from_design_to_devmode"):(0,h.t)("checkout.enabled_devmode");n(j.eB({target:{kind:C.Ui.TEXT,text:t},targetRect:{top:e.top,right:e.right+8,bottom:e.bottom,left:e.left+8,width:e.width,height:e.height},textAlign:"left",position:C.Zj.RIGHT,hideAfterDelay:1e3}))}};return(0,s.jsx)(s.Fragment,{children:e.map((a,r)=>(0,s.jsxs)("div",{"data-testid":"user-data-row",children:[(0,s.jsxs)(q,{rowType:"data",children:[(0,s.jsx)(R.az,{entity:a.user,includeUserEmailAddress:!0,size:24}),(0,s.jsx)(Y,{userInfo:a}),(0,s.jsx)(y.S,{checked:a.designEditor,onChange:e=>{t({userId:a.user.id,type:"designEditor",newVal:e.currentTarget.checked})}}),(0,s.jsx)(m.tB,{checked:a.devMode,className:"org_self_serve_modals--devModeCheckbox--M-CsB",onChange:e=>{d({designChecked:a.designEditor,userId:a.user.id,type:"devMode",newVal:e.currentTarget.checked,rect:e.currentTarget.getBoundingClientRect()})}}),(0,s.jsx)(m.tB,{checked:a.figjamEditor,className:"org_self_serve_modals--figjamCheckbox---FJmg",onChange:e=>{t({userId:a.user.id,type:"figjamEditor",newVal:e.currentTarget.checked})}})]}),r!==e.length-1&&(0,s.jsx)(K,{})]},a.user.id))})}function q({rowType:e,children:t}){let a="footer"===e?["55%","15%","15%","15%"]:["35%","20%","15%","15%","15%"];return(0,s.jsx)(g.Y,{dataTestId:"seat-table-row",verticalAlignItems:"center",horizontalAlignItems:"start",padding:{top:"data"===e?14:16,right:16,bottom:"data"===e?14:16,left:16},backgroundColor:"header"===e?"hover":"default",spacing:0,children:t.map((e,t)=>(0,s.jsx)(g.Y,{width:a[t],horizontalAlignItems:"start",verticalAlignItems:"center",padding:{right:16},children:e},t))})}function K(){return(0,s.jsx)("div",{className:p.s.wFull.colorBgTertiary.h1.$})}function W({teamId:e}){return(0,s.jsx)("div",{className:p.s.w8.h8.bRadius2.minW8.$,style:x.sx.add({backgroundColor:(0,k.$L)(e,k.us)}).$})}function Y({userInfo:e}){return e.teams.length>1?(0,s.jsx)("div",{"data-tooltip-show-immediately":!0,"data-tooltip-type":C.Ib.SPECIAL,"data-tooltip":O,"data-tooltip-team-names":e.teams.map(e=>e.name).join(","),"data-tooltip-team-ids":e.teams.map(e=>e.id).join(","),"data-tooltip-show-right":!0,"data-tooltip-light-mode":!0,children:(0,s.jsx)(v.E,{color:"default",children:(0,h.tx)("all_carts.editor_table.multiple_teams")})}):(0,s.jsxs)(g.Y,{spacing:8,verticalAlignItems:"center",horizontalAlignItems:"start",children:[(0,s.jsx)(W,{teamId:e.teamIds[0]}),(0,s.jsx)("div",{className:p.s.noWrap.ellipsis.overflowHidden.$,children:(0,s.jsx)(v.E,{color:"default",children:e.teams[0]?.name})})]})}(0,I.Ju)(function({users:e,updateSelectedEditors:t,updateAdditionalEmptySeats:a,currency:i,minTotalSeats:l,dispatch:n,seatInfo:u,monthlyPriceByProduct:p}){let[x,y]=(0,r.useState)(e),[f,j]=(0,r.useState)({design:u.design.additionalSeatCount,figjam:u.figjam.additionalSeatCount,dev_mode:u.dev_mode.additionalSeatCount}),b=(0,r.useMemo)(()=>{let e=0,t=0,a=0;for(let s of Object.values(x))s.designEditor&&e++,s.devMode&&a++,s.figjamEditor&&t++;return(e+=f.design,a+=f.dev_mode,t+=f.figjam,l&&e+t+a<l)?3:e<u.design.minCount||e>99?1:t<u.figjam.minCount||t>99?2:0},[f,x,l,u]),A=e=>{f[e]>=99||j(t=>({...t,[e]:t[e]+1}))},C=e=>{f[e]<=0||j(t=>({...t,[e]:t[e]-1}))},I=(e,t)=>{let a=""===e.target.value?0:parseInt(e.target.value);isNaN(a)||j(e=>({...e,[t]:a}))},R=new w.vr(i),k=()=>{n(S.Ce())};return(0,s.jsx)(T.fu,{name:"Select Editors Modal",children:(0,s.jsxs)(M.ey,{size:864,maxHeight:672,hide:()=>n(S.Ce()),className:"org_self_serve_modals--selectEditorsModal--D0yWS",children:[(0,s.jsxs)("div",{className:"org_self_serve_modals--selectEditorModalHeader--wPo15 org_self_serve_modals--headerModalText--h0Go9",children:[(0,h.tx)("checkout.add_or_remove_editors"),(0,s.jsx)(c.s_,{customStyle:{position:"initial"},dispatch:n,onClose:k})]}),(0,s.jsx)(K,{}),(0,s.jsxs)(q,{rowType:"header",children:[(0,s.jsx)(v.E,{color:"default",fontWeight:"medium",children:(0,h.tx)("all_carts.editor_table.Name")}),(0,s.jsx)(v.E,{color:"default",fontWeight:"medium",children:(0,h.tx)("all_carts.editor_table.Teams")}),(0,s.jsxs)(g.Y,{direction:"vertical",spacing:0,horizontalAlignItems:"start",verticalAlignItems:"center",children:[(0,s.jsx)(v.E,{color:"default",fontWeight:"medium",children:(0,h.tx)("general.figma_design")}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v.E,{color:"handoff",fontWeight:"medium",children:(0,h.tx)("general.dev_mode")}),"\xa0",(0,s.jsx)(v.E,{color:"default",fontWeight:"medium",children:(0,h.tx)("checkout.dev_mode_included_text_formatted.included")})]})]}),(0,s.jsx)(v.E,{color:"default",fontWeight:"medium",children:(0,h.tx)("general.dev_mode")}),(0,s.jsx)(v.E,{color:"default",fontWeight:"medium",children:(0,h.tx)("general.figjam")})]}),(0,s.jsx)(K,{}),(0,s.jsx)(_.P,{maxHeight:426,children:(0,s.jsx)(H,{userData:Object.values(x),checkboxHandler:({userId:e,type:t,newVal:a})=>{let s={...x[e],[t]:a};"devMode"===t&&a&&(s.designEditor=!1),"designEditor"===t&&a&&(s.devMode=!1),y(t=>({...t,[e]:s})),(0,E.Cu)({name:"org_checkout_select_editors_checkbox",licenseType:t,checked:a})}})}),(0,s.jsx)(K,{}),(0,s.jsxs)(q,{rowType:"footer",children:[(0,s.jsxs)(g.Y,{spacing:0,direction:"vertical",horizontalAlignItems:"start",verticalAlignItems:"center",children:[(0,s.jsx)(v.E,{color:"default",fontWeight:"medium",children:(0,h.tx)("all_carts.add_additional_editors.seat_rename")}),(0,s.jsx)(v.E,{fontWeight:"regular",color:"secondary",children:(0,h.tx)("all_carts.add_additional_editors_description.seat_rename")})]}),(0,s.jsx)(d.s,{billableProductKey:N.ud.DESIGN,incrementSeats:()=>A(N.ud.DESIGN),decrementSeats:()=>C(N.ud.DESIGN),numSeats:f.design,minSeatsCount:0,headerText:"",headerSubText:"",updateAdditionalSeatsText:e=>I(e,N.ud.DESIGN)}),(0,s.jsx)(d.s,{billableProductKey:N.ud.DEV_MODE,incrementSeats:()=>A(N.ud.DEV_MODE),decrementSeats:()=>C(N.ud.DEV_MODE),numSeats:f.dev_mode,minSeatsCount:0,headerText:"",headerSubText:"",updateAdditionalSeatsText:e=>I(e,N.ud.DEV_MODE)}),(0,s.jsx)(d.s,{billableProductKey:N.ud.FIGJAM,incrementSeats:()=>A(N.ud.FIGJAM),decrementSeats:()=>C(N.ud.FIGJAM),numSeats:f.figjam,minSeatsCount:0,headerText:"",headerSubText:"",updateAdditionalSeatsText:e=>I(e,N.ud.FIGJAM)})]}),(0,s.jsxs)("div",{className:"org_self_serve_modals--selectEditorModalActions--ng3b0 org_self_serve_modals--selectEditorModalFooter--8vKi7",children:[0!==b?(()=>{switch(b){case 0:default:return;case 1:return(0,s.jsx)(v.E,{color:"danger",children:(0,h.tx)("all_carts.you_need_a_minimum_n_design_editors.seat_rename",{minSeatsCount:u.design.minCount})});case 2:return(0,s.jsx)(v.E,{color:"danger",children:(0,h.tx)("all_carts.you_need_a_minimum_n_whiteboard_editors.seat_rename",{minSeatsCount:u.figjam.minCount})});case 3:return(0,s.jsx)(v.E,{color:"danger",children:(0,h.tx)("org_self_serve.purchase_summary.the_organization_plan_requires_at_least_count_editor_seats.seat_rename",{minCount:l})})}})():(0,s.jsx)(v.E,{fontWeight:"regular",color:"secondary",children:(0,h.tx)("all_carts.new_total",{total:R.formatMoney(function(e,t,a){let s=t.design,r=t.figjam,i=t.dev_mode;for(let t in e)e[t].designEditor?s++:e[t].devMode&&i++,e[t].figjamEditor&&r++;return s*a[N.ud.DESIGN]*12+r*a[N.ud.FIGJAM]*12+i*a[N.ud.DEV_MODE]*12}(x,f,p),{showCents:!0})})}),(0,s.jsxs)("div",{className:"org_self_serve_modals--buttonGroup--U5iQn",children:[(0,s.jsx)(o.nR,{onClick:k,children:(0,h.t)("general.cancel")}),(0,s.jsx)(m.$$,{onClick:()=>{0===b&&(a(f),t(x),n(S.Ce()))},disabled:0!==b,children:(0,h.t)("checkout.update_seats")})]})]})]})})},"SelectEditorsModal")},917296:(e,t,a)=>{a.d(t,{W:()=>p,_:()=>h});var s=a(104076),r=a(511570),i=a.n(r),l=a(555013),n=a(679359),d=a(652539),o=a(192075),c=a(412469),m=a(468896);if(443==a.j)var _=a(933949);function u(e){return(0,s.jsx)("div",{style:{height:e.height||12}})}function p(){return(0,s.jsx)("span",{children:(0,o.tx)("org_self_serve.review_step.i_agree_to_msa_and_renewal_links",{msaLink:(0,s.jsx)(l.CY,{href:"/ssa",target:"_blank",trusted:!0,children:(0,o.tx)("org_self_serve.review_step.software_services_agreement")}),renewalLink:(0,s.jsx)(l.CY,{href:(0,o.dS)("/renewal-and-cancellation"),target:"_blank",trusted:!0,children:(0,o.tx)("org_self_serve.review_step.renewal_and_cancellation_terms")})})})}function h(e){let t=new c.vr(e.currency);return(0,s.jsx)("div",{className:m.jg,children:(0,s.jsxs)("div",{className:i()(m.M7,m.Et),children:[(0,s.jsxs)("div",{className:m.cc,children:[(0,s.jsx)(d.B,{svg:_.A,className:m.O2,useOriginalSrcFills_DEPRECATED:!0,autosize:!0,width:"32px",height:"32px"}),(0,s.jsx)("div",{className:m.W,children:(0,o.tx)("org_self_serve.confirmation_step.you_re_all_set")})]}),(0,s.jsxs)("div",{className:m.Jo,children:[(0,s.jsx)("div",{className:m.Qv,children:(0,o.tx)("org_self_serve.confirmation_step.order_confirmation_message")}),(0,s.jsx)(u,{height:24}),(0,s.jsx)("div",{className:m.aK}),(0,s.jsx)(u,{height:24}),(0,s.jsxs)("div",{className:m.N5,children:[(0,s.jsxs)("div",{className:m.I1,children:[(0,o.tx)("org_self_serve.confirmation_step.total_amount_to_be_charged_to_card_ending_in_last4",{last4:e.orgPayment.last4}),(0,s.jsx)("span",{className:m.iv,children:t.formatMoney(e.totalCents,{showCents:!1})})]}),(0,s.jsx)(u,{height:24}),(0,s.jsx)("div",{className:m.aK}),(0,s.jsx)(u,{height:32}),(0,s.jsxs)("div",{className:m.Ed,children:[!e.orgMigrated&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.kt,{}),(0,s.jsx)("div",{className:m.nm,children:(0,o.tx)("org_self_serve.confirmation_step.we_re_setting_up_your_organization")})]}),(0,s.jsx)(l.$$,{disabled:!e.orgMigrated,className:m.Xq,onClick:e.onFileBrowserClick,dataTestId:"go-to-file-browser-button",children:(0,o.tx)("org_self_serve.confirmation_step.go_to_the_file_browser")})]})]})]})]})})}},103378:(e,t,a)=>{a.r(t),a.d(t,{PromoReviewPage:()=>x});var s=a(104076),r=a(903927),i=a(572761),l=a(640718),n=a(101880),d=a(192075),o=a(239904),c=a(147046),m=a(483200),_=a(432135),u=a(111297),p=a(412469),h=a(71004);function x(e){let{selectedView:t,promo:a}=e,x=(0,r.wA)(),g=(0,h.Ud)({teamId:t.teamId}),y=()=>{(0,i._H)(),x(m.Ay({promo:null})),x(c.sf(e.selectedView.previousView||{view:"team",teamId:t.teamId}))},v=()=>{x(_.S_({teamId:t.teamId,teamName:t.teamName,promoCode:a?.code||"",onSuccess:y,onError:y}))};return a?(0,s.jsx)(u.fu,{name:"Redeem Promo Code > Confirm",properties:{teamId:t.teamId},children:(0,s.jsxs)("div",{className:"promo_modals--promoReviewInner--O81Uu",children:[(0,s.jsx)("div",{className:"promo_modals--cancelRow--Zrs8S",children:(0,s.jsx)("button",{type:"button",className:"promo_modals--cancelButton--ho2Ks text--fontPos11--2LvXf text--_fontBase--QdLsd",onClick:y,children:(0,d.tx)("promo.promo_review.cancel")})}),(0,s.jsx)("div",{className:"promo_modals--promoReviewTitle--fatmf text--fontPos20--Bcz97 text--_fontBase--QdLsd",children:(0,d.tx)("promo.promo_review.redeem_your_days_of_free_professional_plan",{days:a.promo_value})}),(0,s.jsx)("div",{className:"promo_modals--promoReviewDescription--uLn0D text--fontPos13--xW8hS text--_fontBase--QdLsd",children:(0,d.tx)("promo.promo_review.any_additional_editors_invited_to_selected_view_team_name_will_also_be_free_of_charge_for_the_next_days.seat_rename",{teamName:t.teamName,days:a.promo_value})}),(0,s.jsx)("div",{children:(0,s.jsx)(n.x,{isLoading:g,children:()=>(0,s.jsx)(l.o,{children:(0,s.jsx)(o.d,{selectedView:t,onClickConfirm:v,currency:(0,p.LN)(),canSeeBillingAddressExp:!1})})})})]})}):(y(),null)}},755462:(e,t,a)=>{a.d(t,{m:()=>N});var s=a(104076),r=a(716976),i=a(903927),l=a(382629),n=a(638004),d=a(929302),o=a(91478),c=a(268389),m=a(293422);if(443==a.j)var _=a(995639);var u=a(883765),p=a(6817),h=a(236631),x=a(352630),g=a(192075),y=a(911990);if(443==a.j)var v=a(542663);var f=a(366535),S=a(781611),j=a(959834),T=a(134798);let E=(0,j.Ju)(function(e){let{seatTypes:t,additionalSeatCounts:a,setAdditionalSeats:i,open:n,onClose:_}=e,x=d.hS({open:n,onClose:_}),[v,f]=(0,r.useState)(a),j=e=>t=>{f((0,T.$$)(v,t,e))},E=j(1),N=j(-1),b=r.useCallback(e=>t=>f((0,T.$$)(v,e,t-(v[e]||0))),[v]);return(0,s.jsx)(o.bL,{manager:x,width:264,htmlAttributes:{"data-testid":"additional-seats--modal"},children:(0,s.jsxs)(c.vo,{children:[(0,s.jsx)(c.Y9,{children:(0,s.jsx)(c.hE,{children:(0,g.tx)("checkout.additional_seats.add_or_remove_unassigned_seats")})}),(0,s.jsxs)(c.nB,{children:[(0,s.jsx)("div",{className:h.s.pt8.pb24.colorTextSecondary.$,children:(0,s.jsx)("p",{children:(0,g.tx)("checkout.additional_seats.pre_purchase_seats_for_your_team_to_help_you_budget_and_save_time_later_on")})}),(0,s.jsx)(y.Y,{direction:"vertical",spacing:16,padding:{bottom:16},children:Object.keys(v).sort(S.AG).map(e=>(0,l.uy)(t[e])||(0,l.uy)(v[e])?null:(0,s.jsx)("div",{"data-testid":`additional-seats--${e}`,children:(0,s.jsx)(p.s,{billableProductKey:e,numSeats:v[e],minSeatsCount:0,headerText:(0,g.t)("checkout.additional_seats.seat_label",{seatType:t[e].displayName}),headerSubText:(0,g.t)("checkout.price_per_month",{price:t[e].displayPrice}),incrementSeats:()=>E(e),decrementSeats:()=>N(e),updateAdditionalSeatsText:(0,p.K)(b(e))})},e))})]}),(0,s.jsx)(c.wi,{children:(0,s.jsxs)(c.jk,{children:[(0,s.jsx)(m.$n,{variant:"secondary",onClick:_,htmlAttributes:{"data-testid":"additional-seats--cancel"},children:(0,g.tx)("checkout.additional_seats.cancel")}),(0,s.jsx)(m.$n,{variant:"primary",onClick:()=>{u.az.trackDefinedEvent("monetization_upgrades.cart_additional_seats_changed_in_checkout",{additionalSeatCountsBefore:JSON.stringify(a),additionalSeatCountsAfter:JSON.stringify(v),tier:e.tier}),i(v),_()},htmlAttributes:{"data-testid":"additional-seats--confirm"},children:(0,g.tx)("checkout.additional_seats.confirm")})]})})]})})},"AdditionalSeatsModal");function N({seatTypes:e,additionalSeatCounts:t,setAdditionalSeats:a,tier:r}){let l=(0,i.wA)(),d=(0,v.L)(n.e.MONETIZATION_UPGRADES);return(0,s.jsx)(x.$z,{variant:"ghost","aria-label":(0,g.t)("checkout.additional_seats.add_seats_to_assign_later"),htmlAttributes:{"data-testid":"additional-seats--button"},trackingOptions:d,onClick:()=>{l((0,f.to)({type:E,data:{seatTypes:e,additionalSeatCounts:t,setAdditionalSeats:a,tier:r}}))},iconPrefix:(0,s.jsx)(_.A,{}),children:(0,g.tx)("checkout.additional_seats.add_seats_to_assign_later")})}},784219:(e,t,a)=>{a.d(t,{x:()=>l});var s=a(104076),r=a(236631),i=a(659062);function l({title:e,children:t,dataTestId:a}){return(0,s.jsxs)("div",{style:i.sx.p24.colorBg.add({borderRadius:"13px",height:"fit-content"}).$,"data-testid":a,children:[e&&(0,s.jsx)("h3",{className:r.s.mb16.fontMedium.font15.$,children:e}),t]})}},183058:(e,t,a)=>{a.d(t,{j:()=>w});var s=a(104076),r=a(659062),i=a(555013),l=a(236631),n=a(192075),d=a(244205),o=a(608175),c=a(984887),m=a(784219);function _(e){let t=e.shippingAddress&&!(0,c.$V)(e.shippingAddress);return(0,s.jsxs)(m.x,{title:(0,n.t)("checkout.cart_plan_details.subtitle"),dataTestId:"cart-plan-details",children:[(0,s.jsx)(u,{header:e.tier===o.Ju.ORG?(0,n.t)("checkout.cart_plan_details.organization_name"):(0,n.t)("checkout.cart_plan_details.team_name"),value:e.displayName,dataTestId:"cart-plan-details-plan-name"}),e.legalName&&(0,s.jsx)(u,{header:(0,n.t)("checkout.cart_plan_details.legal_name"),value:e.legalName,dataTestId:"cart-plan-details-legal-name"}),(0,s.jsx)(u,{header:(0,n.t)("checkout.cart_plan_details.invoice_email"),value:e.userEmail,dataTestId:"cart-plan-details-invoice-email"}),e.billingAddress&&(0,s.jsx)(u,{header:(0,n.t)("checkout.cart_plan_details.billing_address"),value:p(e.billingAddress),dataTestId:"cart-plan-details-billing-address"}),t&&(0,s.jsx)(u,{header:(0,n.t)("checkout.cart_plan_details.shipping_address"),value:p(e.shippingAddress),dataTestId:"cart-plan-details-shipping-address"}),(0,s.jsx)(i.Ph,{onClick:e.navigateToEditDetails,className:l.s.font13.py12.$,trackingProperties:{trackingDescriptor:d.c.EDIT_PLAN_DETAILS},"data-testid":"cart-plan-details-edit-details",trusted:!0,children:(0,n.tx)("checkout.cart_plan_details.edit_details")})]})}function u({header:e,value:t,dataTestId:a}){return(0,s.jsxs)("div",{className:l.s.flex.flexColumn.py16.bb1.bSolid.colorBorder.itemsStart.$,"data-testid":a,children:[(0,s.jsx)("p",{className:l.s.font13.lh24.spacingWide.colorTextSecondary.pb4.$,children:e}),(0,s.jsx)("p",{className:l.s.font13.lh24.colorText.breakWord.$,children:t})]})}function p(e){return[e?.line1,e?.line2,e?.city,e?.region,e?.country,e?.postal_code].filter(function(e){return e}).join(", ")}var h=a(716976),x=a(951002),g=a(989941),y=a(623411),v=a(827695),f=a(352630),S=a(917296),j=a(104034),T=a(430230);let E=(0,s.jsx)(i.Us,{target:"_blank",trusted:!0,href:"/pricing",children:(0,n.tx)("checkout.monthly_price")});function N({title:e,countByBillableProductKey:t,billingInterval:a,currency:i,taxPercent:_,isRequestPending:u,tier:p,onSubmit:x,onSubmitTrackingProperties:E}){let[N,A]=h.useState(!1),w=u||!N,C=(0,s.jsx)(g.S,{label:(0,s.jsx)(y.J,{children:(0,s.jsx)("span",{className:l.s.font13.$,children:p===o.Ju.ORG?(0,s.jsx)(S.W,{}):(0,s.jsx)(j.Um,{})})}),checked:N,onChange:A}),I=(0,s.jsx)("div",{className:l.s.flex.justifyCenter.itemsCenter.$,"data-testid":"cart-review-submit-loading",children:(0,s.jsx)(v.k,{})});return(0,s.jsxs)(m.x,{title:e,dataTestId:"cart-review",children:[(0,s.jsx)("div",{className:l.s.mt16.$,children:(0,s.jsx)(T.O,{countByBillableProductKey:t,billingInterval:a,currency:i,taxPercent:_??0,isCartReviewSummary:!0,tier:p})}),(0,s.jsx)(b,{tier:p,isAnnual:a===c.NW.YEAR}),(0,s.jsx)("div",{className:l.s.my24.$,style:r.sx.add({marginLeft:"-10px"}).$,"data-testid":"cart-review-terms-checkbox",children:C}),(0,s.jsx)(f.lR,{onClick:x,disabled:w,htmlAttributes:{"data-testid":"cart-review-submit-button"},trackingProperties:{trackingDescriptor:d.c.COMPLETE_PURCHASE,...E},children:u?I:(0,n.tx)("checkout.complete_purchase")})]})}function b({tier:e,isAnnual:t}){let a=e===o.Ju.ORG?"https://help.figma.com/hc/articles/360040328293-Manage-billing-on-the-Organization-and-Enterprise-plans":"https://help.figma.com/hc/articles/360041061034-Manage-billing-on-the-Professional-plan";return(0,s.jsx)("div",{className:l.s.mt24.$,"data-testid":"cart-review-upgrade-information-banner",children:(0,s.jsxs)("div",{className:l.s.py8.px16.colorBgSecondary.bRadius5.flex.flexColumn.gap4.$,children:[(0,s.jsx)("p",{className:l.s.textBodyMediumStrong.$,children:(0,n.tx)("checkout.how_do_new_seat_additions_and_upgrades_work")}),(0,s.jsx)("p",{children:function(e,t){switch(e){case o.Ju.ORG:return(0,n.tx)("checkout.cart_review_upgrade_info_org");case o.Ju.PRO:return t?(0,n.tx)("checkout.cart_review_upgrade_info_pro_annual",{monthlyPriceLink:E}):(0,n.tx)("checkout.cart_review_upgrade_info_pro_monthly");default:(0,x.wc)(e)}}(e,t)}),(0,s.jsx)(i.Ph,{className:l.s.textBodyMediumStrong.$,style:r.sx.add({height:"16px"}).$,target:"_blank",href:a,trusted:!0,children:(0,n.tx)("checkout.learn_more")})]})})}var A=a(785034);function w(e){return(0,s.jsxs)("div",{style:r.sx.grid.add({gridTemplateColumns:"400px 1fr",gap:"48px"}).$,"data-testid":"cart-review-step",children:[(0,s.jsx)(_,{...e}),e.hasUpgradeSucceeded?(0,s.jsx)(A.f,{}):(0,s.jsx)(N,{...e})]})}},134798:(e,t,a)=>{a.d(t,{$$:()=>h,Ed:()=>x,MZ:()=>c,WQ:()=>d,f8:()=>n,md:()=>o,n5:()=>p,wh:()=>m});var s=a(385446),r=a.n(s),i=a(649693),l=a(418149);let n=1,d=1;function o(e,t){let a={};for(let s of Object.keys(e)){let r=e[s]||"";t.includes(s)&&(0,i.dA)(r)&&(a[s]=r)}return a}function c(e,t,a){return{minimumPaidSeats:1,defaultAdditionalSeatType:i.ud.EXPERT,selectedTeamIds:[e],selectedUserSeatTypes:t,additionalSeatCounts:a}}function m(e,t,a){return{minimumPaidSeats:1,defaultAdditionalSeatType:i.ud.EXPERT,selectedTeamIds:e,selectedUserSeatTypes:t,additionalSeatCounts:a}}function _(e){return{type:"error",message:e}}function u(e){return{type:"success",value:e}}function p(e,t){var a,s,r;switch(t.type){case"changeSeatType":return a=t.userId,s=t.seatType,a in e.selectedUserSeatTypes?u({...e,selectedUserSeatTypes:{...e.selectedUserSeatTypes,[a]:s}}):_(`Tried to change seat for not-present user ${a}`);case"setAdditionalSeats":return Object.values(r=t.additionalSeatCounts).some(e=>e<0)?_("Blocked attempt to set negative additional seats"):u({...e,additionalSeatCounts:r})}}function h(e,t,a){return{...e,[t]:Math.max(0,(e[t]||0)+a)}}function x(e){let t=new Set(l.N_.toArray()),a=new Set(Object.keys(e));return!(!r()(t,a)||Object.values(e).find(e=>Number.isNaN(e)||e<0))}},473893:(e,t,a)=>{a.d(t,{z:()=>E});var s=a(104076),r=a(716976),i=a(293422);if(443==a.j)var l=a(827695);if(443==a.j)var n=a(368581);if(443==a.j)var d=a(902892);if(443==a.j)var o=a(623411);var c=a(520741),m=a(236631),_=a(192075),u=a(659062),p=a(503801),h=a(900215),x=a(244205),g=a(111297),y=a(506192),v=a(412469),f=a(984887),S=a(784219),j=a(430230);let T=(0,g.tf)(i.Pw);function E({title:e,countByBillableProductKey:t,tier:a,billingInterval:i,currency:c,buttonText:g,isButtonDisabled:E,isLoading:b,onClickNext:A,onSwitchCurrency:w,onSwitchBillingInterval:C,footer:I,canEnforcePaidSeatMinimum:R,trackingProperties:k}){let P=!!t,M=(0,v._Z)(),O=(0,y.Um)(),[D,L]=function(e,t,a,s){let[i,l]=r.useState(!1),n=r.useCallback((e,t)=>!!(s&&e&&!(0,p.A)(e,t)),[s]);r.useEffect(()=>{i&&!n(t,a)&&l(!1)},[t,a,s,i,n]);let d=r.useCallback(s=>{if(!i){if(n(t,a)){l(!0);return}e(s)}},[t,a,i,n,e]);return[i,d]}(A,t,a,R),B=(0,s.jsx)("div",{className:m.s.flex.justifyCenter.itemsCenter.$,"data-testid":"cart-sidebar-loading",children:(0,s.jsx)(l.k,{})});return(0,s.jsxs)(S.x,{title:e,dataTestId:"cart-sidebar",children:[(0,s.jsx)("div",{className:m.s.mt16.$,children:P?(0,s.jsxs)(s.Fragment,{children:[M&&(0,s.jsxs)("div",{className:m.s.flex.justifyBetween.itemsCenter.pb16.bb1.bSolid.colorBorder.$,"data-testid":"cart-sidebar-currency-switcher",children:[(0,s.jsx)("p",{children:(0,_.tx)("checkout.sidebar.currency_label")}),(0,s.jsx)(h.D,{currency:c,dropdownShown:O,supportedCurrencies:(0,v.B9)(),changeCurrency:e=>{w(e)},shortFormDisplay:!0,paddingOverride:0})]}),C&&P&&(0,s.jsx)("div",{className:m.s.my16.$,style:u.sx.add({marginLeft:"-8px"}).$,"data-testid":"cart-sidebar-billing-interval",children:(0,s.jsxs)(n.b,{legend:(0,s.jsx)(d.q,{children:(0,_.tx)("checkout.sidebar.switch_your_billing_interval")}),value:i,onChange:e=>C(e),children:[(0,s.jsx)(n.c,{value:f.NW.YEAR,label:(0,s.jsxs)(o.J,{className:m.s.flex.itemsCenter.gap16.$,children:[(0,_.tx)("checkout.sidebar.annual")," ",(0,s.jsx)("b",{className:m.s.colorTextSuccess.fontSemiBold.colorBgSuccessTertiary.bRadius2.px4.block.$,style:u.sx.add({fontSize:"10px"}).$,children:(0,_.tx)("checkout.sidebar.save_up_to_20")})]})}),(0,s.jsx)(n.c,{value:f.NW.MONTH,label:(0,s.jsx)(o.J,{children:(0,_.tx)("checkout.sidebar.monthly")})})]})}),(0,s.jsx)("div",{className:m.s.pt16.$,children:(0,s.jsx)(j.O,{countByBillableProductKey:t,billingInterval:i,currency:c,isCartReviewSummary:!1,tier:a})})]}):(0,s.jsx)("p",{className:m.s.colorTextSecondary.$,children:(0,_.tx)("checkout.sidebar.cannot_calculate_subtotal")})}),(0,s.jsxs)("div",{style:u.sx.add({marginTop:"80px"}).$,children:[D&&(0,s.jsx)(N,{}),(0,s.jsx)(T,{onClick:L,disabled:E||b,htmlAttributes:{"data-testid":"cart-sidebar-button"},trackingProperties:{trackingDescriptor:x.c.CART_SIDEBAR,...k},children:b?B:g}),I&&(0,s.jsx)("div",{className:m.s.mt16.$,"data-testid":"cart-sidebar-footer",children:I})]})]})}function N(){return(0,s.jsx)("div",{className:m.s.my8.$,"data-testid":"cart-sidebar-paid-seat-minimum-banner",children:(0,s.jsx)(c._,{color:c.S.WARNING,text:(0,s.jsx)("p",{style:u.sx.lh14.add({fontSize:"9px"}).$,children:(0,_.tx)("checkout.sidebar.paid_seat_minimum_banner")})})})}},239904:(e,t,a)=>{a.d(t,{d:()=>k});var s=a(104076),r=a(716976),i=a(903927),l=a(989941),n=a(623411),d=a(219199),o=a(555013),c=a(679359),m=a(192075),_=a(525980),u=a(104034),p=a(459494),h=a(293422),x=a(236631),g=a(147046),y=a(366535),v=a(111297),f=a(229910),S=a(984887);function j(e){return"org"===e.variant?(0,s.jsx)(E,{...e}):(0,s.jsx)(N,{...e})}let T=(0,v.tf)(h.$n);function E(e){let t=e.canSeeBillingAddressExp&&e.billingAddress,a=e.canSeeBillingAddressExp&&e.shippingAddress&&!(0,S.$V)(e.shippingAddress);return(0,s.jsxs)("div",{children:[(0,s.jsx)(b,{subtitle:(0,m.tx)(e.canSeeBillingAddressExp?"org_self_serve.review_step.details":"org_self_serve.review_step.organization_details")}),(0,s.jsx)(A,{header:(0,m.tx)(e.canSeeBillingAddressExp?"org_self_serve.review_step.company_legal_name":"org_self_serve.review_step.company_name"),value:e.legalName}),(0,s.jsx)(A,{header:(0,m.tx)(e.canSeeBillingAddressExp?"org_self_serve.review_step.display_name":"org_self_serve.review_step.company_display_name"),value:e.displayName}),!e.canSeeBillingAddressExp&&(0,s.jsx)(A,{header:(0,m.tx)("org_self_serve.review_step.domain"),value:e.domain}),!e.canSeeBillingAddressExp&&e.totalTeams>0&&(0,s.jsx)(A,{header:(0,m.tx)("org_self_serve.review_step.teams"),value:e.totalTeams.toString()}),e.canSeeBillingAddressExp&&(0,s.jsx)(A,{header:(0,m.tx)("org_self_serve.review_step.billing_email"),value:e.userEmail}),e.canSeeBillingAddressExp&&(0,s.jsx)(o.Ph,{onClick:e.navigateToEditOrganizationDetails,trackingEventName:"Edit organization details - checkout flow",trusted:!0,children:(0,m.tx)("org_self_serve.review_step.edit_organization")}),t&&(0,s.jsx)(A,{header:(0,m.tx)("org_self_serve.review_step.billing_address"),value:w(e.billingAddress)}),a&&(0,s.jsx)(A,{header:(0,m.tx)("org_self_serve.review_step.shipping_address"),value:w(e.shippingAddress)}),e.canSeeBillingAddressExp&&(0,s.jsx)(o.Ph,{onClick:e.navigateToEditPaymentDetails,trackingEventName:"Edit payment details - checkout flow",trusted:!0,children:(0,m.tx)("org_self_serve.review_step.edit_payment")})]})}function N(e){let t=(0,i.wA)(),a=(0,i.d4)(e=>e.selectedView),r=e.canSeeBillingAddressExp&&e.billingAddress,l=e.canSeeBillingAddressExp&&e.shippingAddress&&!(0,S.$V)(e.shippingAddress);return(0,s.jsxs)("div",{children:[(0,s.jsx)(b,{subtitle:(0,m.tx)("pro_cart.review.details")}),(0,s.jsx)(A,{header:(0,m.tx)("pro_cart.review.team_name"),value:e.displayName}),(0,s.jsx)(A,{header:(0,m.tx)("pro_cart.review.company_name"),value:e.legalName}),r&&(0,s.jsx)(A,{header:(0,m.tx)("pro_cart.review.billing_address"),value:w(e.billingAddress)}),l&&(0,s.jsx)(A,{header:(0,m.tx)("pro_cart.review.shipping_address"),value:w(e.shippingAddress)}),(0,s.jsx)(T,{variant:"link",onClick:e.canSeeBillingAddressExp?()=>{t(g.sf({...a,paymentStep:S.Vv.PAYMENT_AND_ADDRESS}))}:()=>{t((0,y.to)({type:f.L,data:{modalTitle:(0,m.t)("pro_cart.review.edit_details_modal_header"),displayName:e.displayName,legalName:e.legalName,updateNameImmediately:!1,canSeeBillingAddressExp:e.canSeeBillingAddressExp}}))},trackingEventName:"Edit team details - checkout flow",children:(0,m.tx)(e.canSeeBillingAddressExp?"pro_cart.review.edit_details":"pro_cart.review.edit_all_details")})]})}function b({subtitle:e}){return(0,s.jsx)("h2",{className:x.s.font15.fontMedium.lh24.colorText.$,children:e})}function A({header:e,value:t}){return(0,s.jsxs)("dl",{className:x.s.flex.flexColumn.mt16.$,children:[(0,s.jsx)("dt",{className:x.s.font11.lh16.spacingWide.colorText.$,children:e}),(0,s.jsx)("dd",{className:x.s.font13.lh24.fontMedium.colorText.breakWord.mb16.$,children:t})]})}function w(e){return[e?.line1,e?.line2,e?.city,e?.region,e?.country,e?.postal_code].filter(function(e){return e}).join(", ")}var C=a(463756),I=a(412469),R=a(524254);function k(e){let[t,a]=r.useState(!1),h=new I.vr(e.currency),[x,g]=r.useState(!1),y=(0,i.d4)(e=>e.payment),v=(0,i.d4)(e=>e.payment,(e,t)=>x||e===t),f=(0,i.d4)(t=>e.selectedView.teamId?t.teams[e.selectedView.teamId].name:e.teamName)??"",T=(0,p.Ik)(),E=y.displayName||f,N=y.legalName||f,b=y.billingPeriod===S.tY.STUDENT,A=!!(0,C.p)(e.selectedView,y),w=A||b,k=y.submitPending||!A&&!t,P=(0,_.s)(),{estimatedDesignCost:M,estimatedWhiteboardCost:O}=(0,C.m)({currency:e.currency}),D=y.numWhiteboardEditors,L=M(y.numDesignEditors,y.billingPeriod),B=O(D,y.billingPeriod),U=w?0:y.taxes?.total||L+B,V=new URLSearchParams(d.Ay.location.search),G=V.get("onCompleteRedirectFileKey"),z=V.get("onCompleteRedirectNodeId"),{trackingDescriptor:$,buttonText:F,finePrint:H}=(0,u.V8)({isPromo:A,isEducationTeam:b,claimsEndAtDate:y.promo?.claims_end_at}),q=async t=>{t.preventDefault(),await g(!0),e.onClickConfirm()};return(0,s.jsxs)("div",{className:R.HX,children:[(0,s.jsx)("div",{className:R.PT,children:(0,s.jsx)(j,{displayName:E??"",legalName:N??"",canSeeBillingAddressExp:e.canSeeBillingAddressExp,billingAddress:e.billingAddress,shippingAddress:e.shippingAddress,variant:"team"})}),(0,s.jsxs)("div",{className:R.Bo,children:[(0,s.jsx)("div",{className:R.TV,"data-testid":"review-step-upgrade-title",children:(0,m.tx)(b?"edu.checkout_team_name":T?y.billingPeriod===S.tY.ANNUAL?"pro_cart.review.exp_sticker_shock.upgrade_team_name_to_a_professional_team_yearly":"pro_cart.review.exp_sticker_shock.upgrade_team_name_to_a_professional_team_monthly":"pro_cart.review.upgrade_team_name_to_a_professional_team",{teamName:f})}),(!P||!w)&&(0,s.jsx)(u.$c,{payment:v,currency:e.currency,isPromo:A,isEducationTeam:b,hasCartStickerShock:T}),(0,s.jsx)("div",{className:R.pV}),(0,s.jsx)(o.Kz,{multiple:2}),v.taxes&&!!e.billingAddress&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.Wy,{mainText:(0,m.tx)("pro_cart.info.subtotal"),priceText:h.formatMoney(A?0:v.taxes.sub_total||0,{showCents:!0}),"data-testid":"subtotal-summary"}),(0,s.jsx)(o.Kz,{multiple:1.5}),(0,s.jsx)(u.Wy,{mainText:(0,m.tx)("pro_cart.review.tax"),priceText:h.formatMoney(v.taxes?.tax_total||0,{showCents:!0}),subText:(0,m.tx)("pro_cart.review.tax_percent",{taxPercent:v.taxes.lines[0]?.tax_percent||0}),"data-testid":"tax-summary"}),(0,s.jsx)(o.Kz,{multiple:1.5})]}),(0,s.jsx)(u.Wy,{"data-testid":"confirm-total-summary",mainText:b?(0,m.tx)("pro_cart.review.total"):(0,m.tx)("pro_cart.review.total_due_today"),priceText:h.formatMoney(U,{showCents:!0,showFullFormat:(0,I._Z)()}),subText:A?(0,m.tx)("pro_cart.review.you_will_not_be_charged_during_the_free_period",{days:v.promo.promo_value}):void 0}),(0,s.jsx)(o.Kz,{multiple:2}),(0,s.jsxs)("div",{children:[H,!A&&(0,s.jsx)("div",{className:R.Gn,children:(0,s.jsx)(l.S,{checked:t,onChange:a,label:(0,s.jsx)(n.J,{children:(0,s.jsx)("span",{children:(0,s.jsx)(u.Um,{})})})})})]}),(0,s.jsx)(o.Kz,{multiple:2.5}),(0,s.jsx)(o.Kz,{multiple:2.5}),(0,s.jsx)(o.vd,{className:R.fK,onClick:q,trackingProperties:{teamId:e.selectedView.teamId,inPublishDraftExp:!!(z&&G),trackingDescriptor:$},disabled:k,dataTestId:"confirm-purchase-button",children:y.submitPending?(0,s.jsx)(c.kt,{className:R.S}):F})]})]})}},935835:(e,t,a)=>{a.d(t,{I:()=>m,y:()=>_});var s=a(104076),r=a(555013),i=a(697157),l=a(652539),n=a(192075),d=a(244205),o=a(524254);if(443==a.j)var c=a(100203);var m=(e=>(e.STARTER="starter",e.PRO="pro",e.ORG="org",e))(m||{});function _({type:e,teamName:t,setTeamName:a,onNext:m,upgradeExistingTeam:_,promo:u}){let p={starter:{title:(0,n.tx)("all_carts.create_team.create_a_new_team"),subtitle:(0,n.tx)("all_carts.create_team.after_creating_a_team"),placeholder:(0,n.t)("pro_cart.create_team.enter_a_name_for_your_working_group"),next:(0,n.tx)("all_carts.create_team.create_team"),trackingDescriptor:d.c.SEND_INVITES},pro:{title:(0,n.tx)("pro_cart.create_team.create_a_professional_team"),subtitle:(0,n.tx)("pro_cart.create_team.itll_have_unlimited_files_and_collaborative_features"),placeholder:(0,n.t)("pro_cart.create_team.enter_a_name_for_your_working_group"),next:u?(0,n.tx)("pro_cart.sidebar.next_review"):(0,n.tx)("pro_cart.create_team.next_set_editors.seat_rename"),trackingDescriptor:u?d.c.REVIEW:d.c.SET_EDITORS},org:{title:(0,n.tx)("org_self_serve.create_team_step.create_an_org_team"),subtitle:(0,n.tx)("org_self_serve.create_team_step.itll_have_unlimited_files_and_advanced_security"),placeholder:(0,n.t)("org_self_serve.create_team_step.enter_a_name_for_your_team"),next:(0,n.tx)("org_self_serve.create_team_step.next_select_team"),trackingDescriptor:d.c.SELECT_TEAM}}[e];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:o.Fb,children:p.title}),(0,s.jsx)(r.Kz,{multiple:.5}),(0,s.jsx)("div",{className:o.b0,children:p.subtitle}),(0,s.jsxs)("div",{className:o.F0,children:[(0,s.jsx)(l.B,{svg:c.A,className:o.Pr}),(0,s.jsx)(i.L,{className:o.Zy,onChange:e=>a(e.target.value),value:t,placeholder:p.placeholder})]}),(0,s.jsx)(r.vd,{className:o.eA,onClick:m,trackingProperties:{trackingDescriptor:p.trackingDescriptor},disabled:!t.trim(),children:p.next}),!!_&&(0,s.jsx)(r.Us,{className:o.x,onClick:_,trusted:!0,trackingProperties:{trackingDescriptor:d.c.UPGRADE_EXISTING_TEAM},children:(0,n.tx)("pro_cart.create_team.upgrade_an_existing_team_instead")})]})}},785034:(e,t,a)=>{a.d(t,{f:()=>d});var s=a(104076);if(443==a.j)var r=a(827695);var i=a(236631),l=a(659062),n=a(784219);function d(){return(0,s.jsx)(n.x,{title:null,dataTestId:"loading-cart-card",children:(0,s.jsx)("div",{className:i.s.flex.flexColumn.itemsCenter.justifyCenter.wFull.$,style:l.sx.add({height:"208px"}).$,children:(0,s.jsx)(r.k,{})})})}},430230:(e,t,a)=>{a.d(t,{O:()=>A});var s=a(104076);if(443==a.j)var r=a(951002);if(443==a.j)var i=a(382629);var l=a(638004);if(443==a.j)var n=a(381671);var d=a(833805),o=a(550209),c=a(236631),m=a(192075),_=a(659062),u=a(171660),p=a(373533),h=a(236753),x=a(788499),g=a(502907),y=a(111297),v=a(205729),f=a(649693),S=a(418149),j=a(781611),T=a(412469),E=a(608175),N=a(984887),b=a(563554);function A({countByBillableProductKey:e,billingInterval:t,currency:a,isCartReviewSummary:r,taxPercent:i,tier:l}){let o=(0,v.jv)({billableProductKeys:S.N_,baseQuery:{currency:a,tier:l,renewalTerm:t,unit:t}}),g=(0,v.jv)({billableProductKeys:S.N_,baseQuery:{currency:a,tier:l,renewalTerm:t,unit:N.NW.MONTH}}),[f,T]=(0,d.Ad)(o,g);if(!f.data||!T.data)throw Error("Price data is null");let E=(0,h.s$)(f.data),A=(0,h.s$)(T.data),R=i||0,k=e=>(0,p.up)(e,a,{showCents:r}),P=(0,p.Vh)(e,E),M=(0,p.kV)(e,E,R),O=(0,p.N9)(e,E,R),D=k(P),L=k(M),B=k(O),U=(0,s.jsx)(u.E,{fontWeight:"medium",color:"tertiary",fontSize:11,children:(0,m.tx)("checkout.review_in_tax_disclaimer")}),V=t===N.NW.YEAR;return(0,s.jsx)(y.fu,{name:b.e0.CART_REVIEW_PURCHASE_SUMMARY,properties:{tier:l,billingInterval:t,countBySeatType:(0,x.gS)(e),currency:a,taxPercent:R,subtotal:P,taxTotal:M,total:O},enabled:r,children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:_.sx.add({marginBottom:"24px"}).$,children:Object.keys(e).sort(j.AG).map(t=>(0,s.jsx)(w,{billableProductKey:t,count:e[t]||0,currency:a,isAnnual:V,isCartReviewSummary:r,paymentPrices:E,lineItemPrices:A},t))}),(0,s.jsxs)("div",{className:c.s.flex.justifyBetween.py4.$,"data-testid":"purchase-summary-subtotal",children:[(0,s.jsx)("h3",{className:c.s.fontMedium.if(r,c.s.font13.lh24).$,children:(0,m.tx)("checkout.subtotal")}),(0,s.jsx)("p",{className:c.s.if(r,c.s.font13.lh24).$,children:I({price:D,isCartReviewSummary:r,isAnnual:V})})]}),!r&&(0,s.jsx)(u.E,{fontWeight:"regular",color:"tertiary",fontSize:11,children:(0,m.tx)("checkout.tax_disclaimer_revised",{checkoutStep:U})}),r&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:c.s.flex.justifyBetween.py4.itemsCenter.$,"data-testid":"purchase-summary-taxes",children:[(0,s.jsxs)("div",{className:c.s.flexColumn.$,children:[(0,s.jsx)("h3",{className:c.s.font13.lh24.$,children:(0,m.tx)("checkout.purchase_summary.tax")}),(0,s.jsx)("h3",{className:c.s.colorTextSecondary.font13.lh24.$,children:(0,m.tx)("pro_cart.review.tax_percent",{taxPercent:R})})]}),(0,s.jsx)("p",{className:c.s.font13.lh24.$,children:I({price:L,isAnnual:V,isCartReviewSummary:r})})]}),(0,s.jsxs)("div",{className:c.s.flex.justifyBetween.py4.$,"data-testid":"purchase-summary-total-due",children:[(0,s.jsx)("h3",{className:c.s.fontMedium.font13.lh24.$,children:(0,m.tx)("checkout.purchase_summary.total_due_today")}),(0,s.jsx)("p",{className:c.s.font13.lh24.$,children:I({price:B,isAnnual:V,isCartReviewSummary:r})})]}),(0,s.jsx)("div",{"data-testid":"purchase-summary-plan-renewal",children:(0,s.jsxs)("p",{className:c.s.font13.lh24.flex.$,children:[(0,s.jsx)(n.w,{className:c.s.minW24.$}),(0,s.jsx)(C,{tier:l,isAnnual:V})]})})]})]})})}function w({billableProductKey:e,count:t,currency:a,isAnnual:r,isCartReviewSummary:n,paymentPrices:d,lineItemPrices:_}){if(!(0,f.dA)(e))return(0,o.$D)(l.e.MONETIZATION_UPGRADES,Error(`Received invalid billable product key ${e}`)),null;let u=d[e];if((0,i.uy)(u))return(0,o.$D)(l.e.BILLING_EXPERIENCE,Error(`Received null payment price on purchase summaryfor ${e}`)),null;let p=_[e];if((0,i.uy)(p))return(0,o.$D)(l.e.BILLING_EXPERIENCE,Error(`Received null line item price on purchase summary for ${e}`)),null;let h=new T.vr(a),x=h.formatMoney(u*t,{showCents:n}),y=c.s.font13.lh24,v=(0,m.t)("checkout.price_per_month",{price:h.formatMoney(p)});return(0,s.jsxs)("div",{"data-testid":`purchase-summary-${e}-row`,className:c.s.flex.justifyBetween.py8.bb1.bSolid.colorBorder.if(n,c.s.itemsCenter,c.s.itemsStart).$,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:c.s.if(n,y).$,children:(0,m.tx)("checkout.purchase_summary.cart_line_item",{quantity:t,productLabel:(0,g.tI)(e)})}),(0,s.jsx)("p",{className:c.s.colorTextSecondary.if(n,y).$,children:(0,m.tx)(r?"checkout.product_cost_breakdown_annually":"checkout.product_cost_breakdown_monthly",{price:v,quantity:t})})]}),(0,s.jsx)("p",{className:c.s.if(n,y).$,children:I({price:x,isCartReviewSummary:n,isAnnual:r})})]})}function C({tier:e,isAnnual:t}){switch(e){case E.Ju.ORG:return(0,m.tx)("checkout.purchase_summary.plan_renewal_org");case E.Ju.PRO:return t?(0,m.tx)("checkout.purchase_summary.plan_renewal_pro_annual"):(0,m.tx)("checkout.purchase_summary.plan_renewal_pro_monthly");default:(0,r.wc)(e)}}function I({price:e,isAnnual:t,isCartReviewSummary:a}){return a?e:t?(0,m.t)("checkout.price_per_year",{price:e}):(0,m.t)("checkout.price_per_month",{price:e})}},948058:(e,t,a)=>{a.d(t,{T:()=>V});var s=a(104076),r=a(716976),i=a(999083),l=a(638004),n=a(420680),d=a(282856),o=a(804937),c=a(883765),m=a(72138),_=a(236631),u=a(192075),p=a(963566),h=a(236753),x=a(788499),g=a(542663),y=a(459494),v=a(111297),f=a(608175),S=a(563554),j=a(755462),T=a(903927),E=a(382629),N=a(684742),b=a(293422),A=a(602755),w=a(708669);a(120440);var C=a(624258),I=a(366535),R=a(592726),k=a(826160),P=a(753151);let M="select_seats_table--sidePadding--rdwOD",O="select_seats_table--userColumn--0bg1B",D="select_seats_table--seatColumn--dUkDj",L="select_seats_table--teamColumn--kxWk-",B="select_seats_table--descriptionColumn--nvbAl";function U({user:e,seatTypes:t,selectedSeatType:a,changeSeatType:r,tier:i,teamId:l}){let n=(0,T.wA)(),d=(0,R.TA)(),o=e.id===d,c=(0,y.Dj)(),m=i===f.Ju.PRO&&c(),p=()=>{n((0,I.to)({type:P.Y,data:{user:e,seatTypes:t,selectedSeatType:a,setSelectedSeatType:r,tier:i,teamId:l}}))};if((0,E.uy)(t[a]))return null;let h=(0,s.jsxs)(N.E,{className:"xh8yej3 x12ulsxz x1xijbu4 x133fa97 x19y5rnk xmkeg23 x1y0btm7 x7z60cl xkezfkh","aria-label":(0,u.t)("checkout.edit_user_seat_name",{name:e.handle}),onClick:p,children:[(0,s.jsx)("span",{className:"x1db2dqx",children:(0,s.jsx)(C.BC,{type:a,size:"24"})}),(0,s.jsx)("span",{children:t[a].displayName}),(0,s.jsx)(A.O,{className:"x8x9d4c"})]});return(0,s.jsxs)("tr",{"data-testid":`select_seat_row--${e.id}`,children:[(0,s.jsx)("td",{"aria-hidden":!0,className:M}),(0,s.jsx)("td",{className:O,"data-testid":"select_seats_table_user_cell",children:(0,s.jsx)(k.az,{entity:e,includeUserEmailAddress:!0,size:24,showIsMe:o})}),(0,s.jsx)("td",{className:D,children:m?h:(0,s.jsx)(b.IK,{variant:"ghost","aria-label":(0,u.t)("checkout.edit_user_seat_name",{name:e.handle}),onClick:p,iconPrefix:(0,s.jsx)(C.BC,{type:a,size:"24"}),children:(0,s.jsxs)("span",{className:_.s.flex.justifyBetween.ml2.$,children:[t[a].displayName,(0,s.jsx)(w.k,{})]})})}),i===f.Ju.ORG&&(0,s.jsx)("td",{className:L,children:e.teams}),(0,s.jsx)("td",{className:B,children:t[a].description}),(0,s.jsx)("td",{"aria-hidden":!0,className:M})]})}function V({users:e,seatTypes:t,selectSeatsState:a,changeUserSeatType:T,setAdditionalSeats:E,tier:N}){let b=(0,r.useRef)(null),A=(0,g.L)(l.e.MONETIZATION_UPGRADES),w=(0,p.f)({tableContainerRef:b}),[C,I]=r.useState(a),[R,k]=r.useState(!1),P=r.useMemo(()=>{let t=[...e];return(0,i.v7)(t,e=>e.handle,{isDescending:R}),t},[e,R]),V=(0,h.UL)((0,h.iB)(a.selectedUserSeatTypes)),G=(0,h.UL)(a.additionalSeatCounts),z=(0,y.Dj)(),$=N===f.Ju.PRO&&z();return(0,s.jsx)(v.fu,{name:S.e0.SELECT_SEATS_TABLE,properties:{selectedUserSeatTypes:(0,x.Tj)(C.selectedUserSeatTypes),countBySeatType:(0,x.gS)((0,h.O$)(C.selectedUserSeatTypes,C.additionalSeatCounts)),selectedTeamIds:(0,x.gu)(C.selectedTeamIds),userIds:(0,x.gu)(e.map(e=>e.id))},trackingOptions:A,children:(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"select_seats_table--tableContainer--ft8tm",ref:b,"data-testid":"select-seats-table",children:[(0,s.jsx)(m.P,{maxHeight:w,className:"select_seats_table--scrollContainer--HMiGx",hideScrollbar:!0,horizontalScrollingDisabled:!0,children:(0,s.jsxs)("table",{className:"select_seats_table--table--hBe3G",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{"aria-hidden":!0,className:M}),(0,s.jsxs)("th",{className:O,children:[(0,u.tx)("checkout.select_seats_table.user_column")," ",(0,s.jsx)("div",{className:_.s.inlineBlock.$,"data-testid":"select-seats-table-sort-users-button",children:(0,s.jsx)(n.K,{onClick:()=>k(e=>!e),"aria-label":(0,u.t)("checkout.select_seats_table.sort"),children:R?(0,s.jsx)(d.d,{"data-testid":"select-seats-table-icon-arrow-up"}):(0,s.jsx)(o.Q,{"data-testid":"select-seats-table-icon-arrow-down"})})})]}),(0,s.jsx)("th",{className:D,children:$?(0,u.tx)("checkout.select_seats_table.seat_column_exp"):(0,u.tx)("checkout.select_seats_table.seat_column")}),N===f.Ju.ORG&&(0,s.jsx)("th",{className:L,children:(0,u.tx)("checkout.select_seats_table.team_column")}),(0,s.jsx)("th",{className:B,children:(0,u.tx)("checkout.select_seats_table.description_column")}),(0,s.jsx)("th",{"aria-hidden":!0,className:M})]})}),(0,s.jsx)("tbody",{children:P.map(e=>(0,s.jsx)(U,{user:e,seatTypes:t,selectedSeatType:a.selectedUserSeatTypes[e.id],changeSeatType:t=>{c.az.trackDefinedEvent("monetization_upgrades.user_seat_selection_changed_in_checkout",{targetUserId:e.id,previousSeatType:a.selectedUserSeatTypes[e.id],newSeatType:t,tier:N,teamId:N===f.Ju.PRO?C.selectedTeamIds[0]:void 0}),T(e.id,t)},tier:N,teamId:N===f.Ju.PRO?C.selectedTeamIds[0]:void 0},e.id))})]})}),(0,s.jsxs)("div",{className:_.s.py12.px24.bt1.bSolid.colorBorder.flex.itemsCenter.justifyBetween.$,children:[(0,s.jsx)(j.m,{tier:N,seatTypes:t,additionalSeatCounts:a.additionalSeatCounts,setAdditionalSeats:E}),(0,s.jsx)("p",{children:(0,u.tx)("checkout.select_seats_table.team_members_count",{assignedSeatsText:(0,u.tx)("checkout.select_seats_table.assigned_seats",{count:V}),unassignedSeatsText:(0,u.tx)("checkout.select_seats_table.unassigned_seats",{count:G})})})]})]})})})}},753151:(e,t,a)=>{a.d(t,{Y:()=>x});var s=a(104076),r=a(638004),i=a(929302),l=a(91478),n=a(268389),d=a(236631),o=a(192075),c=a(911990),m=a(772180),_=a(637416),u=a(542663),p=a(111297),h=a(649693);let x=(0,a(959834).Ju)(function(e){let t=(0,u.L)(r.e.MONETIZATION_UPGRADES),{user:a,seatTypes:x,selectedSeatType:g,setSelectedSeatType:y,open:v,onClose:f,tier:S,teamId:j}=e,T=i.hS({open:v,onClose:f});return(0,s.jsx)(p.fu,{name:"Select User Seat Type Modal",properties:{teamId:j},trackingOptions:t,children:(0,s.jsx)(l.bL,{manager:T,width:480,htmlAttributes:{"data-testid":"select-user-seat-type--modal"},children:(0,s.jsx)(n.vo,{children:(0,s.jsx)(n.nB,{children:(0,s.jsxs)(c.Y,{direction:"vertical",spacing:0,padding:{horizontal:8,vertical:16},children:[(0,s.jsx)("div",{className:d.s.mb24.$,children:(0,s.jsx)(_.j,{user:a,text:(0,o.t)("modify_plan_user_seat_modal.choose_seat",{name:a.handle})})}),(0,s.jsx)(m.m,{currentSeatType:g,setNextSeatType:e=>{y(e),f()},availableSeatCounts:null,pricing:Object.fromEntries(Object.entries(x).filter(([e,t])=>e!==h.Gu.VIEW&&!!t).map(([e,t])=>[e,t.displayPrice])),learnMoreLinkHref:"/pricing",displayPricing:!0,canSetCurrentSeatType:!0,tier:S})]})})})})})},"SelectUserSeatTypeModal")},454307:(e,t,a)=>{a.d(t,{kR:()=>E,vU:()=>N});var s=a(104076),r=a(903927),i=a(951002),l=a(883765),n=a(755444),d=a(186180),o=a(192075);if(443==a.j)var c=a(111679);var m=a(147046),_=a(244205),u=a(111297),p=a(134391),h=a(592726),x=a(71004),g=a(608175),y=a(984887),v=a(377026),f=a(524254);function S(e){return(0,s.jsx)(u.$z,{type:"button",className:f.Nd,trackingProperties:{trackingDescriptor:_.c.CANCEL},onClick:e.onClick,dataTestId:"upgrade-breadcrumb-menu-cancel",children:(0,o.tx)("pro_cart.breadcrumbs.cancel")})}var j=(e=>(e[e.PLAN_COMPARISON=0]="PLAN_COMPARISON",e[e.CREATE_TEAM=1]="CREATE_TEAM",e[e.ADD_COLLABORATORS=2]="ADD_COLLABORATORS",e[e.ADJUST_EDITORS=3]="ADJUST_EDITORS",e[e.SET_EDITORS=4]="SET_EDITORS",e[e.PAYMENT_AND_ADDRESS=5]="PAYMENT_AND_ADDRESS",e[e.CONFIRM_PAY=6]="CONFIRM_PAY",e))(j||{});function T(e,t,a,s){let r=t===y.tY.STUDENT,l=[];switch(e){case v.SC.CREATE_AND_UPGRADE:l.push(0),l.push(1),r?l.push(4):a||(l.push(4),l.push(5)),l.push(6);break;case v.SC.UPGRADE_EXISTING_TEAM:s===v.Sc.TEAM?(l.push(3),r||l.push(5)):r?(l.push(0),l.push(3)):a?l.push(0):(l.push(0),l.push(4),l.push(5)),l.push(6);break;case v.SC.CREATE:l.push(1),l.push(2),l.push(0),s===v.Sc.TEAM&&(r?l.push(4):a||(l.push(4),l.push(5)),l.push(6));break;default:(0,i.xb)(e)}return l.map(e=>(function(e){switch(e){case 0:return{step:y.Vv.PLAN_COMPARISON,text:(0,o.t)("pro_cart.breadcrumbs.choose_plan")};case 1:return{step:y.Vv.CREATE_TEAM,text:(0,o.t)("pro_cart.breadcrumbs.create_team")};case 2:return{step:y.Vv.ADD_COLLABORATORS,text:(0,o.t)("pro_cart.breadcrumbs.add_team_members")};case 3:return{step:y.Vv.CHOOSE_PLAN,text:(0,o.t)("pro_cart.breadcrumbs.adjust_editors.seat_rename")};case 4:return{step:y.Vv.CHOOSE_PLAN,text:(0,o.t)("pro_cart.breadcrumbs.set_editors.seat_rename")};case 5:return{step:y.Vv.PAYMENT_AND_ADDRESS,text:(0,o.t)("pro_cart.breadcrumbs.payment_information")};case 6:return{step:y.Vv.CONFIRM_PAY,text:(0,o.t)("pro_cart.breadcrumbs.review")}}})(e))}function E(e,t,a,s,r,i){let l=T(t,a,s,r).map(e=>e.step),n=l.indexOf(e);return i=i||l[0],-1===n?i:l[n+1]}function N(e){let{selectedView:t}=e,{teamId:a,paymentStep:i,teamFlowType:o}=t,_=(0,r.wA)(),u=(0,r.d4)(e=>e.payment.billingPeriod),j=h.iZ()?.id,E=T(o,u,(0,r.d4)(e=>e.payment.promo),e.selectedView.planType||v.Sc.UNDETERMINED),N=E.findIndex(e=>e.step===i);return(0,s.jsxs)("div",{className:f.N6,"data-testid":"cart-breadcrumb-menu-pro",children:[(0,s.jsx)(S,{onClick:()=>{((0,n.sj)(),e.isCampfireCart?(0,x.OI)(_):(0,x.Mt)(_),(0,v.h5)(o)&&null===a&&(0,p.Al)(j),j)?a&&(!t.previousView||"fullscreen"!==t.previousView.view)?_(c._l({workspace:{userId:j,teamId:a,orgId:null},view:{view:"recentsAndSharing"}})):_(m.sf(t.previousView||{view:"recentsAndSharing"})):_(m.sf(t.previousView||(a?{view:"team",teamId:a}:{view:"recentsAndSharing"}))),t.callbackOnClose?.()}}),E.map((r,n)=>(0,s.jsx)(d.On,{selected:i===r.step,number:n+1,text:r.text,canClick:n<N,lightText:!0,onClick:()=>{l.az.trackDefinedEvent("monetization_upgrades.checkout_breadcrumb_navigation",{fromStep:i,toStep:r.step,tier:g.Ju.PRO,isCampfireCart:!!e.isCampfireCart,teamId:a??void 0}),_(m.sf({...t,paymentStep:r.step,billingPeriod:u===y.tY.UNSPECIFIED?void 0:u,planType:(0,v.ck)(o,r.step)?v.Sc.UNDETERMINED:t.planType,teamFlowType:(0,v.jX)(o)&&r.step===y.Vv.PLAN_COMPARISON?v.SC.CREATE_AND_UPGRADE:t.teamFlowType}))}},r.text))]})}},402858:(e,t,a)=>{a.r(t),a.d(t,{TeamUpgradePageBillingRemodel:()=>eW});var s=a(104076),r=a(716976),i=a(903927),l=a(951002),n=a(638004),d=a(883765),o=a(310725),c=a(219199),m=a(653899),_=a(328341),u=a(755444),p=a(833805),h=a(572761),x=a(889438),g=a(1188),y=a(520741),v=a(236631),f=a(256384),S=a(259161),j=a(192075),T=a(659062),E=a(373533),N=a(236753),b=a(788499),A=a(906356),w=a(312156),C=a(183058),I=a(473893),R=a(935835),k=a(785034),P=a(454307),M=a(555013),O=a(524254);function D({disableInviteButton:e,collaborators:t,setCollaborators:a,willSendInvites:r,skipInviteStep:i}){let l=(e,s)=>{s>=t.length||a(t.map((t,a)=>a===s?e:t))};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{className:O.Fb,children:(0,j.tx)("pro_cart.add_collaborators.add_collaborators_to_your_team")}),(0,s.jsx)(M.Kz,{multiple:.5}),(0,s.jsx)("h2",{className:O.b0,children:(0,j.tx)("pro_cart.add_collaborators.well_add_them_to_your_team")}),(0,s.jsx)(M.Kz,{multiple:4}),(0,s.jsxs)("div",{style:T.sx.flex.flexColumn.add({maxWidth:"400px"}).mlAuto.mrAuto.gap12.$,children:[t.map((e,t)=>(0,s.jsx)(M.il,{value:e,onChange:e=>l(e.target.value,t),placeholder:(0,j.t)("pro_cart.add_collaborators.email")},`collaborator-email-input-${t}`)),(0,s.jsx)(M.Us,{onClick:()=>{a([...t,""])},trusted:!0,style:T.sx.alignLeft.font14.fontMedium.$,children:(0,j.tx)("pro_cart.add_collaborators.add_another")})]}),(0,s.jsxs)("div",{style:T.sx.flex.flexColumn.itemsCenter.mlAuto.mrAuto.mt24.gap24.fontMedium.font14.$,children:[(0,s.jsx)(M.vd,{disabled:!!e,style:T.sx.font14.add({height:"44px",width:"110px"}).$,onClick:r,children:(0,j.tx)("pro_cart.add_collaborators.sent_invites")}),(0,s.jsx)(M.Ph,{trusted:!0,onClick:i,style:T.sx.colorTextSecondary.alignCenter.$,children:(0,j.tx)("pro_cart.add_collaborators.skip_for_now")})]})]})}var L=a(307279),B=a(671828),U=a(329065),V=a(944350),G=a(613997);function z({chooseStarterPlan:e,chooseEduPlan:t,chooseProPlan:a,chooseOrgPlan:r,currency:i,updateCurrency:l,upgradeExistingTeam:n}){let d=(0,L.U)(i);return(0,s.jsxs)("div",{style:T.sx.grid.gap16.p36.pb24.selectNone.mxAuto.add({width:"945px",maxWidth:"1049px"}).$,children:[(0,s.jsx)(B.f,{currency:i,chooseStarterPlan:e,chooseEduPlan:t,chooseProPlan:a,chooseOrgPlan:r,updateCurrency:l,withUpgradeExistingTeamOption:n,prices:d,teamPlan:V.Ag.STARTER}),(0,s.jsx)(G.hK,{height:8}),(0,s.jsx)(U.L,{})]})}var $=a(542663),F=a(111679),H=a(729226),q=a(147046),K=a(366535),W=a(483200),Y=a(432135),J=a(443192),Z=a(459494),X=a(244205),Q=a(111297),ee=a(205729),et=a(400136),ea=a(649693),es=a(418149),er=a(134391),ei=a(554886),el=a(537307),en=a(937505),ed=a(592726),eo=a(77975),ec=a(710211),em=a(412469),e_=a(853039),eu=a(71004),ep=a(562311),eh=a(904017),ex=a(469229),eg=a(295253),ey=a(608175),ev=a(984887),ef=a(377026),eS=a(563554),ej=a(181793),eT=a(791400),eE=a(623411),eN=a(989941),eb=a(652539),eA=a(784219),ew=a(249586),eC=a(943325),eI=a(461749),eR=a(689190),ek=a(364616);let eP=(0,Q.h3)(e=>{let{dataTestId:t,children:a,...r}=e;return(0,s.jsx)("select",{...r,"data-testid":t,children:a})});function eM(e){let t=e.paymentMethods.filter(e=>e.type===eC.lB.CARD||e.type===eC.lB.SEPA);return(0,s.jsx)(s.Fragment,{children:t.map(e=>{let t=function(e){if(e.type===eC.lB.CARD)return function(e){let t=e.display_brand in eB?eB[e.display_brand]:(0,j.t)("checkout.other");return`${t} \u2022\u2022\u2022\u2022 ${e.last4}`}(e.object);if(e.type===eC.lB.SEPA)return function(e){let t=e.country?e.country.toUpperCase():(0,j.t)("checkout.other");return`SEPA ${t} \u2022\u2022\u2022\u2022 ${e.last4}`}(e.object);throw Error(`Unknown payment method type: ${e.type}`)}(e),a=(0,N.DS)(e.address);return(0,s.jsxs)("option",{className:v.s.flex.justifyBetween.gap2.$,value:e.id,children:[(0,s.jsx)("span",{className:v.s.font13.$,children:t}),a&&(0,s.jsx)("span",{className:v.s.colorTextSecondary.font13.$,children:` - ${a}`})]},e.id)})})}function eO(e){return(0,s.jsx)("div",{className:eR.ri,children:(0,s.jsxs)("div",{className:v.s.flex.relative.wFull.itemsCenter.$,children:[(0,s.jsx)(eP,{name:"selected_saved_payment_method",trackingFieldName:"SelectExistingPaymentMethod",trackingPopulationLevel:e.selectedPaymentMethod?.id&&e.enableSavedPaymentMethods?ew._R.POPULATED_COMPLETE:ew._R.NOT_POPULATED,onChange:t=>{let a=t.target.value,s=e.paymentMethods.find(e=>e.id===a);s&&e.setSelectedPaymentMethod(s)},value:e.selectedPaymentMethod?.id,children:(0,s.jsx)(eM,{paymentMethods:e.paymentMethods})}),(0,s.jsx)(eb.B,{style:T.sx.add({position:"absolute",right:"16px",pointerEvents:"none",color:"var(--color-icon)",fill:"var(--color-icon)"}).$,svg:ek.A})]})})}function eD(e){let{enableSavedPaymentMethods:t,setEnableSavedPaymentMethods:a}=e,r=(0,s.jsx)(eE.J,{children:(0,s.jsx)("span",{className:v.s.font13.$,children:(0,j.t)("checkout.use_saved_payment_method")})});return(0,s.jsx)("div",{className:v.s.mb6.if(!t,v.s.mb0).$,children:(0,s.jsx)(eN.S,{label:r,onChange:e=>{a(e)},checked:t})})}function eL(e){let{paymentMethods:t,setSelectedPaymentMethod:a,setEnableSavedPaymentMethods:r,enableSavedPaymentMethods:l,selectedPaymentMethod:n}=e,{error:d,errorCode:o}=(0,i.d4)(e=>e.payment),c=!!d&&null===o;return(0,s.jsxs)(eA.x,{title:(0,j.t)("checkout.payment_details"),children:[t.length>0&&(0,s.jsxs)("div",{className:v.s.alignLeft.$,children:[(0,s.jsx)(eD,{enableSavedPaymentMethods:l,setEnableSavedPaymentMethods:r}),l&&(0,s.jsx)(eO,{selectedPaymentMethod:n,enableSavedPaymentMethods:l,setSelectedPaymentMethod:a,paymentMethods:t})]}),(0,s.jsx)("div",{className:v.s.alignLeft.$,children:(0,s.jsx)(eI.S,{billingAddress:e.billingAddress,canSeeBillingAddressExp:e.canSeeBillingAddressExp,createPaymentElement:e.createPaymentElement,error:e.error,hide:e.enableSavedPaymentMethods,isCampfireCart:e.isCampfireCart,legalCompanyName:e.legalCompanyName,nameOnPaymentMethod:e.nameOnPaymentMethod,onRegionalVatGstIdChange:e.onRegionalVatGstIdChange,onVatGstIdChange:e.onVatGstIdChange,paymentError:c?d:void 0,paymentFlow:e.paymentFlow,paymentMethodType:e.paymentMethodType,regionalVatGstId:e.regionalVatGstId,shippingAddress:e.shippingAddress,unmountPaymentElement:e.unmountPaymentElement,updateBillingAddress:e.updateBillingAddress,updateLegalCompanyName:e.updateLegalCompanyName,updateNameOnPaymentMethod:e.updateNameOnPaymentMethod,updateShippingAddress:e.updateShippingAddress,vatGstId:e.vatGstId})})]})}let eB={american_express:"American Express",cartes_bancaires:"Cartes Bancaires",diners_club:"Diners Club",discover:"Discover",eftpos_australia:"Eftpos Australia",interac:"Interac",jcb:"JCB",mastercard:"Mastercard",union_pay:"Union Pay",visa:"Visa"};var eU=a(382629),eV=a(876299),eG=a(134798),ez=a(948058);function e$(e){let t={...e.additionalSeatCounts};return Object.values(e.selectedUserSeatTypes).forEach(e=>{(0,ea.a_)(e)&&e in t&&t[e]++}),{countBySeatType:t,selectedUserSeatTypes:e.selectedUserSeatTypes}}let eF=(e,t,a,s)=>{let[i,l]=(0,r.useState)(()=>{let r=function(e,t,a){let s;let{countBySeatType:r,selectedUserSeatTypes:i}=e||{countBySeatType:{},selectedUserSeatTypes:{}},l=t.map(e=>e.user.id),n=(0,eG.md)(i,l);return t.forEach(e=>{let t=e.user.id;n[t]||(n[t]=e.recommended_seat_type?.key??ea.Gu.VIEW)}),s=(0,eG.Ed)(r)?{...r}:{developer:0,collaborator:0,expert:0},Object.values(n).forEach(e=>{"view"!==e&&(0,eU.Vq)(s[e])&&s[e]>0&&s[e]--}),(0,eG.MZ)(a,n,s)}(a,t,e);return s(e$(r)),r}),n=(0,r.useCallback)(e=>{try{l(t=>{let a=function(e,t){let a=(0,eG.n5)(e,t);switch(a.type){case"success":return a.value;case"validation":throw Error("failed validation");case"error":throw Error("sent error")}}(t,e);return s(e$(a)),a})}catch(e){}},[s]);return{changeUserSeatType:(0,r.useCallback)((e,t)=>{n({type:"changeSeatType",userId:e,seatType:t})},[n]),setAdditionalSeats:e=>n({type:"setAdditionalSeats",additionalSeatCounts:e}),selectSeatsState:i}};function eH({teamId:e,currency:t,renewalTerm:a,eligibleTeamUsers:r,initCampfireSeats:i,onUpdateCampfireSeats:l}){let n=(0,eV.G)({currency:t,tier:ey.Ju.PRO,renewalTerm:a,showCents:!1}),[d]=(0,p.Ad)(n);if(null===d.data)throw Error("Seat types data is null");let o=d.data,{changeUserSeatType:c,selectSeatsState:m,setAdditionalSeats:_}=eF(e,r,i,l),u=r.map(e=>{let t=e.user;return{id:t.id,img_url:t.img_url,handle:t.handle,email:t.email}});return(0,s.jsx)(ez.T,{users:u,seatTypes:o,changeUserSeatType:c,selectSeatsState:m,setAdditionalSeats:_,tier:ey.Ju.PRO})}let eq=ec.M4.Query({fetch:async e=>(await ej.V.getEligibleUpgradeData(e)).data.meta,stalenessPolicy:"never"});function eK(e){let t;let a=(0,ed.iZ)(),l=a?.id,g=(0,u.DC)(),S=(0,i.d4)(e=>e.payment),M=(0,i.d4)(e=>e.teams),O=e.selectedView.paymentStep,L=(0,i.d4)(e=>e.roles.byTeamId),B=(0,eh.D6)("TeamUpgradeCart"),U=B.data?.permission===V.Xn.ADMIN,[G,X]=(0,r.useState)(g?.team_name??""),[el,ec]=(0,r.useState)(er.kt),ej=(0,e_.PS)((0,en.FC)()),eE=(0,Z.e5)({userId:l,teams:Object.values(M),rolesByTeamId:L}),[eN,eb]=(0,r.useState)(!1),[eA,ew]=(0,r.useState)(g?.currency||S.currency||(0,em.LN)()),eC=e=>{ew(e),tc(W.MN({currency:e}))},eI=S.billingPeriod,{editorStatusChanges:eR}=S,{ignoreCurrentPlan:ek}=e.selectedView,eP=e.selectedView.teamId,eM=(0,i.d4)(t=>(0,ex.Np)(t,{...e.selectedView,paymentStep:ev.Vv.CONFIRM_PAY})),eO=(0,i.d4)(t=>(0,ex.Np)(t,{...e.selectedView,paymentStep:ev.Vv.PAYMENT_AND_ADDRESS})),eD=(0,Z.Mh)(),eB=void 0===S.cartSelections,eU=(0,_.ZC)(eB),eV=es.N_.dict(e=>S.cartSelections?.countBySeatType?.[e]||0),eG=eI&&(0,e_.ne)(eI)||ev.NW.YEAR,ez=(0,ee.jv)({billableProductKeys:es.N_,baseQuery:{currency:eA,tier:ey.Ju.PRO,renewalTerm:eG,unit:eG}}),[e$]=(0,p.Ad)(ez),eF=(0,ee.vu)(e$);if(null===eF.data)throw Error("Price data is null");let eK=eF.data,eW=(0,N.s$)(eK),eJ=(0,E.Vh)(eV,eW),[eZ,eX]=(0,r.useState)([]),[eQ,e0]=(0,r.useState)(null),{createPaymentElement:e1,unmountPaymentElement:e5,savePayment:e2,saveWithPaymentMethod:e7,billingAddress:e3,updateBillingAddress:e4,shippingAddress:e9,updateShippingAddress:e6,customerLegalName:e8,setCustomerLegalName:te,nameOnPaymentMethod:tt,setNameOnPaymentMethod:ta,vatGstId:ts,setVatGstId:tr,regionalVatGstId:ti,setRegionalVatGstId:tl,paymentMethodType:tn,error:td}=(0,et.lo)({setupIntentParams:{redirect_url:eM,error_redirect_url:eO,subtotal_estimate:eJ,currency:eA,teamId:eP??void 0},setPaymentMethods:eX,customerInfo:{teamId:eP},paymentFlowSource:et.wn.PRO_UPGRADE,currency:eA,billingPeriod:eI,defaultCountry:(0,em.ub)(),initialBillingAddress:g?.billing_address,initialNameOnPaymentMethod:g?.name_on_payment_method,initialShippingAddress:g?.shipping_address,initialCustomerLegalName:g?.customer_legal_name,initialVatGstId:g?.vat_gst_id,initialRegionalVatGstId:g?.regional_vat_gst_id,teamName:g?.team_name||G,canSeeBillingAddressExp:eD,isCheckout:!0,isCampfireCart:!0}),to=td?.code===et.dl.UNINITIALIZED_STRIPE_ELEMENTS_ERROR,tc=(0,i.wA)(),tm=(0,eu.Ud)({teamId:eP,canSeeBillingAddressExp:eD}),[t_]=(0,p.IT)(eq({teamId:eP}),{enabled:!!eP}),tu="loaded"!==t_.status,tp={user:{id:l,img_url:a.img_url,handle:a.handle,email:a.email},id:"",team_id:eP,recommended_seat_type:{key:ea.ud.EXPERT,license_types:[]}};(0,r.useEffect)(()=>{"loaded"===t_.status&&(0,b.R9)({eligibleTeamIds:[eP],eligibleTeamUsers:t_.data.eligible_team_users,tier:ey.Ju.PRO,step:O})},[t_]);let th=to||S.submitPending,tx=r.useCallback(()=>{tc(q.sf({...e.selectedView,paymentStep:ev.Vv.CHOOSE_PLAN,previousView:e.selectedView.previousView,ignoreCurrentPlan:ek,billingPeriod:eI}))},[tc,e.selectedView,ek,eI]),tg=eP?M[eP]?.name:G,ty=S.displayName||tg;(0,er.pI)({loadingPaidEditors:tm,teamId:eP,teamName:eP?void 0:G,setTeamName:eP?void 0:X,collaborators:eP||e.selectedView.teamFlowType!==ef.SC.CREATE?void 0:el,setCollaborators:eP||e.selectedView.teamFlowType!==ef.SC.CREATE?void 0:ec});let tv=(0,i.d4)(e=>e.currentUserOrgId),tf=ek?null:tv,tS=(0,i.d4)(e=>tf?e.orgById[tf]:null),tj=(0,eT.Q)({currentOrgId:tf,currentTeamId:null}),tT=tj.data?.currentUser?.baseOrgUser?.workspaceUsers,tE=tT?.find(e=>e?.isMainWorkspace)?.workspaceId,{cannotCreateTeamReason:tN}=(0,eo.LM)(tS,tE??null),tb=(0,i.d4)(e=>(0,ep.isOrgUserExternallyRestrictedFromState)(e));(0,m.h)(()=>{tc(J.b({entered_pro_cart_flow:!0}))}),(0,m.h)(()=>{let e=document.createElement("div");return e.style.position="fixed",e.style.inset="0",e.style.background="var(--color-bg-secondary)",e.style.zIndex="-1",document.body.appendChild(e),()=>{document.body.removeChild(e)}});let[tA,tw]=(0,r.useState)(!1);(0,r.useEffect)(()=>{O===ev.Vv.PAYMENT_AND_ADDRESS&&to&&tx()}),(0,r.useEffect)(()=>{O===ev.Vv.CONFIRM_PAY&&!tm&&eB&&(0,d.sx)("pro_cart_selections_undefined_on_review_step",{teamId:eP,userId:l})},[eB,tm,O,l,eP]),(0,r.useEffect)(()=>{O===ev.Vv.CONFIRM_PAY&&eU&&!eB&&(0,d.sx)("monetization_upgrades.hydrated_pro_cart_selections",{teamId:eP,loadingPaidEditors:tm})},[eB,eU,tm,O,eP]);let tC=(0,i.d4)(e=>!!e.user&&(0,x.cn)(e.user));(0,r.useEffect)(()=>{tC&&e.selectedView.isEduTeam?tc(W.Lo({billingPeriod:ev.tY.STUDENT})):e.selectedView.isEduTeam&&tc(W.Lo({billingPeriod:ev.tY.UNSPECIFIED}))},[tc,e.selectedView.isEduTeam,tC]),(0,r.useEffect)(()=>{e.selectedView.teamFlowType===ef.SC.CREATE_AND_UPGRADE&&(tb||tN===eo.z4.TEAM_CREATION_CONTROL)&&(c.Ay.redirect("/"),tc(f.s.error((0,j.t)("team_creation.missing_team_creation_controls"))))},[e.selectedView.teamFlowType,tb,tN,tc]);let tI=S.currencyToSwitch;(0,r.useEffect)(()=>{tI&&ew(tI)},[ew,tI]),(0,r.useEffect)(()=>{eZ[0]&&(e0(eZ[0]),eb(!0))},[eZ,e0,eb]);let tR=eI===ev.tY.STUDENT,tk=el.filter(e=>e&&e.trim()).map(e=>e.trim()),tP=tk.filter(e=>!(0,o.xf)(e)),tM=!!a&&tk.filter(e=>e===a.email).length>0,tO=async t=>{t.preventDefault();let a=new URL(window.location.href).searchParams,s=a.get("onCompleteRedirectFileKey"),r=a.get("onCompleteRedirectNodeId");t.currentTarget&&t.currentTarget.blur();let i=(0,P.kR)(e.selectedView.paymentStep,e.selectedView.teamFlowType,eI,S.promo,e.selectedView.planType||ef.Sc.UNDETERMINED);O===ev.Vv.CREATE_TEAM&&(X(G.trim()),tc(q.sf({...e.selectedView,teamId:null,paymentStep:i,ignoreCurrentPlan:ek,billingPeriod:eI}))),O===ev.Vv.ADD_COLLABORATORS&&(tP.length?tc(f.s.error((0,j.t)("pro_cart.add_collaborators.error.email_is_invalid",{string:tP[0]}))):tM?tc(f.s.error((0,j.t)("team_view.team_permissions_modal.youre_not_able_to_send_an_invite_to_yourself"))):tc(q.sf({...e.selectedView,paymentStep:i,ignoreCurrentPlan:ek,billingPeriod:eI}))),O===ev.Vv.CHOOSE_PLAN?tR?tc(q.sf({...e.selectedView,paymentStep:i,billingPeriod:ev.tY.STUDENT,ignoreCurrentPlan:ek})):(tc(W.Je({editorStatusChanges:eR})),tc(q.sf({...e.selectedView,paymentStep:i,billingPeriod:S.billingPeriod,...s?{searchParams:{onCompleteRedirectFileKey:s,onCompleteRedirectNodeId:r}}:{},ignoreCurrentPlan:ek}))):O===ev.Vv.PAYMENT_AND_ADDRESS&&(tc(W.I2({submitPending:!0})),eN&&eQ?await e7(eQ):await e2(),tc(W.I2({submitPending:!1})))},tD=e.selectedView.teamFlowType===ef.SC.CREATE?()=>{tc((0,ei.KQ)({teamName:G,orgAccess:V.bU.PUBLIC,inviteEmails:tk,teamFlowType:e.selectedView.teamFlowType,onSuccess:()=>{(0,er.Al)(a?.id)},ignoreCurrentPlan:ek}))}:void 0;[ef.SC.CREATE_AND_UPGRADE,ef.SC.UPGRADE_EXISTING_TEAM].includes(e.selectedView.teamFlowType)&&(1===ej.length?t=t=>{t=t||e.selectedView.billingPeriod;let a=ef.SC.UPGRADE_EXISTING_TEAM;tc(q.sf({...e.selectedView,teamFlowType:a,teamId:ej[0].id,paymentStep:(0,P.kR)(e.selectedView.paymentStep,a,t||null,S.promo,ef.Sc.TEAM,ev.Vv.CHOOSE_PLAN),planType:ef.Sc.UNDETERMINED,billingPeriod:t,ignoreCurrentPlan:ek}))}:ej.length>1&&(t=e=>{e&&tc(W.Lo({billingPeriod:e})),tc((0,K.to)({type:A.dR,data:{plan:w.I.PRO,upsellSource:eg.b.UPGRADE_EXISTING_FROM_TEAM_CREATION}}))}));let tL=a&&er.lX({teamId:eP,userId:a.id})?.is3DS;return e.selectedView.teamFlowType===ef.SC.CREATE_AND_UPGRADE&&(tb||tN===eo.z4.TEAM_CREATION_CONTROL)?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)(Q.fu,{name:eS.e0.TEAM_CHECKOUT_FLOW,properties:{teamId:e.selectedView.teamId,planType:e.selectedView.planType,entryPoint:e.selectedView.entryPoint,step:O,currency:eA,renewalTerm:eG,prices:(0,b.Jh)(eK)},enabled:!(tm||tu),trackingOptions:(0,$.L)(n.e.MONETIZATION_UPGRADES),children:(0,s.jsxs)("div",{"data-testid":"team-upgrade-billing-remodel",className:v.s.selectNone.$,children:[(0,s.jsx)(P.vU,{selectedView:e.selectedView,isCampfireCart:!0}),(0,s.jsxs)("div",{style:T.sx.mxAuto.add({padding:"98px 48px 48px",maxWidth:"1400px"}).$,children:[O!==ev.Vv.CREATE_TEAM&&(0,s.jsx)(eY,{step:O,teamName:tg??""}),O===ev.Vv.PLAN_COMPARISON&&(0,s.jsx)(z,{chooseStarterPlan:t?void 0:tD,chooseEduPlan:()=>{eP?tc(W.Vm({teamId:eP})):tc((0,K.to)({type:H.q}))},chooseProPlan:t=>{tc(W.Lo({billingPeriod:t}));let a=(0,ef.h5)(e.selectedView.teamFlowType)?e.selectedView.teamFlowType:ef.SC.CREATE_AND_UPGRADE;tc(q.sf({...e.selectedView,teamFlowType:a,paymentStep:(0,P.kR)(e.selectedView.paymentStep,a,t,S.promo,ef.Sc.TEAM),billingPeriod:t,planType:ef.Sc.TEAM,openInNewTab:!1,ignoreCurrentPlan:ek}))},chooseOrgPlan:()=>{tc(W.Bq({currency:eA,newTeamProps:{teamFlowType:e.selectedView.teamFlowType,newTeamName:G,inviteEmails:tk,previousView:e.selectedView},upsellSource:eg.b.UPGRADE_NEW_TEAM_V2}))},currency:eA,updateCurrency:eC,upgradeExistingTeam:t}),O===ev.Vv.CREATE_TEAM&&(0,s.jsx)(R.y,{type:e.selectedView.teamFlowType===ef.SC.CREATE?R.I.STARTER:R.I.PRO,teamName:G,setTeamName:X,onNext:tO,upgradeExistingTeam:t?()=>t?.(eI):void 0,promo:S.promo}),O===ev.Vv.ADD_COLLABORATORS&&(0,s.jsx)(D,{disableInviteButton:!tk.length,collaborators:el,setCollaborators:ec,willSendInvites:tO,skipInviteStep:()=>{if(ec(er.kt),l){let e=(0,er.lX)({teamId:null,userId:l});e&&(0,er.dT)(l,{...e,newCollaborators:er.kt})}tc(q.sf({...e.selectedView,paymentStep:ev.Vv.PLAN_COMPARISON,ignoreCurrentPlan:ek}))}}),O===ev.Vv.CONFIRM_PAY?(0,s.jsxs)(s.Fragment,{children:[tL&&(0,s.jsx)("div",{className:v.s.mxAuto.alignLeft.mb16.$,children:(0,s.jsx)(y._,{color:y.S.INFORMATION,text:(0,j.t)("pro_cart.review.extra_validation")})}),tm||eB?(0,s.jsx)(k.f,{}):(0,s.jsx)(C.j,{billingAddress:e3,billingInterval:eG,countByBillableProductKey:eV,currency:eA,displayName:ty??"",hasUpgradeSucceeded:tA,isRequestPending:S.submitPending,legalName:S.legalName,navigateToEditDetails:()=>{tc(q.sf({...e.selectedView,paymentStep:ev.Vv.PAYMENT_AND_ADDRESS,previousView:e.selectedView.previousView,ignoreCurrentPlan:ek,billingPeriod:eI}))},onSubmit:()=>{let t=()=>{tw(!0),(0,u.sj)(),(0,eu.OI)(tc),(0,ef.h5)(e.selectedView.teamFlowType)&&null===eP&&(0,er.Al)(l)};if(e.selectedView.teamId&&tR)tc(W.Nj({teamId:e.selectedView.teamId}));else if(e.selectedView.teamId&&S.promo){let a=e.selectedView.teamId;tc(Y.S_({teamId:a,teamName:M[a].name,promoCode:S.promo?.code||"",onSuccess:()=>{t(),(0,h._H)(),tc(W.Ay({promo:null})),l?e.selectedView.previousView?q.sf(e.selectedView.previousView):F._l({workspace:{userId:l,orgId:null,teamId:a},view:{view:"allProjects"}}):tc(q.sf(e.selectedView.previousView||{view:"team",teamId:a}))},onError:()=>{(0,h._H)(),tc(W.Ay({promo:null})),tc(q.sf({...e.selectedView,paymentStep:ev.Vv.PLAN_COMPARISON,ignoreCurrentPlan:ek}))}}))}else{tc(J.b({completed_pro_cart_flow:!0}));let{subtotal:a,taxTotal:s,total:r}=(0,N.ZY)({countBySeatType:eV,applicablePrices:eW,taxPercent:S.taxes?.tax_percent??0}),i=(0,N.GL)({subtotal:a,taxTotal:s,total:r});tc(W.I2({submitPending:!0})),tc((0,Y.gk)({teamId:e.selectedView.teamId,selectedCurrency:eA,teamName:G,teamFlowType:e.selectedView.teamFlowType,invites:tk,hasSelectedStudentTeam:tR,onSuccess:t,displayedCostBreakdown:i,isCampfireCart:!0,inStarterTeamLoopholes:eE,displayedPriceKeys:(0,N.vm)(eK)}))}},onSubmitTrackingProperties:{selectedUserSeatTypes:(0,b.Tj)(S.cartSelections?.selectedUserSeatTypes),countBySeatType:(0,b.gS)(eV),isTeamAdmin:U,...(0,N.ZY)({countBySeatType:eV,applicablePrices:eW,taxPercent:S.taxes?.tax_percent??0})},shippingAddress:e9,taxPercent:S.taxes?.tax_percent,tier:ey.Ju.PRO,title:(0,j.t)("checkout.upgrade_to_a_professional_plan"),userEmail:a?.email||""})]}):(0,s.jsxs)("div",{style:T.sx.grid.add({gridTemplateColumns:"1fr 280px",gap:"48px"}).$,children:[O===ev.Vv.CHOOSE_PLAN&&(tm||tu&&!eE?(0,s.jsx)(k.f,{}):(0,s.jsx)(eH,{teamId:e.selectedView.teamId??"",currency:eA,renewalTerm:eG,eligibleTeamUsers:t_.data?.eligible_team_users??[tp],initCampfireSeats:S.cartSelections,onUpdateCampfireSeats:e=>tc(W.qU({cartSelections:e}))})),O===ev.Vv.PAYMENT_AND_ADDRESS&&(0,s.jsx)(eL,{billingAddress:e3,canSeeBillingAddressExp:eD,createPaymentElement:e1,enableSavedPaymentMethods:eN,error:td,isCampfireCart:!0,legalCompanyName:e8,nameOnPaymentMethod:tt,onRegionalVatGstIdChange:tl,onVatGstIdChange:tr,paymentFlow:et.wn.PRO_UPGRADE,paymentMethodType:tn,paymentMethods:eZ,regionalVatGstId:ti,selectedPaymentMethod:eQ,setEnableSavedPaymentMethods:eb,setSelectedPaymentMethod:e0,shippingAddress:e9,unmountPaymentElement:e5,updateBillingAddress:e4,updateLegalCompanyName:te,updateNameOnPaymentMethod:ta,updateShippingAddress:e6,vatGstId:ts}),[ev.Vv.CHOOSE_PLAN,ev.Vv.PAYMENT_AND_ADDRESS].includes(O)&&(0,s.jsx)(I.z,{billingInterval:eG,buttonText:O===ev.Vv.PAYMENT_AND_ADDRESS?(0,j.t)("pro_cart.sidebar.next_review"):(0,j.t)("pro_cart.sidebar.next_payment_information"),canEnforcePaidSeatMinimum:O===ev.Vv.CHOOSE_PLAN,countByBillableProductKey:eV,currency:eA,isButtonDisabled:th,isLoading:S.submitPending,onClickNext:tO,onSwitchBillingInterval:e=>{d.az.trackDefinedEvent("monetization_upgrades.checkout_change_renewal_term",{teamId:eP??void 0,renewalTerm:e}),tc(W.Lo({billingPeriod:(0,e_.JV)(e)}))},onSwitchCurrency:eC,tier:ey.Ju.PRO,title:(0,j.t)("checkout.your_professional_plan"),trackingProperties:{selectedUserSeatTypes:(0,b.Tj)(S.cartSelections?.selectedUserSeatTypes),countBySeatType:(0,b.gS)(eV),savedPaymentMethodId:eN?eQ?.id:void 0}})]})]})]})})}function eW(e){return(0,s.jsx)(g.tH,{team:n.e.MONETIZATION_UPGRADES,boundaryKey:"TeamUpgradeBillingRemodel",fallback:g.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:el.y4,children:(0,s.jsx)(eK,{...e})})}function eY({step:e,teamName:t}){let a=(0,Z.Dj)(),r=(0,s.jsx)(S.Ph,{href:"/pricing",trackingProperties:{trackingDescriptor:X.c.LEARN_MORE_ABOUT_SEATS},newTab:!0,trusted:!0,children:(0,j.tx)("checkout.learn_more_about_seats")});return(0,s.jsxs)("div",{className:v.s.mb32.$,"data-testid":"cart-pro-header",children:[(0,s.jsx)("h2",{className:v.s.font15.lh24.fontMedium.$,children:function(e,t,a){switch(t=t||(0,j.t)("checkout.select_seats_header.your_team"),e){case ev.Vv.PLAN_COMPARISON:return(0,j.tx)("pro_cart.choose_plan.choose_a_plan_for_your_new_team");case ev.Vv.CHOOSE_PLAN:if(a)return(0,j.tx)("checkout.select_seats_header_exp",{teamName:t});return(0,j.tx)("checkout.select_seats_header",{teamName:t});case ev.Vv.PAYMENT_AND_ADDRESS:return(0,j.tx)("checkout.enter_your_payment_details");case ev.Vv.CONFIRM_PAY:return(0,j.tx)("checkout.everything_look_good");default:(0,l.wc)(e)}}(e,t,a())}),e===ev.Vv.CHOOSE_PLAN&&(0,s.jsx)("p",{className:v.s.colorTextSecondary.font13.mt8.$,children:(0,j.tx)("checkout.select_seats_table.seat_types_have_been_suggested",{learnMoreAboutSeatsLink:r})}),e===ev.Vv.CONFIRM_PAY&&(0,s.jsx)("p",{className:v.s.colorTextSecondary.font13.mt8.$,children:(0,j.tx)("checkout.confirm_your_plan_seats_and_payment_details_then_you_re_all_set")})]})}},377939:(e,t,a)=>{a.r(t),a.d(t,{TierUpgradeFlow:()=>tQ});var s=a(104076),r=a(716976),i=a(903927),l=a(638004),n=a(812714),d=a(120440),o=a(883765),c=a(222377),m=a(219199),_=a(449572),u=a(550209),p=a(1188),h=a(238198),x=a(352630),g=a(192075),y=a(259161),v=a(244205),f=a(984887);let S={[f.fI.SELECT_TEAMS]:{name:(0,g.tx)("org_self_serve.headers.teams_to_upgrade"),getPageTitle:()=>(0,g.tx)("checkout.org_self_serve.select_teams_title"),buttonText:(0,g.tx)("checkout.org_self_serve.next_select_seats")},[f.fI.SELECT_SEATS]:{name:(0,g.tx)("pro_cart.breadcrumbs.set_editors.seat_rename"),getPageTitle:e=>e?(0,g.tx)("checkout.unified_cart.select_seats_header.pro",{teamName:e}):(0,g.tx)("checkout.unified_cart.select_seats_header.org"),pageSubtitle:(0,g.tx)("checkout.unified_cart.select_seats_table.seat_types_have_been_suggested",{learnMoreAboutSeatsLink:(0,s.jsx)(y.Ph,{href:"/pricing",trackingProperties:{trackingDescriptor:v.c.LEARN_MORE_ABOUT_SEATS},newTab:!0,trusted:!0,children:(0,g.tx)("checkout.learn_more_about_seats")})}),buttonText:(0,g.tx)("pro_cart.sidebar.next_payment_information")},[f.fI.PAYMENT_AND_ADDRESS]:{name:(0,g.tx)("pro_cart.breadcrumbs.payment_information"),getPageTitle:()=>(0,g.tx)("checkout.enter_your_payment_details"),buttonText:(0,g.tx)("pro_cart.sidebar.next_review")},[f.fI.REVIEW]:{name:(0,g.tx)("pro_cart.breadcrumbs.review"),getPageTitle:()=>(0,g.tx)("checkout.everything_look_good")}};var j=a(111679),T=a(147046),E=a(657878),N=a(592726),b=a(691138);function A({steps:e,currentStep:t,setStep:a,teamId:r}){let l=(0,i.wA)(),n=N.iZ()?.id,d=(0,E._6)(),o=e.filter(e=>e!==f.fI.ORG_CONFIRMATION);return(0,s.jsxs)("div",{className:"xixxii4 x78zum5 x1vqgdyp xh8yej3 x1t0vds8 xdqyycr x1yjdb4r xso031l x1q0q8m5 xertd99 xhtitgo",children:[(0,s.jsx)(x.e6,{className:"x10l6tqk xomnu4r x1qpfodn xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l",onClick:()=>{let e="teamUpgrade"===d.view?d.previousView:null;r&&e?.view!=="fullscreen"?l(j._l({workspace:{userId:n,teamId:r,orgId:null},view:{view:"recentsAndSharing"}})):l(T.sf(e||{view:"recentsAndSharing"})),"teamUpgrade"===d.view&&d.callbackOnClose?.()},children:(0,g.t)("checkout.cancel")}),(0,s.jsx)("ol",{className:"x78zum5 x6s0dn4 xl56j7k xh8yej3",children:o.map((e,r)=>(0,s.jsx)("li",{children:(0,s.jsxs)(x.e6,{onClick:()=>a(e),"aria-current":e===t?"step":void 0,...{0:{className:"x78zum5 x6s0dn4 xl56j7k xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l"},1:{className:"x78zum5 x6s0dn4 xl56j7k xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l xnbbluu"}}[(e!==t)<<0],children:[(0,s.jsx)("span",{className:b.Q,children:(0,g.t)("checkout.voice_over.steps",{stepNumber:r+1,totalSteps:o.length})}),S[e].name,r<o.length-1&&(0,s.jsx)(h.a,{className:"xe5c7bq"})]})},r))})]})}var w=a(951002),C=a(368581),I=a(902892),R=a(623411),k=a(962856),P=a(821655),M=a(369729),O=a(827695),D=a(755102),L=(e=>(e.CARD_ERROR="card_error",e.ESTIMATE_CALCULATION_ERROR="estimate_calculation_error",e.INVALID_PAID_SEAT_TOTAL="invalid_paid_seat_total",e.INVALID_LEGAL_NAME="invalid_legal_name",e.UPGRADE_ERROR="upgrade_error",e))(L||{}),B=(e=>(e.INIT="init",e.ON_TOGGLE_TEAM="on_toggle_team",e.UPDATE_USER_SEAT_TYPE="update_user_seat_type",e.UPDATE_STATE_FROM_NEW_TEAM_SELECTIONS="update_state_from_new_team_selections",e.UPDATE_ADDITIONAL_SEATS="update_additional_seats",e.UPDATE_DISPLAY_NAME="update_display_name",e.UPDATE_LEGAL_NAME="update_legal_name",e.SET_RENEWAL_TERM="set_renewal_term",e.SET_CURRENCY="set_currency",e.SET_TAX_PERCENT="set_tax_percent",e.SET_ERROR="set_error",e.SET_IS_SUBMITTING="set_is_submitting",e.SET_HAS_DIFFERENT_LEGAL_NAME="set_has_different_legal_name",e))(B||{}),U=a(900215),V=a(506192),G=a(412469),z=a(469229),$=a(608175),F=a(700411),H=a(111297);function q({children:e,trackingProperties:t,...a}){return(0,s.jsx)(x.e6,{...a,...{0:{className:"xt0e3qv xu5wzci x1tk3asg xilcxhb x19y5rnk x10w6t97 x78zum5 x6s0dn4 xl56j7k xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh"},2:{className:"xt0e3qv xilcxhb x19y5rnk x10w6t97 x78zum5 x6s0dn4 xl56j7k xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh xgbcquw x1wei53h"},1:{className:"xt0e3qv xu5wzci x1tk3asg xilcxhb x19y5rnk x10w6t97 x78zum5 x6s0dn4 xl56j7k xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh xh8yej3"},3:{className:"xt0e3qv xilcxhb x19y5rnk x10w6t97 x78zum5 x6s0dn4 xl56j7k xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh xgbcquw x1wei53h xh8yej3"}}[!!a.disabled<<1|!!a.fullWidth<<0],trackingProperties:t,children:e})}let K=(0,H.tf)(function({children:e,disabled:t,...a}){return(0,s.jsx)(F._,{...a,...{0:{className:"xt0e3qv xu5wzci x1tk3asg xilcxhb x19y5rnk x78zum5 x6s0dn4 xl56j7k xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh xxk0z11"},1:{className:"xt0e3qv xilcxhb x19y5rnk x78zum5 x6s0dn4 xl56j7k xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh xgbcquw x1wei53h xxk0z11"}}[!!t<<0],children:e})});function W({title:e,children:t,dataTestId:a,noHeaderMargin:r}){return(0,s.jsxs)("div",{className:"x1a4ebq4 x9h44rk xmkeg23 x1y0btm7 x7z60cl xg7h5cd","data-testid":a,children:[e&&(0,s.jsx)("h2",{...{0:{className:"x12sbs06 xor4psk x1ncjjhx xaoa4km x2i041 x14terfx"},1:{className:"xor4psk x1ncjjhx xaoa4km x2i041 x14terfx xat24cr"}}[!!r<<0],children:e}),t]})}var Y=a(382629),J=a(833805),Z=a(205729),X=a(418149);function Q({currency:e,tier:t,renewalTerm:a,unit:s}){let r=(0,Z.jv)({billableProductKeys:X.N_,baseQuery:{currency:e,tier:t,renewalTerm:a,unit:s??a}}),[i]=(0,J.Ad)(r),l=(0,Z.vu)(i);if(null===l.data)throw Error("Price data is null");return l.data}var ee=a(373533),et=a(236753),ea=a(788499),es=a(502907),er=a(649693),ei=a(781611),el=a(563554);function en({isCartReviewSummary:e=!1,state:t}){let{countBySeatType:a,renewalTerm:r,currency:i,taxPercent:l,tier:n,applicablePriceData:d}=t,o=Q({currency:i,tier:n,renewalTerm:r,unit:f.NW.MONTH}),c=(0,et.s$)(d),m=(0,et.s$)(o),_=l||0,u=t=>(0,ee.up)(t,i,{showCents:e}),p=(0,ee.Vh)(a,c),h=(0,ee.kV)(a,c,_),x=(0,ee.N9)(a,c,_),y=u(p),v=u(h),S=u(x),j=r===f.NW.YEAR;return(0,s.jsx)(H.fu,{name:el.e0.CART_REVIEW_PURCHASE_SUMMARY,properties:{tier:n,renewalTerm:r,countBySeatType:(0,ea.gS)(a),currency:i,taxPercent:_,subtotal:p,taxTotal:h,total:x},enabled:e,children:(0,s.jsxs)("table",{className:"xh8yej3 x1mwwwfo x1gukg7c",children:[(0,s.jsx)("tbody",{children:Object.keys(a).sort(ei.AG).map(t=>(0,s.jsx)(ed,{billableProductKey:t,count:a[t]||0,currency:i,isAnnual:j,isCartReviewSummary:e,paymentPrices:c,lineItemPrices:m},t))}),(0,s.jsxs)("tfoot",{children:[(0,s.jsx)("tr",{className:"x1vi7shn xp6roeo x3ajldb","data-testid":"purchase-summary-subtotal",children:(0,s.jsx)(eo,{label:(0,g.tx)("checkout.subtotal"),amount:ec({price:y,isCartReviewSummary:e,isAnnual:j})})}),e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("tr",{className:"x1vi7shn xp6roeo x3ajldb","data-testid":"purchase-summary-taxes",children:(0,s.jsx)(eo,{label:(0,g.tx)("checkout.purchase_summary.tax"),subtext:(0,g.tx)("pro_cart.review.tax_percent",{taxPercent:_}),amount:ec({price:v,isAnnual:j,isCartReviewSummary:e})})}),(0,s.jsx)("tr",{className:"x1vi7shn xp6roeo x3ajldb","data-testid":"purchase-summary-total-due",children:(0,s.jsx)(eo,{label:(0,g.tx)("checkout.purchase_summary.total_due_today"),amount:ec({price:S,isAnnual:j,isCartReviewSummary:e})})})]})]})]})})}function ed({billableProductKey:e,count:t,currency:a,isAnnual:r,isCartReviewSummary:i,paymentPrices:n,lineItemPrices:d}){if(!(0,er.dA)(e))return(0,u.$D)(l.e.MONETIZATION_UPGRADES,Error(`Received invalid billable product key ${e}`)),null;let o=n[e];if((0,Y.uy)(o))return(0,u.$D)(l.e.BILLING_EXPERIENCE,Error(`Received null payment price on purchase summary for ${e}`)),null;let c=d[e];if((0,Y.uy)(c))return(0,u.$D)(l.e.BILLING_EXPERIENCE,Error(`Received null line item price on purchase summary for ${e}`)),null;let m=new G.vr(a),_=m.formatMoney(o*t,{showCents:i}),p=(0,g.t)("checkout.price_per_month",{price:m.formatMoney(c)});return(0,s.jsx)("tr",{className:"x1vi7shn xp6roeo x3ajldb xso031l x1q0q8m5 xertd99","data-testid":`purchase-summary-${e}-row`,children:(0,s.jsx)(eo,{label:(0,g.tx)("checkout.purchase_summary.cart_line_item",{quantity:t,productLabel:(0,es.tI)(e)}),subtext:(0,g.tx)(r?"checkout.rewrite.product_cost_breakdown_annually":"checkout.rewrite.product_cost_breakdown_monthly",{price:p}),amount:ec({price:_,isCartReviewSummary:i,isAnnual:r})})})}function eo({label:e,subtext:t,amount:a}){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("td",{className:"x1uil0o3",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{children:e}),t&&(0,s.jsx)("p",{className:"x1n0bwc9",children:t})]})}),(0,s.jsx)("td",{className:"x1hr2gdg x1uil0o3",children:(0,s.jsx)("p",{children:a})})]})}function ec({price:e,isAnnual:t,isCartReviewSummary:a}){return a?e:t?(0,g.t)("checkout.price_per_year",{price:e}):(0,g.t)("checkout.price_per_month",{price:e})}function em({state:e,dispatch:t,buttonText:a,canSwitchRenewalTerm:r,onClickNext:n,nextStep:d,onContactSalesClick:o,trackingProperties:c}){let{tier:m,countBySeatType:_,renewalTerm:u,currency:p,cartSelectionError:h,isSubmitting:x}=e,y=!!_,S=(0,G._Z)(),j=(0,V.Um)(),T=(0,E._6)(),N=(0,i.d4)(e=>"teamUpgrade"===T.view?(0,z.Np)(e,{...T,paymentStep:d}):"orgSelfServe"===T.view?(0,z.Np)(e,{...T,step:d}):void(0,w.wc)(T.view)),b=e=>{t({type:B.SET_CURRENCY,payload:{currency:e}})},A=e=>{t({type:B.SET_RENEWAL_TERM,payload:{renewalTerm:e}})};return(0,s.jsxs)(W,{title:m===$.Ju.PRO?(0,g.t)("checkout.your_professional_plan"):(0,g.t)("checkout.your_organization_plan"),dataTestId:"cart-sidebar",noHeaderMargin:!0,children:[(0,s.jsx)("div",{children:y?(0,s.jsxs)(s.Fragment,{children:[S&&(0,s.jsxs)("div",{className:"x78zum5 x1qughib x6s0dn4 xso031l x1q0q8m5 xertd99 x1vi7shn xp6roeo","data-testid":"cart-sidebar-currency-switcher",children:[(0,s.jsx)("p",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l",children:(0,g.tx)("checkout.sidebar.currency_label")}),(0,s.jsx)(U.D,{currency:p,dropdownShown:j,supportedCurrencies:(0,G.B9)(),changeCurrency:e=>{b(e)},shortFormDisplay:!0,paddingOverride:0})]}),r&&y&&(0,s.jsx)("fieldset",{className:"x1vi7shn xp6roeo","data-testid":"cart-sidebar-billing-interval",children:(0,s.jsxs)(C.b,{legend:(0,s.jsx)(I.q,{children:(0,g.tx)("checkout.sidebar.switch_your_billing_interval")}),value:u,onChange:e=>A(e),children:[(0,s.jsx)(C.c,{value:f.NW.YEAR,label:(0,s.jsxs)(R.J,{className:"x78zum5 x6s0dn4 xg2d0mh",children:[(0,g.tx)("checkout.sidebar.annual")," ",(0,s.jsx)(k.E,{variant:"successOutline",size:"md",children:(0,g.tx)("checkout.sidebar.save_up_to_20")})]})}),(0,s.jsx)(C.c,{value:f.NW.MONTH,label:(0,s.jsx)(R.J,{children:(0,g.tx)("checkout.sidebar.monthly")})})]})}),(0,s.jsxs)("div",{children:[(0,s.jsx)(en,{isCartReviewSummary:!1,state:e}),(0,s.jsx)("p",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1rdy4ex xp6roeo x3vvef7",children:(0,g.tx)("checkout.rewrite.tax_disclaimer_revised")})]})]}):(0,s.jsx)("p",{className:"x1n0bwc9",children:(0,g.tx)("checkout.sidebar.cannot_calculate_subtotal")})}),(0,s.jsxs)("div",{className:"x7hzu26",children:[h&&(0,s.jsx)("div",{className:"x1ef8nbk",children:(0,s.jsx)(P.$y,{variant:"warn",children:(0,s.jsx)(M.Q,{children:h.message})})}),a&&(0,s.jsx)(K,{onClick:e=>{e.preventDefault(),n()},disabled:x,href:N,htmlAttributes:{"data-testid":"cart-sidebar-button"},trackingProperties:{trackingDescriptor:v.c.CART_SIDEBAR,...c},trackingOptions:{teamName:l.e.MONETIZATION_UPGRADES,addToRUM:!0},children:x?(0,s.jsx)("div",{className:"x78zum5 xl56j7k x6s0dn4 x1g5ndwp","data-testid":"cart-sidebar-loading",children:(0,s.jsx)(O.k,{})}):a}),m===$.Ju.ORG&&(0,s.jsxs)("div",{className:"x7hzu26 x78zum5 xg2d0mh","data-testid":"cart-sidebar-footer",children:[(0,s.jsx)(D.a,{}),(0,s.jsx)("p",{children:(0,g.tx)("org_self_serve.purchase_summary.have_questions",{contactSales:(0,s.jsx)("button",{type:"button",className:"x1quhyk7",onClick:o,children:(0,g.tx)("org_self_serve.purchase_summary.contact_our_sales_team")})})})]})]})]})}function e_({step:e,teamName:t}){return(0,s.jsxs)("div",{className:"xf1vcxl","data-testid":"cart-header",children:[(0,s.jsx)("h1",{className:"xjz7g13 xuo4v2q xjnky0o xn4joj7 x1ul8uiu",tabIndex:0,children:S[e]?.getPageTitle(t)}),S[e]?.pageSubtitle&&(0,s.jsx)("p",{className:"x1swbamy xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l",children:S[e]?.pageSubtitle})]})}function eu({orgMigrated:e}){return(0,s.jsxs)("div",{className:"xht4xr3 x7iklje xack27t xat24cr x8x9d4c x1a4ebq4 x9h44rk xmkeg23 x1y0btm7 x7z60cl xg7h5cd",children:[(0,s.jsx)("h1",{className:"xjz7g13 xuo4v2q xjnky0o xn4joj7 x1ul8uiu x12sbs06 x2b8uid",children:(0,g.t)("checkout.org_confirmation.title")}),(0,s.jsx)("p",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x12sbs06",children:(0,g.t)("checkout.org_confirmation.body")}),(0,s.jsxs)("div",{className:"x78zum5 x13a6bvl x6s0dn4",children:[!e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(O.k,{}),(0,s.jsx)("div",{className:"x9hsxk x1n0bwc9",children:(0,g.t)("org_self_serve.confirmation_step.we_re_setting_up_your_organization")})]}),(0,s.jsx)(q,{disabled:!e,onClick:()=>{m.Ay.redirect("/files/recent")},children:(0,g.t)("checkout.org_confirmation.button")})]})]})}var ep=a(989941),eh=a(555013),ex=(e=>(e.PRO_UPGRADE="pro_upgrade",e.PRO_CHANGE_PAYMENT="pro_change_payment",e.ORG_UPGRADE="org_upgrade",e.ORG_CHANGE_PAYMENT="org_change_payment",e.COMMUNITY_CHECKOUT="community_checkout",e))(ex||{}),eg=(e=>(e.CREATE_PAYMENT_METHOD_ERROR="create-payment-method-error",e.CREATE_INTENT_ERROR="create-intent-error",e.CONFIRM_INTENT_ERROR="confirm-intent-error",e.CURRENCY_VALIDATION_ERROR="currency-validation-error",e.MISSING_STRIPE_ELEMENTS_ERROR="missing-stripe-elements-error",e.MISSING_PAYMENT_METHOD_ERROR="missing-payment-method-error",e.UNINITIALIZED_STRIPE_ELEMENTS_ERROR="uninitialized-stripe-elements-error",e.STRIPE_ELEMENTS_VALIDATION_ERROR="stripe-elements-validation-error",e))(eg||{});function ey(e){var t;return"object"==typeof e&&null!==e&&"code"in e&&"string"==typeof(t=e.code)&&Object.values(eg).includes(t)&&"message"in e&&"string"==typeof e.message}var ev=(e=>(e.ADDRESS_VALIDATION_ERROR="address-validation-error",e.MISSING_ADDRESS_ERROR="missing-address-error",e.CURRENCY_VALIDATION_ERROR="currency-validation-error",e.MISSING_PAYMENT_METHOD_ERROR="missing-payment-method-error",e.NAME_ON_PAYMENT_METHOD_REQUIRED="name-on-payment-method-required",e.PAYMENT_METHOD_VALIDATION_ERROR="payment-method-validation-error",e.SAVE_PAYMENT_METHOD_ERROR="save-payment-method-error",e.VAT_GST_ID_VERIFICATION_ERROR="vat-gst-id-verification-error",e))(ev||{}),ef=(e=>(e.INIT_SAVED_PAYMENT_METHODS="init_saved_payment_methods",e.SET_ERRORS="set_errors",e.SET_STRIPE_PAYMENT_METHOD="set_stripe_payment_method",e.SET_SAVED_PAYMENT_METHOD="set_saved_payment_method",e.TOGGLE_DIFFERENT_SHIPPING_ADDRESS="toggle_different_shipping_address",e.TOGGLE_USE_SAVED_PAYMENT_METHOD="toggle_use_saved_payment_method",e.UPDATE_BILLING_ADDRESS="update_billing_address",e.UPDATE_NAME_ON_PAYMENT_METHOD="update_name_on_payment_method",e.UPDATE_REGIONAL_VAT_GST_ID="update_regional_vat_gst_id",e.UPDATE_SHIPPING_ADDRESS="update_shipping_address",e.UPDATE_VAT_GST_ID="update_vat_gst_id",e))(ef||{});function eS(e){return Array.isArray(e)&&e.every(ej)}function ej(e){var t;return"object"==typeof e&&null!==e&&"code"in e&&"string"==typeof(t=e.code)&&Object.values(ev).includes(t)&&"message"in e&&"string"==typeof e.message}var eT=a(653899),eE=a(520741),eN=a(679359),eb=a(652539),eA=a(236631),ew=a(659062),eC=a(755444),eI=a(904017),eR=a(943325),ek=a(850896),eP=a(492073),eM=a(338052),eO=a(827999);let eD="stripe-payment-element",eL=(0,eM.D)(e=>{let t=(0,eI.S2)().unwrapOr(null),[a,s]=(0,r.useState)(null),[i,n]=(0,r.useState)(null),[d,c]=(0,r.useState)(null),[m,_]=(0,r.useState)(null),[p,h]=(0,r.useState)(!1),[x,y]=(0,r.useState)(!1),[v,f]=(0,r.useState)(void 0),S=(0,r.useRef)(null),j=(0,eC.Ay)().user_data,T=(0,eO.X)(),E=(0,eO.W)(j);async function N(){if(S.current)return S.current;try{let t=(await (0,eR.eV)()).elements({mode:"setup",paymentMethodCreation:"manual",currency:e.currency,paymentMethodConfiguration:e.stripePaymentMethodConfiguration,...T});return S.current=t,t}catch(e){(0,o.sx)("setup_intent_creation_failed",w(),{forwardToDatadog:!0}),A({error:e,code:eg.UNINITIALIZED_STRIPE_ELEMENTS_ERROR,message:(0,g.t)("payments.errors.error_loading_payment_form")})}}async function b(e){if(d&&!p)return{succeeded:!0,clientSecret:d,customerId:i};try{let{data:{meta:{client_secret:t,customer_id:a}}}=await eP.m.createSetupIntent(e);return(0,o.sx)("setup_intent_creation_attempted",w(),{forwardToDatadog:!0}),c(t),n(a),h(!1),{succeeded:!0,clientSecret:t,customerId:a}}catch(e){return{succeeded:!1,clientSecret:null,customerId:null}}}function A({error:e,code:t,message:a,extra:r={}}){s({code:t,message:a}),t===eg.CURRENCY_VALIDATION_ERROR||(0,ek.At)(e)||(0,ek.VT)(e)||(0,ek.um)(e)||(0,u.$D)(l.e.BILLING,Error(`[Billing] ${"string"==typeof e?e:e.code??"StripeError"}`),t=>{let a="object"==typeof e?{stripe_error_details:(0,u.V5)((0,eR.pV)(e)),...r}:r;return t.setExtras(a),(0,ek.q1)(e)&&(t.setTag("stripe_error_type",e.type),(0,ek.At)(e)&&t.setLevel("warning")),t})}function w(){return{planParentId:t?.key.parentId,paymentFlowSource:e.paymentFlowSource,currency:e.currency,isCampfireCart:!0}}function C(){return document.querySelectorAll("[name*=privateStripeFrame]").length}function I(e){let t;return((0,ek.At)(e)||(0,ek.VT)(e)||(0,ek.um)(e))&&(t=e.message),t??(0,g.t)("payments.errors.confirm_setup_error")}return(0,r.useEffect)(()=>{let t=S.current;t&&t.update({currency:e.currency})},[e.currency]),{createPaymentElement:async(e={})=>{let t=await N();if(!t){let e={code:eg.UNINITIALIZED_STRIPE_ELEMENTS_ERROR,message:(0,g.t)("payments.errors.error_loading_payment_form")};return A({...e,error:"Failed to get stripe elements"}),e}let a=t.getElement("payment")??t.create("payment",E);return a.on("ready",t=>{(0,o.sx)("Payment Form Loaded",{...w(),paymentMethod:v??eR.lB.CARD,availableCurrencies:(0,G.B9)()}),v||f(eR.lB.CARD),e.ready?.(t)}),a.on("change",t=>{let a=t.value?.type;(0,o.sx)("Choose Payment Method Type",{...w(),paymentMethod:a}),f(a),e.change?.(t)}),a.mount(`#${eD}`),null},unmountPaymentElement:async()=>{let e=await N();e?.getElement("payment")?.unmount()},createPaymentMethod:async e=>{if(!S.current){let e={code:eg.MISSING_STRIPE_ELEMENTS_ERROR,message:(0,g.t)("payments.errors.confirm_setup_error")};return A({...e,error:"Cannot create payment method without Stripe elements"}),e}s(null);let{error:t}=await S.current.submit();if(t){let e=I(t),a={code:eg.STRIPE_ELEMENTS_VALIDATION_ERROR,message:e};return s(a),a}(0,o.sx)("Add payment method",{...w(),paymentMethod:v},{forwardToDatadog:!0});let a=await (0,eR.eV)(),{error:r,paymentMethod:i}=await a.createPaymentMethod({elements:S.current,params:{billing_details:e}});if(r){let e={code:eg.CREATE_PAYMENT_METHOD_ERROR,message:I(r)};return A({...e,error:r}),e}return i},confirmIntent:async({paymentMethod:e,createIntentParams:t})=>{if(!e){let e={code:eg.MISSING_PAYMENT_METHOD_ERROR,message:(0,g.t)("payments.errors.confirm_setup_error")};return A({...e,error:"Payment method is required to confirm intent"}),e}let[a,{succeeded:s,clientSecret:r,customerId:i}]=await Promise.all([(0,eR.eV)(),b(t)]);if(!s){let e={code:eg.CREATE_INTENT_ERROR,message:(0,g.t)("payments.errors.confirm_setup_error")};return A({...e,error:"Failed to create Setup Intent to confirm"}),e}let l=C(),d=setInterval(()=>{l!==C()&&((0,o.sx)("Stripe Authentication Modal"),clearInterval(d),y(!0))},1e3),{error:c,setupIntent:m}=await a.confirmSetup({clientSecret:r,redirect:"if_required",confirmParams:{return_url:`https://${window.location.host}`,payment_method:e}});if(clearInterval(d),c){let e={code:eg.CONFIRM_INTENT_ERROR,message:I(c)};return A({...e,error:c}),e}if("succeeded"!==m.status){let e={code:eg.CONFIRM_INTENT_ERROR,message:(0,g.t)("payments.errors.confirm_setup_error")};return A({...e,error:`SetupIntent confirmed with status ${m.status}`}),e}{let e={...m,customer:i};return n(i),_(m),h(!0),e}},paymentMethodType:v,error:a,stripeIntent:m,stripeCustomerId:i,is3ds:x}});var eB=a(309537),eU=a(914790),eV=a(433566);function eG({createPaymentElement:e,unmountPaymentElement:t,paymentElementEventHandlers:a,paymentFlow:i,state:l,dispatch:n,canUpdateVatIds:d,shouldRenderErrors:c=!0}){let[m,_]=(0,r.useState)(!1),{vatGstId:u,regionalVatGstId:p,nameOnPaymentMethod:h,hasDifferentShippingAddress:x,errors:y,stripeError:v,paymentMethodType:f,billingAddress:S,shippingAddressInput:j}=l,T=i===ex.PRO_UPGRADE||i===ex.ORG_UPGRADE,E={paymentFlow:i,paymentMethodType:f,isCampfireCart:!0},N=[...y,v].filter(e=>!!e).map(e=>e.message);return(0,eT.h)(()=>((async function(){await e({ready:e=>{_(!0),a?.ready?.(e)},change:a?.change})})(),()=>{t()})),(0,r.useEffect)(()=>{v&&o.az.trackDefinedEvent("monetization_upgrades.checkout_payment_error",{...E,message:v.message})},[v]),v?.code===eg.UNINITIALIZED_STRIPE_ELEMENTS_ERROR?(0,s.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 xl56j7k x2b8uid",children:[(0,s.jsx)(eb.B,{svg:eV.A,className:"x1w6u5r6 x1fz3pi1 xqql8cr"}),(0,s.jsx)("p",{className:"x1874spd x1t2kcbv x1n0bwc9 x1evy7pa",children:v.message})]}):(0,s.jsxs)("div",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l","data-testid":"stripe-payment-form",children:[c&&N.length>0&&(0,s.jsx)("div",{className:"x1buy44e",children:N.map((e,t)=>(0,s.jsx)("div",{className:"x611mgq",children:(0,s.jsx)(eE._,{color:eE.S.ERROR,"aria-live":"polite",text:e})},t))}),(0,s.jsx)("div",{id:eD}),m?(0,s.jsxs)("div",{style:ew.sx.add({marginTop:"7px"}).if(f&&eR.d2.includes(f),{marginTop:"15px"}).$,children:[(0,s.jsx)(eh.Lf,{value:h,htmlName:"name_on_card",label:(0,g.t)("pro_cart.payment.name_on_payment_method_label"),placeholder:(0,g.t)("pro_cart.payment.name_on_payment_method"),onChange:e=>{n({type:ef.UPDATE_NAME_ON_PAYMENT_METHOD,payload:e.target.value.trim()})},autoCompleteName:"name on payment method",trackingFieldName:"Name On Payment Method",dataTestId:"name-on-payment-method"}),(0,s.jsx)(eB.X,{address:S,updateAddress:e=>{n({type:ef.UPDATE_BILLING_ADDRESS,payload:e})},isBillingAddress:!0,canSeeBillingAddressExp:!0}),d&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eU.A,{onChange:e=>n({type:ef.UPDATE_VAT_GST_ID,payload:e}),country:S.country,vatId:u,isCommunityCheckout:i===ex.COMMUNITY_CHECKOUT}),(0,s.jsx)(eU.A,{onChange:e=>n({type:ef.UPDATE_REGIONAL_VAT_GST_ID,payload:e}),country:S.country,region:S.region,vatId:p,isCommunityCheckout:i===ex.COMMUNITY_CHECKOUT,variant:"regional"})]}),f===eR.lB.SEPA&&(0,s.jsx)("p",{className:"x1n0bwc9 x1j6dyjg x1d3mw78 xqp8s7e",children:(0,g.tx)("pro_cart.payment.sepa_direct_debit_mandate")}),T&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"x78zum5 x6s0dn4 xpgiz1h x13q985h x1u94j8j",style:ew.sx.if(x,{marginBottom:"24px"}).$,"data-testid":"stripe-payment-shipping-address-checkbox",children:(0,s.jsx)(ep.S,{label:(0,s.jsx)(R.J,{children:(0,s.jsx)("span",{className:eA.s.font13.$,children:(0,g.tx)("checkout.i_have_a_different_shipping_address")})}),checked:x,onChange:()=>{n({type:ef.TOGGLE_DIFFERENT_SHIPPING_ADDRESS})}})})}),x&&(0,s.jsx)(eB.X,{address:j,updateAddress:e=>{n({type:ef.UPDATE_SHIPPING_ADDRESS,payload:e})},canSeeBillingAddressExp:!0})]}):(0,s.jsx)("div",{className:"x78zum5 xaehx54 x6s0dn4 xl56j7k",children:(0,s.jsx)(eN.kt,{})})]})}var ez=a(249586),e$=a(364616);let eF=(0,H.h3)(e=>{let{dataTestId:t,children:a,...r}=e;return(0,s.jsx)("select",{...r,"data-testid":t,children:a})});function eH({selectedPaymentMethod:e,setSelectedPaymentMethod:t,paymentMethods:a}){return(0,s.jsx)("div",{className:"x78zum5 xdt5ytf xl56j7k x1n2onr6 xmkeg23 x1y0btm7 x7z60cl xgqun6i x1yjdb4r x9f619 x192jxwq xh8yej3 xn3w4p2 x1gnnqk1 x11ugzjr","data-testid":"payment-method-dropdown",children:(0,s.jsxs)("div",{className:"x78zum5 x1n2onr6 xh8yej3 x6s0dn4",children:[(0,s.jsx)(eF,{className:"x1akne3o xf3scy2 x1yjdb4r x5kalc8 x1vy7i8i x1mvmbdv xjyslct x1iyjqo2 x1se2ifz xfn42iu xng3xce x1r7ld26 x1a2a7pz x1x7eeca",name:"selected_saved_payment_method",dataTestId:"payment-method-select",trackingFieldName:"SelectExistingPaymentMethod",trackingPopulationLevel:e?.id?ez._R.POPULATED_COMPLETE:ez._R.NOT_POPULATED,onChange:e=>{let s=e.target.value,r=a.find(e=>e.id===s);r&&t(r)},value:e?.id,children:a.map(e=>(0,s.jsx)(eq,{paymentMethod:e},e.id))}),(0,s.jsx)(eb.B,{className:"x10l6tqk x1f6937p x47corl x1epfdc x1ja3g5x",svg:e$.A})]})})}function eq({paymentMethod:e}){return(0,r.createElement)("option",{className:"x78zum5 x1qughib x1nfngrj",value:e.id,key:e.id},(0,s.jsx)("span",{className:"xemv814",children:e.payment_method}),e.billing_address&&(0,s.jsx)("span",{className:"x1n0bwc9 xemv814",children:` - ${(0,et.DS)(e.billing_address)}`}))}function eK(e){let{isUsingSavedPaymentMethod:t,savedPaymentMethod:a,savedPaymentMethods:r,errors:i,stripeError:l}=e.state,d=(0,n.kc)().cart_rewrite_full_send_saved_payment,o=()=>{e.dispatch({type:ef.TOGGLE_USE_SAVED_PAYMENT_METHOD})},c=[l,...i].filter(e=>!!e);return(0,s.jsxs)(s.Fragment,{children:[c.length>0&&(0,s.jsx)("div",{className:"x1buy44e",children:c.map((e,t)=>(0,s.jsx)("div",{className:"x611mgq",children:(0,s.jsx)(P.Yy,{variant:"danger","data-testid":"inline-banner",children:(0,s.jsx)(M.Q,{children:e.message})})},t))}),d&&r.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ep.S,{label:(0,s.jsx)(R.J,{children:(0,s.jsx)("span",{className:"xemv814",children:(0,g.t)("checkout.use_saved_payment_method")})}),onChange:()=>{o()},checked:t}),(0,s.jsx)("div",{className:"x19ueytk"}),t&&(0,s.jsx)(eH,{selectedPaymentMethod:a,setSelectedPaymentMethod:t=>{e.dispatch({type:ef.SET_SAVED_PAYMENT_METHOD,payload:t})},paymentMethods:r})]}),(0,s.jsx)("div",{...{0:{},1:{className:"xqtp20y xb3r6kr xg01cxk"}}[!!(d&&t)<<0],children:(0,s.jsx)(eG,{...e,shouldRenderErrors:!1})})]})}function eW({state:e,dispatch:t,createPaymentElement:a,unmountPaymentElement:i}){let{tier:l,hasDifferentLegalName:n,legalName:d,displayName:o}=e,[c,m]=(0,r.useState)(!1),_=(0,r.useMemo)(()=>({...e,errors:e.paymentFormErrors,stripeError:e.stripeError}),[e]);return(0,s.jsxs)("div",{children:[l===$.Ju.ORG&&(0,s.jsx)("div",{className:"xpezlj7",children:(0,s.jsx)(W,{title:(0,g.t)("checkout.organization_details"),children:(0,s.jsxs)("div",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l",children:[(0,s.jsx)(eh.Lf,{htmlName:"legal_org_name",label:(0,g.t)("org_self_serve.details_step.legal_company_name"),value:d,onChange:e=>{let a=e.target.value;t({type:B.UPDATE_LEGAL_NAME,payload:{legalName:a.trim()}})}}),(0,s.jsx)(eh.Lf,{noMarginBottom:!0,htmlName:"org_name",label:(0,g.t)("org_self_serve.details_step.company_display_name"),placeholder:(0,g.t)("org_self_serve.details_step.company_display_name__different_from_company_name_sub_text"),value:o,onChange:e=>{let a=e.target.value;t({type:B.UPDATE_DISPLAY_NAME,payload:{displayName:a.trim()}})}})]})})}),(0,s.jsxs)(W,{title:(0,g.t)("checkout.payment_details"),children:[(0,s.jsx)("div",{className:"xdpxx8g",children:(0,s.jsx)(eK,{canUpdateVatIds:!0,createPaymentElement:a,dispatch:t,paymentFlow:l===$.Ju.ORG?ex.ORG_UPGRADE:ex.PRO_UPGRADE,state:_,unmountPaymentElement:i,paymentElementEventHandlers:{ready:()=>m(!0)}})}),c&&l===$.Ju.PRO&&(0,s.jsxs)("div",{className:"xpgiz1h xemv814",children:[(0,s.jsx)(ep.S,{label:(0,s.jsx)(R.J,{children:(0,s.jsx)("span",{className:"xemv814",children:(0,g.tx)("checkout.i_have_a_different_legal_name")})}),checked:n,onChange:()=>{t({type:B.SET_HAS_DIFFERENT_LEGAL_NAME,payload:{hasDifferentLegalName:!n}})}}),(0,s.jsx)("div",{className:"x19ueytk"}),n&&(0,s.jsx)(eh.Lf,{value:d||"",htmlName:"legal_company_name",label:(0,g.t)("pro_cart.payment.legal_company_name_label"),placeholder:(0,g.t)("pro_cart.payment.legal_company_name_placeholder"),onChange:e=>{t({type:B.UPDATE_LEGAL_NAME,payload:{legalName:e.target.value.trim()}})},autoCompleteName:"legal company name",trackingFieldName:"Legal Company Name",dataTestId:"legal-company-name"})]})]})]})}var eY=a(475477),eJ=a(381671);let eZ=(0,s.jsx)(y.Ph,{newTab:!0,trusted:!0,href:"/pricing",children:(0,g.tx)("checkout.monthly_price")});function eX({state:e,onSubmit:t}){let{renewalTerm:a,isSubmitting:i,tier:l}=e,[n,d]=r.useState(!1),o=(0,s.jsx)("div",{className:"x78zum5 xl56j7k x6s0dn4 x1g5ndwp","data-testid":"cart-review-submit-loading",children:(0,s.jsx)(O.k,{})});return(0,s.jsxs)(W,{title:l===$.Ju.ORG?(0,g.t)("checkout.upgrade_to_an_organization_plan"):(0,g.t)("checkout.upgrade_to_a_professional_plan"),dataTestId:"cart-review",children:[(0,s.jsxs)("div",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l xpgiz1h",children:[(0,s.jsx)(en,{state:e,isCartReviewSummary:!0}),(0,s.jsx)("div",{"data-testid":"purchase-summary-plan-renewal",children:(0,s.jsxs)("p",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x78zum5",children:[(0,s.jsx)(eJ.w,{className:"xrxf7wd"}),(0,s.jsx)(e5,{tier:l,isAnnual:a===f.NW.YEAR})]})})]}),(0,s.jsx)(eQ,{tier:l,isAnnual:a===f.NW.YEAR}),(0,s.jsx)("div",{className:"x1bz8wuu x1hk0uxs x18wv8x9","data-testid":"cart-review-terms-checkbox",children:(0,s.jsx)(ep.S,{label:(0,s.jsx)(R.J,{children:(0,s.jsx)("span",{children:l===$.Ju.ORG?(0,s.jsx)(e0,{}):(0,s.jsx)(e1,{})})}),checked:n,onChange:d})}),(0,s.jsx)(q,{fullWidth:!0,onClick:t,disabled:i||!n,htmlAttributes:{"data-testid":"cart-review-submit-button"},trackingProperties:{trackingDescriptor:v.c.COMPLETE_PURCHASE},children:i?o:(0,g.tx)("checkout.complete_purchase")})]})}function eQ({tier:e,isAnnual:t}){let a=e===$.Ju.ORG?"https://help.figma.com/hc/articles/360040328293-Manage-billing-on-the-Organization-and-Enterprise-plans":"https://help.figma.com/hc/articles/360041061034-Manage-billing-on-the-Professional-plan";return(0,s.jsx)("div",{className:"x1bz8wuu","data-testid":"cart-review-upgrade-information-banner",children:(0,s.jsxs)("div",{className:"x1vi7shn xp6roeo x1nz7w5u xyx8554 x1v8gsql x19y5rnk x78zum5 xdt5ytf xg2d0mh",children:[(0,s.jsx)("p",{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh",children:(0,g.tx)("checkout.how_do_new_seat_additions_and_upgrades_work")}),(0,s.jsx)("p",{children:function(e,t){switch(e){case $.Ju.ORG:return(0,g.tx)("checkout.cart_review_upgrade_info_org");case $.Ju.PRO:return t?(0,g.tx)("checkout.cart_review_upgrade_info_pro_annual",{monthlyPriceLink:eZ}):(0,g.tx)("checkout.cart_review_upgrade_info_pro_monthly");default:(0,w.wc)(e)}}(e,t)}),(0,s.jsx)("div",{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh xlup9mm",children:(0,s.jsx)(y.Ph,{newTab:!0,href:a,trusted:!0,children:(0,g.tx)("checkout.learn_more")})})]})})}function e0(){return(0,g.tx)("org_self_serve.review_step.i_agree_to_msa_and_renewal_links",{msaLink:(0,s.jsx)(eY.N,{href:"/ssa",newTab:!0,trusted:!0,children:(0,g.tx)("org_self_serve.review_step.software_services_agreement")}),renewalLink:(0,s.jsx)(eY.N,{href:(0,g.dS)("/renewal-and-cancellation"),newTab:!0,trusted:!0,children:(0,g.tx)("org_self_serve.review_step.renewal_and_cancellation_terms")})})}function e1(){return(0,g.tx)("pro_cart.review.agree_with_privacy_and_cancellation",{termsOfServiceLink:(0,s.jsx)(y.Ph,{href:"/tos",newTab:!0,trusted:!0,children:(0,g.tx)("pro_cart.review.tos")}),privacyLink:(0,s.jsx)(y.Ph,{href:"/privacy",newTab:!0,trusted:!0,children:(0,g.tx)("pro_cart.review.privacy_policy")}),cancellationLink:(0,s.jsx)(y.Ph,{href:"/pricing-faq/#how-do-i-cancel-my-paid-plan",newTab:!0,trusted:!0,children:(0,g.tx)("pro_cart.review.cancellation_policy")})})}function e5({tier:e,isAnnual:t}){switch(e){case $.Ju.ORG:return(0,g.tx)("checkout.purchase_summary.plan_renewal_org");case $.Ju.PRO:return t?(0,g.tx)("checkout.purchase_summary.plan_renewal_pro_annual"):(0,g.tx)("checkout.purchase_summary.plan_renewal_pro_monthly");default:(0,w.wc)(e)}}function e2({navigateToEditDetails:e,state:t}){let a=(0,eC.Ay)().user_data,{displayName:r,legalName:i,tier:l,billingAddress:n,hasDifferentShippingAddress:d,shippingAddressInput:o}=t;return(0,s.jsxs)(W,{title:(0,g.t)("checkout.cart_plan_details.subtitle"),dataTestId:"cart-plan-details",children:[(0,s.jsx)(e7,{header:l===$.Ju.ORG?(0,g.t)("checkout.cart_plan_details.organization_name"):(0,g.t)("checkout.cart_plan_details.team_name"),value:r||i,dataTestId:"cart-plan-details-plan-name"}),i&&(0,s.jsx)(e7,{header:(0,g.t)("checkout.cart_plan_details.legal_name"),value:i,dataTestId:"cart-plan-details-legal-name"}),(0,s.jsx)(e7,{header:(0,g.t)("checkout.cart_plan_details.invoice_email"),value:a?.email??"",dataTestId:"cart-plan-details-invoice-email"}),n&&(0,s.jsx)(e7,{header:(0,g.t)("checkout.cart_plan_details.billing_address"),value:(0,et.DS)(n),dataTestId:"cart-plan-details-billing-address"}),d&&!(0,f.$V)(o)&&(0,s.jsx)(e7,{header:(0,g.t)("checkout.cart_plan_details.shipping_address"),value:(0,et.DS)(o),dataTestId:"cart-plan-details-shipping-address"}),(0,s.jsx)("div",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x1w4f5ud x1vamu9a",children:(0,s.jsx)(x.rb,{onClick:e,trackingProperties:{trackingDescriptor:v.c.EDIT_PLAN_DETAILS},"data-testid":"cart-plan-details-edit-details",children:(0,g.tx)("checkout.cart_plan_details.edit_details")})})]})}function e7({header:e,value:t,dataTestId:a}){return(0,s.jsxs)("div",{className:"x78zum5 xdt5ytf xuzqwsy xpezlj7 xso031l x1q0q8m5 xertd99 x1cy8zhl","data-testid":a,children:[(0,s.jsx)("h4",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x1n0bwc9 x1ihwiht",children:e}),(0,s.jsx)("p",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x1akne3o x13faqbe",children:t})]})}function e3(e){let t=e.state.is3ds;return(0,s.jsxs)(s.Fragment,{children:[t&&(0,s.jsx)("div",{className:"x8x9d4c xack27t xdpxx8g x4vex6e",children:(0,s.jsx)(P.Yy,{variant:"brand",children:(0,s.jsx)(M.Q,{children:(0,g.t)("pro_cart.review.extra_validation")})})}),(0,s.jsxs)("div",{className:"xrvj5dj xe1a36 xvossa","data-testid":"cart-review-step",children:[(0,s.jsx)(e2,{...e}),(0,s.jsx)(eX,{...e})]})]})}var e4=a(999083),e9=a(420680),e6=a(293422),e8=a(282856),te=a(804937),tt=a(774056),ta=a(72138),ts=a(876299),tr=a(963566),ti=a(560806),tl=a(755462),tn=a(753151),td=a(624258),to=a(366535),tc=a(826160);function tm({state:e,teamId:t,shouldShowTeamColumn:a,dispatch:i}){let{tier:l,selectedUserSeatTypes:n,additionalSeatsCount:c,eligibleUsersByUserId:m,eligibleTeamsByTeamId:_,selectedTeamIds:u,currentUpgradingUserId:p}=e,h=(0,ti.s)({eligibleUsersByUserId:m,eligibleTeamsByTeamId:_,selectedTeamIds:Array.from(u),currentUpgradingUserId:p}),x=(0,r.useRef)(null),y=(0,tr.f)({tableContainerRef:x}),[v,f]=r.useState(!1),S=r.useMemo(()=>{let e=[...h];return(0,e4.v7)(e,e=>e.handle,{isDescending:v}),e},[h,v]),j=(0,et.UL)((0,et.iB)(n)),T=(0,et.UL)(c),E=(0,ts.G)({currency:e.currency,tier:e.tier,renewalTerm:e.renewalTerm,showCents:!1}),[N]=(0,J.Ad)(E);if(null===N.data)throw Error("No seat types data");let b=N.data,A=(e,t)=>{i({type:B.UPDATE_USER_SEAT_TYPE,payload:{userId:e,seatType:t}})};return(0,s.jsx)("div",{"data-testid":"select-seats-step",children:(0,s.jsxs)("div",{className:"x1yjdb4r x1mxnbhz xmkeg23 x1y0btm7 x7z60cl",ref:x,children:[(0,s.jsx)(ta.P,{maxHeight:y,className:d.xW(tu.scrollContainer),hideScrollbar:!0,horizontalScrollingDisabled:!0,children:(0,s.jsxs)("table",{className:"xh8yej3 x140o2bo",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsxs)("th",{className:"x1uncgzr x1gcgh60 xctkrei xdpxx8g xxymvpz x1xvsi7n xdmjnt8 x7wzq59 xylkp1l x8phwbh x1vjfegm x1yjdb4r x19j9cuy",children:[(0,g.tx)("checkout.select_seats_table.user_column")," ",(0,s.jsx)("div",{className:"x1rg5ohu","data-testid":"select-seats-table-sort-users-button",children:(0,s.jsx)(e9.K,{onClick:()=>f(e=>!e),"aria-label":(0,g.t)("checkout.select_seats_table.sort"),children:v?(0,s.jsx)(e8.d,{"data-testid":"select-seats-table-icon-arrow-up"}):(0,s.jsx)(te.Q,{"data-testid":"select-seats-table-icon-arrow-down"})})})]}),(0,s.jsx)("th",{className:"x19zpy19 xf7z5ut xdpxx8g xxymvpz x1gcgh60 x7wzq59 xylkp1l x8phwbh x1vjfegm x1yjdb4r",children:(0,g.tx)("checkout.select_seats_table.seat_column")}),a&&(0,s.jsx)("th",{className:"xj35x94 xx99whi xdpxx8g xxymvpz xb3r6kr xuxw1ft xlyipyv x7wzq59 xylkp1l x8phwbh x1vjfegm x1yjdb4r",children:(0,g.tx)("checkout.select_seats_table.team_column")}),(0,s.jsx)("th",{className:"x8rdmch x1jwbysl xdpxx8g xxymvpz x7wzq59 xylkp1l x8phwbh x1vjfegm x1yjdb4r x1vp1w89 x1akne3o",children:(0,g.tx)("checkout.select_seats_table.description_column")})]})}),(0,s.jsx)("tbody",{className:"x1yjdb4r x499qwo",children:S.map(e=>(0,s.jsx)(t_,{user:e,seatTypes:b,selectedSeatType:n[e.id],changeSeatType:a=>{o.az.trackDefinedEvent("monetization_upgrades.user_seat_selection_changed_in_checkout",{targetUserId:e.id,previousSeatType:n[e.id],newSeatType:a,tier:l,teamId:t??void 0}),A(e.id,a)},tier:l,teamId:t??void 0,shouldShowTeamColumn:a},e.id))})]})}),(0,s.jsxs)("div",{className:"x1xvsi7n xdmjnt8 x8rdmch xyx8554 x178xt8z x13fuv20 x16ufvko x78zum5 x6s0dn4 x1qughib",children:[(0,s.jsx)(tl.m,{tier:l,seatTypes:b,additionalSeatCounts:c,setAdditionalSeats:e=>{i({type:B.UPDATE_ADDITIONAL_SEATS,payload:e})}}),(0,s.jsx)("p",{children:(0,g.tx)("checkout.select_seats_table.team_members_count",{assignedSeatsText:(0,g.tx)("checkout.select_seats_table.assigned_seats",{count:j}),unassignedSeatsText:(0,g.tx)("checkout.select_seats_table.unassigned_seats",{count:T})})})]})]})})}function t_({user:e,seatTypes:t,selectedSeatType:a,changeSeatType:r,tier:l,shouldShowTeamColumn:n,teamId:d}){let o=(0,i.wA)(),c=(0,N.TA)(),m=e.id===c;return(0,Y.uy)(t[a])?null:(0,s.jsxs)("tr",{"data-testid":`select_seat_row--${e.id}`,children:[(0,s.jsx)("td",{className:"x1uncgzr x1gcgh60 xctkrei xdpxx8g xxymvpz","data-testid":"select_seats_table_user_cell",children:(0,s.jsx)(tc.az,{entity:e,includeUserEmailAddress:!0,size:24,showIsMe:m})}),(0,s.jsx)("td",{className:"x19zpy19 xf7z5ut xdpxx8g xxymvpz",children:(0,s.jsx)(e6.Pw,{variant:"ghost","aria-label":(0,g.t)("checkout.edit_user_seat_name",{name:e.handle}),onClick:()=>{o((0,to.to)({type:tn.Y,data:{user:e,seatTypes:t,selectedSeatType:a,setSelectedSeatType:r,tier:l,teamId:d}}))},children:(0,s.jsxs)("span",{className:"x78zum5 x6s0dn4 x1qughib",children:[(0,s.jsxs)("span",{className:"x78zum5 x6s0dn4 x8vt714",children:[(0,s.jsx)(td.BC,{type:a,size:"24"}),t[a].displayName]}),(0,s.jsx)(tt.R,{})]})})}),n&&(0,s.jsx)("td",{className:"xj35x94 xx99whi xdpxx8g xxymvpz xb3r6kr xuxw1ft xlyipyv",children:e.teams}),(0,s.jsx)("td",{className:"x8rdmch x1jwbysl xdpxx8g xxymvpz x1n0bwc9",children:t[a].description})]})}let tu={scrollContainer:{kIxVMA:"x19j9cuy",ksF3WI:"x1vp1w89",krdFHd:null,kfmiAY:null,$$css:!0}};var tp=a(138105),th=a(503801);function tx({additionalSeatsCount:e,selectedUserSeatTypes:t,tier:a}){let s=(0,et.O$)(t,e);return(0,th.A)(s,a)?null:{code:L.INVALID_PAID_SEAT_TOTAL,message:(0,g.t)("checkout.sidebar.paid_seat_minimum_banner")}}var tg=a(599448),ty=a(281684),tv=a(181793),tf=a(913610),tS=a(507665),tj=a(572537),tT=a(710211);let tE=tT.M4.Query({fetch:async e=>e&&(0,n.kc)().cart_rewrite_full_send_saved_payment?(await tv.V.getSavedPaymentMethods({planType:e?.type,planId:e?.parentId})).data.meta:{payment_methods:[]},stalenessPolicy:"never"}),tN={stripePaymentMethod:void 0,savedPaymentMethod:void 0,vatGstId:"",regionalVatGstId:"",nameOnPaymentMethod:"",hasDifferentShippingAddress:!1,errors:[],savedPaymentMethods:[],isUsingSavedPaymentMethod:!1};function tb(e,t){switch(t.type){case ef.TOGGLE_DIFFERENT_SHIPPING_ADDRESS:return{...e,hasDifferentShippingAddress:!e.hasDifferentShippingAddress};case ef.INIT_SAVED_PAYMENT_METHODS:return{...e,savedPaymentMethods:t.payload,isUsingSavedPaymentMethod:t.payload.length>0,stripePaymentMethod:t.payload?.[0]?.id,savedPaymentMethod:t.payload?.[0]};case ef.UPDATE_VAT_GST_ID:return{...e,vatGstId:t.payload};case ef.UPDATE_REGIONAL_VAT_GST_ID:return{...e,regionalVatGstId:t.payload};case ef.UPDATE_NAME_ON_PAYMENT_METHOD:return{...e,nameOnPaymentMethod:t.payload};case ef.SET_ERRORS:return{...e,errors:t.payload};case ef.SET_STRIPE_PAYMENT_METHOD:return{...e,stripePaymentMethod:t.payload};case ef.TOGGLE_USE_SAVED_PAYMENT_METHOD:let a=e.isUsingSavedPaymentMethod;return{...e,isUsingSavedPaymentMethod:!a,stripePaymentMethod:a?void 0:e.savedPaymentMethod?.id};case ef.SET_SAVED_PAYMENT_METHOD:return{...e,savedPaymentMethod:t.payload,stripePaymentMethod:t.payload?.id};default:(0,w.xb)(t)}}async function tA({billingAddress:e,shippingAddress:t,teamId:a,isCheckout:s}){if((0,f.$V)(e))return{code:ev.MISSING_ADDRESS_ERROR,message:(0,g.t)("checkout.errors.missing_address")};try{await tS.$.validateAddresses({billingAddress:e,shippingAddress:t,teamId:a,isCheckout:s})}catch(e){return{code:ev.ADDRESS_VALIDATION_ERROR,message:(0,ty.J)(e)||e.message}}}async function tw({currency:e,billingAddress:t,shippingAddress:a,teamId:s,isCheckout:r}){if(!(0,f.$V)(t))try{await tS.$.validateCurrency({currency:e,billingAddress:t,shippingAddress:a,teamId:s,isCheckout:r})}catch(a){return(0,u.$D)(l.e.BILLING_EXPERIENCE,Error("[Billing] Currency/Address Mismatch"),a=>(a.setExtras({country:t.country,currency:e}),a)),{code:ev.CURRENCY_VALIDATION_ERROR,message:(0,g.t)("payments.errors.currency_mismatch_with_country_error",{selected_currency:e.toUpperCase()})}}}async function tC({vatGstId:e,country:t,region:a}){if(e)try{let s=await (0,tf.r)(e,t,a);if(!s.data.meta.valid)return{code:ev.VAT_GST_ID_VERIFICATION_ERROR,message:(0,ty.J)(s,(0,g.t)("tax.vat.vat_gst_validation_failed"))}}catch(e){return{code:ev.VAT_GST_ID_VERIFICATION_ERROR,message:e?.data?.message||(0,g.t)("tax.vat.vat_gst_validation_failed")}}}var tI=a(844882),tR=a(944350),tk=a(477871);let tP=tT.M4.Query({fetch:async e=>(await tv.V.getEligibleUpgradeData(e)).data.meta,stalenessPolicy:"never"});var tM=a(58212),tO=a(638641),tD=a(952385),tL=a(443192),tB=a(176203),tU=a(562552);async function tV({requestBody:e,teamId:t,userId:a,reduxDispatch:s,handleError:r}){try{let{data:{meta:{team:r}}}=await eP.m.createTeamSubscription(t??"",e);r&&s(tD.yJ({team:r,userInitiated:!1})),(0,o.sx)("Pro Team Purchased (GTM)"),s(tL.b({completed_pro_cart_flow:!0}));let i=new URLSearchParams(m.Ay.location.search);if(i.get("onCompleteRedirectFileKey")){let e=decodeURIComponent(i.get("onCompleteRedirectFileKey")),t=decodeURIComponent(i.get("onCompleteRedirectNodeId"));s(T.sf({view:"fullscreen",fileKey:e,nodeId:t,teamToMoveFileToOnNavigate:r.id,editorType:tB.nT.Design}))}else{let e={userId:a,teamId:r.id,orgId:null};s(j._l({workspace:e,view:{view:"allProjects",isProUpgrade:!0}}))}}catch(e){return r(e)}return null}async function tG({requestBody:e,user:t,upsellSource:a,handleError:s,reduxDispatch:r}){try{await tU.Eh.createNewOrg(e),r(tL.b({completed_org_cart_flow:!0})),(0,o.sx)("Self Serve Org Purchased (GTM)"),(0,ez.uE)("Self Serve Org Purchased",{user:t},{org_name:e.org_name,upsellSource:a})}catch(e){return s(e)}return null}let tz={eligibleTeamsByTeamId:{},eligibleUsersByUserId:{},currentUpgradingUserId:"",taxPercent:0,selectedUserSeatTypes:{},additionalSeatsCount:X.N_.dict(()=>0),selectedTeamIds:new Set,hasDifferentLegalName:!1,displayName:"",legalName:"",isLoading:!0,isSubmitting:!1,error:null};function t$({currency:e,renewalTerm:t,...a}){return{...tz,...a,currency:e??(0,G.LN)(),renewalTerm:t??f.NW.YEAR}}function tF(e,t){switch(t.type){case B.UPDATE_DISPLAY_NAME:return{...e,displayName:t.payload.displayName};case B.UPDATE_LEGAL_NAME:return{...e,legalName:t.payload.legalName,error:e.error?.code===L.INVALID_LEGAL_NAME?null:e.error};case B.SET_RENEWAL_TERM:return{...e,renewalTerm:t.payload.renewalTerm};case B.SET_CURRENCY:return{...e,currency:t.payload.currency};case B.SET_TAX_PERCENT:return{...e,taxPercent:t.payload.taxPercent};case B.SET_ERROR:return{...e,error:t.payload.error};case B.SET_IS_SUBMITTING:return{...e,isSubmitting:t.payload.isSubmitting};case B.SET_HAS_DIFFERENT_LEGAL_NAME:return{...e,legalName:"",hasDifferentLegalName:t.payload.hasDifferentLegalName};case B.INIT:return{...e,...t.payload,isLoading:!1};case B.UPDATE_ADDITIONAL_SEATS:return{...e,additionalSeatsCount:t.payload,error:tx({additionalSeatsCount:t.payload,selectedUserSeatTypes:e.selectedUserSeatTypes,tier:e.tier})};case B.UPDATE_USER_SEAT_TYPE:{let{userId:a,seatType:s}=t.payload,r={...e.selectedUserSeatTypes,[a]:s};return{...e,selectedUserSeatTypes:r,error:tx({additionalSeatsCount:e.additionalSeatsCount,selectedUserSeatTypes:r,tier:e.tier})}}case B.ON_TOGGLE_TEAM:{let{selectedTeamIds:a}=e,{toggledTeam:s}=t.payload,r=a.has(s);o.az.trackDefinedEvent("monetization_upgrades.checkout_change_team_selection",{teamId:s,selectedTeam:!r});let i=new Set(a);return r?i.delete(s):i.add(s),{...e,selectedTeamIds:i}}case B.UPDATE_STATE_FROM_NEW_TEAM_SELECTIONS:{let{eligibleTeamsByTeamId:t,selectedTeamIds:a,eligibleUsersByUserId:s,selectedUserSeatTypes:r,currentUpgradingUserId:i}=e;return{...e,selectedUserSeatTypes:(0,tg.h)({eligibleTeamsByTeamId:t,selectedTeamIds:a,eligibleUsersByUserId:s,selectedUserSeatTypes:r,currentUpgradingUserId:i})}}default:return e}}var tH=a(906356),tq=a(454967),tK=a(768399),tW=a(532292),tY=a(785034),tJ=a(537307),tZ=a(59849);function tX({teamId:e,entryPoint:t,...a}){let d=(0,E._6)(),p=(0,i.wA)(),{state:h,dispatch:x,createPaymentElement:y,unmountPaymentElement:v,validateUserSeatTypeSelections:j,validatePaymentInputs:b,collectPaymentDetails:w,performTierUpgrade:C}=function({teamId:e,...t}){let[a,s]=(0,r.useReducer)(tF,t,t$),{tier:l,currency:n,renewalTerm:d,selectedUserSeatTypes:o,additionalSeatsCount:c,hasDifferentLegalName:m,legalName:_}=a,u=eC.tl().stripe_payment_method_configurations?.[l],p=Q({currency:n,tier:l,renewalTerm:d}),{state:h,dispatch:x,createPaymentElement:y,unmountPaymentElement:v,createPaymentMethod:S,confirmIntent:j}=function({useStripeProps:e,currency:t,defaultCountry:a,isCheckout:s,upgradingTier:i}){let l=(0,eI.S2)().unwrapOr(null),[n,d]=(0,r.useReducer)(tb,tN),{address:o,updateAddress:c,trimAddress:m}=(0,tj.U)({defaultCountry:a??(0,G.ub)()}),{address:_,updateAddress:u,trimAddress:p}=(0,tj.U)({defaultCountry:a??(0,G.ub)()}),{createPaymentElement:h,unmountPaymentElement:x,createPaymentMethod:y,confirmIntent:v,error:S,paymentMethodType:j,stripeIntent:T,stripeCustomerId:E,is3ds:N}=eL({...e,currency:t}),b={name:n.nameOnPaymentMethod,address:(0,eR.sH)(o)},A=n.isUsingSavedPaymentMethod?(0,eR._l)(n.savedPaymentMethod?.billing_address):o,w=n.hasDifferentShippingAddress&&!(0,f.$V)(_)?_:o,C=n.savedPaymentMethod?.shipping_address?(0,eR._l)(n.savedPaymentMethod?.shipping_address):A,I=n.isUsingSavedPaymentMethod?C:w,{status:R,savedPaymentMethods:k}=function(){let e=(0,eI.S2)().unwrapOr(null),[t]=(0,tT.IT)(tE(e?.key),{enabled:!!e});return"loaded"===t.status?{status:t.status,savedPaymentMethods:t.data?.payment_methods??[]}:{status:t.status,savedPaymentMethods:[]}}();(0,r.useEffect)(()=>{"loaded"===R&&d({type:ef.INIT_SAVED_PAYMENT_METHODS,payload:k})},[R]);let P=async()=>{m(),p();let e=await D();if(d({type:ef.SET_ERRORS,payload:e}),e.length>0)return e;let t=await y(b);if(ey(t)||!t)return t;try{await tv.V.postValidatePayment({billingAddress:A,shippingAddress:I,paymentMethodId:t.id})}catch(t){let e=[{code:ev.PAYMENT_METHOD_VALIDATION_ERROR,message:t.message}];return d({type:ef.SET_ERRORS,payload:e}),e}return d({type:ef.SET_STRIPE_PAYMENT_METHOD,payload:t.id}),t.id},M=async({paymentMethod:a,createIntentParams:s})=>{let r=a||n.stripePaymentMethod;if(!r){let e=[{code:ev.MISSING_PAYMENT_METHOD_ERROR,message:(0,g.t)("payments.errors.missing_payment_method")}];return d({type:ef.SET_ERRORS,payload:e}),e}let o=await v({paymentMethod:r,createIntentParams:{...s,redirectUrl:"/",currency:t,billingAddress:A,shippingAddress:I,stripePaymentMethodConfiguration:e.stripePaymentMethodConfiguration}});if(ey(o))return o;if(o.customer)try{await tv.V.postSavePayment({paymentMethodId:r,stripeCustomerId:o.customer,planRecordId:l?.planRecordId,currency:t,billingAddress:A,shippingAddress:I,upgradingTier:i})}catch(t){let e=[{code:ev.SAVE_PAYMENT_METHOD_ERROR,message:t.message}];return d({type:ef.SET_ERRORS,payload:e}),e}return o},O=(0,r.useCallback)(e=>{switch(e.type){case ef.UPDATE_BILLING_ADDRESS:c(e.payload);break;case ef.UPDATE_SHIPPING_ADDRESS:u(e.payload);break;default:d(e)}},[c,u]);async function D(){let{vatGstId:e,regionalVatGstId:a,nameOnPaymentMethod:r}=n,i=await Promise.all([tA({billingAddress:A,shippingAddress:I,teamId:l?.key.parentId??null,isCheckout:!!s}),tw({currency:t,billingAddress:A,shippingAddress:I,teamId:l?.key.parentId??null,isCheckout:!!s}),tC({vatGstId:e,country:A.country}),tC({vatGstId:a,country:A.country,region:A.region})]);return r||i.unshift({code:ev.NAME_ON_PAYMENT_METHOD_REQUIRED,message:(0,g.t)("payments.errors.name_on_payment_method_required")}),i.filter(e=>!!e)}return{state:{...n,billingAddress:A,shippingAddress:I,shippingAddressInput:_,stripeError:S,paymentMethodType:j,stripeIntent:T,is3ds:N,stripeCustomerId:E},dispatch:O,createPaymentElement:h,unmountPaymentElement:x,createPaymentMethod:P,confirmIntent:M}}({useStripeProps:{currency:n,paymentFlowSource:ex.PRO_UPGRADE,stripePaymentMethodConfiguration:u},currency:n,defaultCountry:(0,G.ub)(),isCheckout:!0,upgradingTier:l}),{status:E,data:{eligibleTeams:b,eligibleTeamUsers:A,currentUpgradingUser:w}}=function(e){let t=(0,i.wA)(),a=(0,eI.S2)().unwrapOr(null),s=a?.type===tR.OL.TEAM?a:null,[r]=(0,tT.IT)(tP({tier:e,teamId:s?.key.parentId}));return((0,tk.i)(r,(0,g.t)("org_self_serve.confirmation_step.sorry_there_was_an_error_processing_your_request_refresh_and_try_again")),"errors"===r.status&&t(T.sf({view:"recentsAndSharing"})),"loaded"===r.status)?{status:r.status,data:{eligibleTeams:r.data.eligible_teams,eligibleTeamUsers:r.data.eligible_team_users,currentUpgradingUser:r.data.current_upgrading_user}}:{status:r.status,data:{eligibleTeams:[],eligibleTeamUsers:[],currentUpgradingUser:null}}}(l),C=(0,r.useMemo)(()=>(0,et.O$)(o,c),[o,c]),I=(0,r.useMemo)(()=>(0,et.s$)(p),[p]),R=(0,r.useMemo)(()=>({...a,...h,applicablePriceData:p,paymentFormErrors:h.errors,cartSelectionError:a.error,countBySeatType:C}),[a,h,p,C]),k=function({state:e,cartDispatch:t}){let a=(0,i.wA)(),s=(0,N.iZ)(),l=(0,eI.S2)().unwrapOr(null),n=function(e){let{tier:t,currency:a,renewalTerm:s,selectedUserSeatTypes:r,selectedTeamIds:i,displayName:l,legalName:n,taxPercent:d,applicablePriceData:o,vatGstId:c,regionalVatGstId:m,stripeCustomerId:_,countBySeatType:u}=e,p=(0,et.s$)(o),{subtotal:h,taxTotal:x,total:g}=(0,et.ZY)({countBySeatType:u,applicablePrices:p,taxPercent:d}),y={selected_user_seat_types:(0,et.VB)(r),billing_interval:s,displayed_cost_breakdown:{subtotal:h,tax_total:x,total:g},displayed_price_keys:(0,et.vm)(o),selected_currency:a,vat_gst_id:c||null,regional_vat_gst_id:m||null,is_cart_rewrite:!0};return t===$.Ju.PRO?{...y,legal_name:n||null,display_name:l||null,count_by_billable_product:u}:{...y,requested_seats:u,org_name:l||n,legal_org_name:n,team_ids:Array.from(i),stripe_customer_id:_||null,new_team_options:0===i.size?{team_name:l||n,add_to_org:!0}:void 0}}(e),d=(0,r.useCallback)(e=>{let s=(0,ty.J)(e,e.data?.message||(0,g.t)("org_self_serve.review_step.sorry_there_was_an_error_please_try_again"));if("CARD_ERROR"!==e.data.reason)return a(tM.F.enqueue({type:"checkout-flow-error",message:s,error:!0,preventDismissal:!0,icon:tO.zX.WARNING_EXCLAMATION_WITH_TRIANGLE})),{code:L.UPGRADE_ERROR,message:s};{let e={code:L.CARD_ERROR,message:s};return t({type:B.SET_ERROR,payload:{error:e}}),e}},[t,a]);return(0,r.useCallback)(async()=>{if(t({type:B.SET_IS_SUBMITTING,payload:{isSubmitting:!0}}),e.tier===$.Ju.PRO){let e=await tV({requestBody:n,teamId:l?.key.parentId,userId:s.id,reduxDispatch:a,handleError:d});if(e)return t({type:B.SET_IS_SUBMITTING,payload:{isSubmitting:!1}}),e}else{let r=await tG({requestBody:n,user:s,upsellSource:e.upsellSource,handleError:d,reduxDispatch:a});if(r)return t({type:B.SET_IS_SUBMITTING,payload:{isSubmitting:!1}}),r}return null},[e.tier,e.upsellSource,t,a,n,l?.key.parentId,s,d])}({state:R,cartDispatch:s});(0,r.useEffect)(()=>{if("loaded"===E){let{eligibleTeamsByTeamId:e,selectedTeamIds:t,eligibleUsersByUserId:a,selectedUserSeatTypes:r}=(0,tp.W)(b,A,w);(0,ea.R9)({eligibleTeamIds:b.map(e=>e.id).filter(e=>!!e),eligibleTeamUsers:A,tier:l}),s({type:B.INIT,payload:{eligibleTeamsByTeamId:e,selectedTeamIds:t,eligibleUsersByUserId:a,selectedUserSeatTypes:r,currentUpgradingUserId:w.user.id}})}},[E]);let P=(0,r.useCallback)(e=>{var t;"object"==typeof e&&null!==e&&"type"in e&&"string"==typeof(t=e.type)&&Object.values(ef).includes(t)?x(e):s(e)},[s,x]);async function M(){s({type:B.SET_IS_SUBMITTING,payload:{isSubmitting:!0}});let t=h.isUsingSavedPaymentMethod?h.stripePaymentMethod:await S();if(eS(t)||ey(t))return s({type:B.SET_IS_SUBMITTING,payload:{isSubmitting:!1}}),t;let a=await j({paymentMethod:t,createIntentParams:{teamId:e,subtotalEstimate:(0,ee.Vh)(C,I),currency:n,createStripeCustomer:!0}});if(ey(a)||eS(a))return s({type:B.SET_IS_SUBMITTING,payload:{isSubmitting:!1}}),a;try{let t=await tI.T.calculateEstimate({teamId:e,address:h.billingAddress,billingAddress:h.billingAddress,shippingAddress:h.shippingAddress,currency:n,vatGstId:h.vatGstId,regionalVatGstId:h.regionalVatGstId});s({type:B.SET_TAX_PERCENT,payload:{taxPercent:t.data.meta.estimate.tax_percent??0}})}catch(t){let e={code:L.ESTIMATE_CALCULATION_ERROR,message:(0,g.t)("payments.errors.estimate_calculation_error")};return s({type:B.SET_ERROR,payload:{error:e}}),s({type:B.SET_IS_SUBMITTING,payload:{isSubmitting:!1}}),e}return s({type:B.SET_IS_SUBMITTING,payload:{isSubmitting:!1}}),null}let O=(0,r.useCallback)(()=>{let e=tx({additionalSeatsCount:c,selectedUserSeatTypes:o,tier:l});return P({type:B.SET_ERROR,payload:{error:e}}),e},[P,c,o,l]),D=(0,r.useCallback)(()=>{if((l===$.Ju.ORG||l===$.Ju.PRO&&m)&&!_){let e={code:L.INVALID_LEGAL_NAME,message:(0,g.t)("checkout.errors.missing_legal_name")};return P({type:B.SET_ERROR,payload:{error:e}}),e}return null},[P,l,_,m]);return{state:R,dispatch:P,createPaymentElement:y,unmountPaymentElement:v,collectPaymentDetails:M,performTierUpgrade:k,validateUserSeatTypeSelections:O,validatePaymentInputs:D}}({teamId:e,tier:a.tier,currency:a.currency,renewalTerm:a.renewalTerm,upsellSource:a.upsellSource}),{tier:I,currency:R,renewalTerm:k,selectedTeamIds:P,selectedUserSeatTypes:M,additionalSeatsCount:O,countBySeatType:D,applicablePriceData:U,eligibleTeamsByTeamId:V,isLoading:z,stripeError:F,cartSelectionError:q,isSubmitting:K}=h,W=(0,r.useMemo)(()=>z?[]:function({tier:e,eligibleTeams:t}){let a=[f.fI.SELECT_SEATS,f.fI.PAYMENT_AND_ADDRESS,f.fI.REVIEW];if(e===$.Ju.PRO)return a;{let e=[...a,f.fI.ORG_CONFIRMATION];return t.length>0?[f.fI.SELECT_TEAMS,...e]:e}}({tier:I,eligibleTeams:Object.values(V)}),[z,I,V]),[Y,J]=(0,r.useState)(W[0]),{teamName:Z,isOrgAdmin:X}=(0,_.bc)((0,tZ.CJW)({teamId:e})).transform(({team:e,currentUser:t})=>({teamName:e?.name??"",isOrgAdmin:t?.baseOrgUsers?.some(e=>e.permission===tR._D.ADMIN)})).unwrapOr({teamName:"",isOrgAdmin:!1}),es=(0,r.useCallback)(e=>{"teamUpgrade"===d.view?p((0,T.sf)({...d,paymentStep:e})):"orgSelfServe"===d.view&&p((0,T.sf)({...d,step:e}))},[p]),er=(0,r.useCallback)(t=>{if(-1===W.indexOf(t)){(0,u.$D)(l.e.MONETIZATION_UPGRADES,Error(`Invalid step: ${t}`),{extra:{steps:W,step:t}});return}J(t),es(t),Y&&o.az.trackDefinedEvent("monetization_upgrades.checkout_change_step",{teamId:e??void 0,currentStep:Y,tier:I,newStep:t})},[W,es,e,Y,I]),ei=(0,r.useCallback)(e=>{let t=W.indexOf(Y);W.indexOf(e)>t||er(e)},[Y,W,er]),en=(0,r.useCallback)(()=>W[Math.min(W.indexOf(Y)+1,W.length-1)],[Y,W]),ed=(0,r.useCallback)(async()=>{if(K)return!1;switch(x({type:B.SET_ERROR,payload:{error:null}}),Y){case f.fI.SELECT_TEAMS:x({type:B.UPDATE_STATE_FROM_NEW_TEAM_SELECTIONS});break;case f.fI.SELECT_SEATS:if(await j())return!1;break;case f.fI.PAYMENT_AND_ADDRESS:if(b()||await w())return!1}return er(en()),!0},[Y,er,j,b,w,x,en,K]),eo=(0,r.useCallback)(async()=>{await C()||I!==$.Ju.ORG||er(f.fI.ORG_CONFIRMATION)},[C,er,I]),ec=()=>{p((0,to.to)({type:tH.lk,data:{source:tq.B.ORG_SELF_SERVE_UPGRADE_MODAL}}))};return(0,r.useEffect)(()=>{if(!z&&!Y){let a=W[0];er(a),(0,n.kc)().enable_starter_cart_rum_tracking&&(0,c.bj)({collectErrors:!0,service:"cart",sessionSampleRate:100,alwaysInit:!0}),o.az.trackDefinedEvent("monetization_upgrades.checkout_entry",{teamId:e??void 0,entryPoint:t??void 0,step:a,tier:I,currency:R,renewalTerm:k,selectedTeamIds:(0,ea.gu)(Array.from(P)),selectedUserSeatTypes:(0,ea.Tj)(M)??void 0,additionalSeatsCount:(0,ea.gS)(O)??void 0,countBySeatType:(0,ea.gS)(D)??void 0})}},[z,Y,W,er,e,t,I,R,k,P,M,D,O]),(0,r.useEffect)(()=>{Y===f.fI.PAYMENT_AND_ADDRESS&&F?.code===eg.UNINITIALIZED_STRIPE_ELEMENTS_ERROR&&er(f.fI.SELECT_SEATS)},[F?.code,Y,er]),(0,r.useEffect)(()=>{q?.code===L.CARD_ERROR&&Y===f.fI.REVIEW&&er(f.fI.PAYMENT_AND_ADDRESS)},[q?.code,er,Y]),(0,r.useEffect)(()=>{Z&&x({type:B.UPDATE_DISPLAY_NAME,payload:{displayName:Z}})},[Z,x]),(0,r.useEffect)(()=>{document.querySelector("h1")?.focus()},[Y]),(0,s.jsx)(H.fu,{name:el.e0.TIER_UPGRADE_FLOW,properties:{teamId:e,entryPoint:t,upsellSource:a.upsellSource,tier:I,step:Y,currency:R,renewalTerm:k,prices:(0,ea.Jh)(U)},enabled:!z,trackingOptions:{teamName:l.e.MONETIZATION_UPGRADES,addToRUM:!0},children:(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)(tY.f,{}),children:z?(0,s.jsx)(tY.f,{}):Y===f.fI.ORG_CONFIRMATION?(0,s.jsx)(eu,{orgMigrated:a.orgMigrated}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(A,{steps:W,currentStep:Y,setStep:ei,teamId:e}),I===$.Ju.ORG&&X&&(0,s.jsx)(tW.wW,{onContactSales:ec,onFileBrowserClick:()=>{m.Ay.redirect("/files/recent")}}),(0,s.jsxs)("form",{className:"xg01n1d x4gyc16 x10im51j xvueqy4 x87ps6o",children:[(0,s.jsx)(e_,{step:Y,teamName:Z}),Y===f.fI.REVIEW?(0,s.jsx)(e3,{state:h,onSubmit:eo,navigateToEditDetails:()=>er(f.fI.PAYMENT_AND_ADDRESS)}):(0,s.jsxs)("div",{className:"xrvj5dj x3uu4nb x1fwvi78",children:[Y===f.fI.SELECT_TEAMS&&(0,s.jsx)(tK.t,{newTeamName:null,teams:(0,et.Ds)(Object.values(V)),selectedTeamIds:P,onToggle:e=>{x({type:B.ON_TOGGLE_TEAM,payload:{toggledTeam:e}})},isCartFullSend:!0}),Y===f.fI.SELECT_SEATS&&(0,s.jsx)(tm,{state:h,teamId:e,dispatch:x,shouldShowTeamColumn:I===$.Ju.ORG}),Y===f.fI.PAYMENT_AND_ADDRESS&&(0,s.jsx)(eW,{state:h,dispatch:x,createPaymentElement:y,unmountPaymentElement:v}),(0,s.jsx)(em,{buttonText:S[Y]?.buttonText??null,state:h,dispatch:x,onClickNext:ed,nextStep:en(),canSwitchRenewalTerm:I===$.Ju.PRO,onContactSalesClick:ec})]})]})]})})})}function tQ(e){return(0,s.jsx)(p.tH,{team:l.e.MONETIZATION_UPGRADES,boundaryKey:"TeamUpgradeBillingRemodel",fallback:p.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:tJ.y4,children:(0,s.jsx)(tX,{...e})})}},229910:(e,t,a)=>{a.d(t,{L:()=>j});var s=a(104076),r=a(716976),i=a(903927),l=a(511570),n=a.n(l),d=a(289758),o=a(555013),c=a(236631),m=a(256384),_=a(106141),u=a(192075),p=a(281684),h=a(366535),x=a(483200),g=a(507665),y=a(959834),v=a(432786),f=a(672815);let S=r.memo(function(e){let t=(0,i.wA)(),{displayName:a,legalName:l}=e,[y,S]=r.useState(a||""),[j,T]=r.useState(l||""),{isLoading:E,withLoading:N}=(0,_.R)(),b=()=>{t(h.Ce())},A=async a=>{a.preventDefault(),await N(async()=>{if(e.updateNameImmediately&&e.team)try{e.canSeeBillingAddressExp?await (0,d.WB)().optimisticallyUpdate({Plan:{[`team::${e.team.id}`]:{name:y}}},g.$.updateDisplayName({teamId:e.team.id,updatedDisplayName:y})):await (0,d.WB)().optimisticallyUpdate({Plan:{[`team::${e.team.id}`]:{name:y}}},g.$.updateTeamName({teamId:e.team.id,updatedDisplayName:y,updatedLegalName:j}))}catch(s){let a=e.canSeeBillingAddressExp?(0,u.t)("update_company_details_modal.update_display_name.error"):(0,u.t)("update_company_details_modal.update_team_name.error");throw t(m.s.error((0,p.J)(s)||a)),s}else t(x.yy({legalName:j,displayName:y}));b()})};return(0,s.jsx)(v.OJ,{onClose:b,title:e.modalTitle,minWidth:448,maxWidth:448,fixedTop:!0,children:(0,s.jsxs)("form",{onSubmit:A,className:c.s.p16.$,children:[(0,s.jsxs)("div",{className:c.s.mt4.$,children:[(0,s.jsxs)("label",{htmlFor:"teamName",className:c.s.colorTextSecondary.$,children:[(0,s.jsx)("strong",{className:c.s.block.colorText.$,children:(0,u.tx)("pro_cart.review.edit_details.team_name_label")}),(0,u.tx)("pro_cart.review.edit_details.team_name_description")]}),(0,s.jsx)(o.ks,{value:y,id:"teamName",onChange:e=>{S(e.target.value)},dataTestId:"company-team-name",className:c.s.block.mt8.wFull.$})]}),!e.canSeeBillingAddressExp&&(0,s.jsxs)("div",{className:c.s.mt20.$,children:[(0,s.jsxs)("label",{htmlFor:"legalName",className:c.s.colorTextSecondary.$,children:[(0,s.jsx)("strong",{className:c.s.block.colorText.$,children:(0,u.tx)("pro_cart.review.edit_details.company_name_label")}),(0,u.tx)("pro_cart.review.edit_details.company_name_description")]}),(0,s.jsx)(o.ks,{value:j,id:"legalName",onChange:e=>{T(e.target.value)},dataTestId:"company-name",className:c.s.block.mt8.wFull.$})]}),(0,s.jsxs)("div",{className:n()(f.v0,f.hF),children:[(0,s.jsx)(o.tM,{onClick:b,disabled:E,children:(0,u.tx)("pro_cart.review.edit_details.cancel")}),(0,s.jsx)(o.vd,{className:f.pL,disabled:E,type:"submit",children:(0,u.tx)("pro_cart.review.edit_details.save")})]})]})})}),j=(0,y.Ju)(S,"UpdateCompanyDetailsModal")},71004:(e,t,a)=>{a.d(t,{Mt:()=>w,OI:()=>A,Ud:()=>N});var s=a(716976),r=a(903927),i=a(883765),l=a(310725),n=a(328341),d=a(755444),o=a(432099),c=a(256384),m=a(192075),_=a(525980),u=a(147046),p=a(877100),h=a(483200),x=a(935167),g=a(418149),y=a(944350),v=a(984887),f=a(338052),S=a(134391),j=a(592726),T=a(530299),E=a(853039);let N=(0,f.D)(({teamId:e,canSeeBillingAddressExp:t})=>{let a=(0,r.wA)(),p=(0,r.d4)(e=>e.loadingState),g=(0,r.d4)(t=>e?t.teamUserByTeamId[e]:null),f=(0,r.d4)(e=>e.selectedView),N=(0,j.iZ)(),[A,C]=(0,s.useState)(!0),I=(0,n.ZC)(e),R=(0,_.s)(),k=x.Xw.loadingKeyForPayload({teamId:e}),P=(0,T.GH)(p,k),M=(0,d.DC)();(0,s.useEffect)(()=>{a(x.Xw({teamId:e}))},[a,e]);let O=function(){let e=(0,r.wA)();return(0,s.useCallback)(t=>{(0,i.sx)("Loaded Saved Cart State",{teamId:t.teamId,lastSavedAt:t.updatedAt}),e(h.eK(t))},[e])}();return(0,s.useEffect)(()=>{async function s(t){try{let s=await o.Ay.post("/api/subscriptions/teams/calculate_estimate",{...t,team_id:e});a(h.i({taxes:s.data.meta.estimate}))}catch(e){a(c.s.error((0,m.t)("payments.errors.estimate_calculation_error"))),a(u.sf({...f,paymentStep:v.Vv.PAYMENT_AND_ADDRESS}))}C(!1)}if(void 0===I||I===e||A||(w(a),C(!0)),(!e||P)&&A){let n=(0,E.BR)(g,N),d=Object.entries(n).map(([e,t])=>{if((0,l.nD)(t.email||""))return e}).filter(e=>!!e);a(h.M2({figmaEmailTeamUsers:d}));let o=(0,S.lX)({teamId:e,userId:N?.id});if(o){o.editorStatusChanges=(0,S.nt)(o.editorStatusChanges,n);let l=(0,E.Ky)(n,o.editorStatusChanges,y._Y.DESIGN),c=(0,E.Ky)(n,o.editorStatusChanges,y._Y.WHITEBOARD),m=l+o.numEmptyDesignSeats,_=c+o.numEmptyWhiteboardSeats;if(O({numDesignEditors:m,numWhiteboardEditors:_,editorStatusChanges:o.editorStatusChanges,teamId:e,updatedAt:o.updatedAt,cartSelections:o.cartSelections}),M){var r;let e=(r=M.billing_period,v.tY[v.tY[r]]),i=t?{billing_address:M.billing_address,shipping_address:M.shipping_address||M.billing_address}:null;a(h.Lo({billingPeriod:e})),a(h.$h({vatGstId:M.vat_gst_id})),a(h.yy({legalName:M.customer_legal_name||M.company_name,displayName:M.display_name})),a(h.Ef({regionalVatGstId:M.regional_vat_gst_id})),s({address:M.address,editor_status_changes:o.editorStatusChanges,figma_email_team_users:d,selected_currency:M.currency,annual_quantity:(0,E.fD)(e,m),monthly_quantity:(0,E.Rq)(e,m),annual_whiteboard_quantity:(0,E.fD)(e,_),monthly_whiteboard_quantity:(0,E.Rq)(e,_),vat_gst_id:M.vat_gst_id,regional_vat_gst_id:M.regional_vat_gst_id,...i})}else"teamUpgrade"===f.view&&f.paymentStep===v.Vv.CONFIRM_PAY&&f.billingPeriod!==v.tY.STUDENT&&i.az.trackDefinedEvent("monetization_upgrades.pro_checkout_confirmation_without_payment_flow_data",{isCampfireCart:R,teamId:e??void 0}),C(!1)}else C(!1)}},[a,P,g,I,e,N,A,M,f,O,t,R]),(0,s.useEffect)(()=>()=>{e&&b(a,e)},[a,e]),A}),b=(0,f.D)((e,t)=>{let a=x.Xw.loadingKeyForPayload({teamId:t});e(p.yH({key:a}))});function A(e){e(h.qU({cartSelections:{countBySeatType:g.N_.dict(e=>0),selectedUserSeatTypes:{}}}))}function w(e){e(h.Je({editorStatusChanges:{upgrade:{whiteboard:[],design:[],slides:[],sites:[],cooper:[],figmake:[]},downgrade:{whiteboard:[],design:[],slides:[],sites:[],cooper:[],figmake:[]}}})),e(h.js({numDesignEditors:0})),e(h.Az({numWhiteboardEditors:0}))}},6817:(e,t,a)=>{a.d(t,{s:()=>m,K:()=>_});var s=a(104076),r=a(652539),i=a(236631),l=a(659062),n=a(111297),d=a(809027),o=a(97605);let c=e=>e.maxSeatsCount?Math.min(e.maxSeatsCount,99):99;function m(e){return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:i.s.flex.itemsCenter.$,children:[(0,s.jsxs)("div",{className:"seat_counter--seatCounter--DiuEb",children:[(0,s.jsx)(n.$z,{disabled:e.numSeats<=e.minSeatsCount,innerText:`remove additional ${e.billableProductKey} seat`,className:"seat_counter--minusButton--e0dEs",onClick:e.decrementSeats,dataTestId:`remove-additional-${e.billableProductKey}`,children:(0,s.jsx)(r.B,{svg:d.A})}),(0,s.jsx)("input",{value:e.numSeats,maxLength:2,onChange:e.updateAdditionalSeatsText,className:"seat_counter--additionalSeatsInput--pOPr1",onFocus:e=>e.target.select()}),(0,s.jsx)(n.$z,{disabled:e.numSeats>=c(e),innerText:`add additional ${e.billableProductKey} seat`,className:"seat_counter--plusButton--ZEWEz",onClick:e.incrementSeats,dataTestId:`add-additional-${e.billableProductKey}`,children:(0,s.jsx)(r.B,{svg:o.A})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"seat_counter--headerText--xIHXf",children:e.headerText}),e.headerSubText&&(0,s.jsx)("div",{className:"seat_counter--headerSubText--c9SXC seat_counter--headerText--xIHXf",children:e.headerSubText}),e.clarificationText&&(0,s.jsx)("span",{style:l.sx.colorText.colorBgSecondary.h16.pl4.pr4.mt8.bRadius1.inlineBlock.add({fontSize:"9px"}).$,children:e.clarificationText})]})]})})}function _(e,t){return a=>{if(""===a.target.value){e(0);return}let s=parseInt(a.target.value);isNaN(s)||(s>99?e(99):t&&s>t?e(t):e(s))}}},99725:(e,t,a)=>{a.d(t,{I:()=>i});var s=a(104076),r=a(716976);class i extends r.Component{render(){return(0,s.jsxs)("div",{className:"persisted_error--container--ls5K4",style:{marginTop:this.props.marginTop??32},children:[(0,s.jsx)("div",{className:"persisted_error--sideBar--C-abH"}),(0,s.jsx)("div",{className:"persisted_error--message--EiciR",children:this.props.message})]})}}},640718:(e,t,a)=>{a.d(t,{o:()=>l});var s=a(104076),r=a(716976);if(443==a.j)var i=a(827695);function l(e){return(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)(i.k,{}),children:e.children})}},106141:(e,t,a)=>{a.d(t,{R:()=>r});var s=a(716976);function r(){let[e,t]=s.useState(!1);return{isLoading:e,withLoading:async e=>{try{t(!0),await e()}finally{t(!1)}}}}},381671:(e,t,a)=>{a.d(t,{w:()=>r});var s=a(104076);let r=(0,a(716976).memo)(function(e){return(0,s.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,s.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M17.523 12.036a.5.5 0 0 1 .449.546A5.999 5.999 0 0 1 7 15.315V17.5a.5.5 0 0 1-1 0v-3a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1H8.002q.066.089.137.175a5 5 0 0 0 8.838-2.69.5.5 0 0 1 .546-.45M17.5 6a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1 0-1h1.498a5 5 0 0 0-8.975 2.515.5.5 0 1 1-.995-.097A6 6 0 0 1 17 8.684V6.5a.5.5 0 0 1 .5-.5"})})})}}]);

//# debugId=48ce5210-6698-5d2e-97b6-60b46fd1640b

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/39ee4e2af75b3c43c989b9254233434c44d448cf/c5e2cae0-fa6be850db0f6a73.min.js.map